<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<!--
	CREATED BY : PRAVEEN
	DATE : 17-09-24
-->

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="/ASPIRA/js/jquery.min.js"></script>
	<script src="/ASPIRA/js/jquery-ui.min.js"></script>
	<style>
		table {
			width: 100%;
			table-layout: auto;
			border-collapse: collapse;
		}

		table th,
		table td {
			white-space: nowrap;
			padding: 8px 12px;
			border: 1px solid #ccc;
		}

		#placelist1 {
			width: auto;
		}

		#placelist2 {
			width: auto;
		}

		#placelist3 {
			width: auto;
		}

		#placelist4 {
			width: auto;
		}

		.table-container {
			overflow-x: auto;
		}
	</style>

	<style>
		body {
			font-size: 0.8rem;
		}

		.btn {
			line-height: 0.5rem;
		}

		.table-bordered td,
		.table-bordered th {
			font-size: smaller;
		}

		.container-manager {
			width: 83.5%;
			padding-right: 15px;
			padding-left: 15px;
			margin-right: auto;
			margin-left: 17.3%;
			margin-top: 80px;
			margin-top: 80px;
		}

		.table .thead-light th {
			color: #495057;
			background-color: #e9ecef;
			border-color: #dee2e6;
			width: 23px;
		}

		.scroll {
			max-height: 60vh;
			overflow-y: scroll;
			overflow-x: hidden;
		}

		.tablinks {
			background-color: #f1f1f1;
			/* Default background color */
			border: none;
			color: black;
			padding: 10px 20px;
			text-align: center;
			text-decoration: none;
			display: inline-block;
			font-size: 16px;
			transition: background-color 0.3s;
		}

		.tablinks.active {
			background-color: #2084a9;
			color: white;
		}

		.tab {
			overflow: hidden;
			border: 1px solid #ccc;
			background-color: #f2f2f2;
		}

		.tab button {
			background-color: inherit;
			float: left;
			border: none;
			outline: none;
			cursor: pointer;
			padding: 14px 56px;
			transition: 0.3s;
			font-size: 17px;
		}

		.tab button:hover {
			background-color: #ddd;
		}

		.tabcontent {
			display: none;
			padding: 0px;
			border-top: 1px solid #ccc;
		}

		.active {
			background-color: #2084a9;
		}

		#myPieChart {
			width: 100px;
			height: 100px;
		}
	</style>
	<style>
		.modal {
			display: none;
			/* Hidden by default */
			position: absolute;
			/* Stay in place */
			z-index: 1;
			/* Sit on top */
			padding-top: 100px;
			/* Location of the box */
			left: 0;
			top: 0;
			width: 100%;
			/* Full width */
			height: 100%;
			/* Full height */
			overflow: auto;
			/* Enable scroll if needed */
			background-color: rgb(0, 0, 0);
			/* Fallback color */
			background-color: rgba(0, 0, 0, 0.4);
			/* Black w/ opacity */
		}

		.modal-header {
			padding: 2px 16px;
			background-color: #BBC3CB;
			color: balck;
		}

		/* Ensure modal background is removed */
		.modal-backdrop {
			display: none !important;
			/* Completely hide backdrop */
		}

		/* Optional: Prevent page from scrolling when modal is open */
		body.modal-open {
			overflow: hidden;
		}

		.modal-body {
			padding: 2px 16px;
		}

		.modal-footer {
			padding: 2px 16px;
			background-color: #BBC3CB;
			color: black;
		}

		/* Modal Content */
		.modal-content {
			background-color: #fefefe;
			margin: auto;
			padding: 20px;
			border: 1px solid #888;
			width: 80%;
			height: 0%;
			box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
			-webkit-animation-name: animatetop;
			-webkit-animation-duration: 0.4s;
			animation-name: animatetop;
			animation-duration: 0.4s
		}

		.close {
			color: red;
			font-size: 28px;
			font-weight: bold;
		}

		.close:hover,
		.close:focus {
			color: black;
			text-decoration: none;
			cursor: pointer;
		}
	</style>
	<style>
		.password-info {
			visibility: hidden;
			width: 320px;
			background-color: #333;
			color: #fff;
			text-align: left;
			border-radius: 10px;
			padding: 10px;
			position: absolute;
			z-index: 1;
			top: calc(100% + 10px);
			left: 50%;
			transform: translateX(-50%);
			opacity: 0;
			transition: opacity 0.3s;
		}

		input:hover+.password-info {
			visibility: visible;
			opacity: 0.8;
		}

		.subtablinks {
			background-color: #f1f1f1;
			/* Default background color */
			border: none;
			color: black;
			padding: 10px 20px;
			text-align: center;
			text-decoration: none;
			display: inline-block;
			font-size: 16px;
			transition: background-color 0.3s;
		}

		.subtablinks.active {
			background-color: #2084a9;
			color: white;
		}

		.hover-underline:hover {
			text-decoration: underline;
			text-decoration-color: #007bff;
			cursor: pointer;
			/* Sets underline color to blue */
		}

		.big-btn {
			font-size: 16px;
		}
	</style>
	<script>
		function Home() {

			location.href = 'Dashboard';
		}

		function Back() {
			window.history.back();
		}

		$(function () {
			$(
				"#doj,#dob,#date_of_offer,#date_of_appointment_letter,#aed,#ped,#dsd,#ded")
				.datepicker({
					dateFormat: "dd-mm-yy",
					changeMonth: true,
					changeYear: true

				});
		});
	</script>
	<script>
		function AddBranch() {

			location.href = './organizationDetails?formmode=AddBranch';

		}

		function list() {

			location.href = './organizationDetails?formmode=list';
		}

		function add() {

			location.href = './organizationDetails?formmode=add';
		}

		function Modify() {

			location.href = './organizationDetails?formmode=ModifyHead';
		}



	</script>

	<script>
		function view(a) {
			var branch = a.getAttribute('data-resource');

			location.href = './organizationDetails?formmode=view&branch_name='
				+ branch;
		}


		function branchfunction(a) {
			var branch = a.getAttribute('data-resource');
			var mod_flg = a.getAttribute('data-modify_flg');
			if (mod_flg == "Y") {
				location.href = './organizationDetails?formmode=DeleteBranch&branch_name='
					+ branch;
			} else {
				location.href = './organizationDetails?formmode=modify&branch_name='
					+ branch;
			}
		}

		/* 	function openTab(evt, tabName) {
	
		 var tabcontent = document.getElementsByClassName("tabcontent");
		 for (let i = 0; i < tabcontent.length; i++) {
		 tabcontent[i].style.display = "none";
		 }
	
		 let tablinks = document.getElementsByClassName("tablinks");
		 for (let i = 0; i < tablinks.length; i++) {
		 tablinks[i].classList.remove("active");
		 }
	
		 document.getElementById(tabName).style.display = "block";
		 evt.currentTarget.classList.add("active");
	
		 //document.getElementById("submitBtn").style.display = (tabName === 'tab2') ? 'block' : 'none';
		 } */
		function showError(element, message) {
			var errorSpan = $('<span class="error-message"></span>').text(message);
			errorSpan.css('color', 'red');
			element.after(errorSpan);
		}

		function hideError(element) {
			element.next('.error-message').remove();
		}

		function validateField(selector, message) {
			const element = $(selector);
			if (!element.val()) {
				showError(element, message);
				return true;
			} else {
				hideError(element);
				return false;
			}
		}

		function AddSubmit() {
			let hasError = false;
			//for customer check

			/*  hasError = validateField("#branch_head", 'Required') || hasError; 
			 hasError = validateField("#branch_code", 'Required') || hasError; 
			 hasError = validateField("#swift_code", 'Required') || hasError; 
			 hasError = validateField("#designation", 'Required') || hasError; 
			 hasError = validateField("#land_line", 'Required') || hasError; 
			 hasError =validateField("#branch_name", 'Required') || hasError;
			 hasError =  validateField("#mobile", 'Required') || hasError; 
			 hasError =  validateField("#photo", 'Required') || hasError; 
			 hasError =  validateField("#cont_person", 'Required') || hasError; 
			 hasError =  validateField("#fax", 'Required') || hasError;  */


			if (hasError) {
				$('#alert1').modal("toggle");
				$('#alertmsg1').text("Enter the Required fields..");
				return; // Exit the function if there are validation errors
			}
			var formElement = document.getElementById('assosiateForm1'); // Get the form element
			var formData = new FormData(formElement);
			var photoInput = formElement.querySelector("input[name='photo']");
			alert(photoInput)

			if (photoInput && photoInput.files.length > 0) {
				formData.append("photoFile", photoInput.files[0]);
			} else {
				console.error("Photo input not found or no file selected.");
				$('#alert1').modal("toggle");
				$('#alertmsg1').text("Please select a photo.");
				return; // Exit the function if the photo input is not found or no file is selected
			}
			$.ajax({
				url: './OrgBranchAdd',
				data: formData,
				type: 'POST',
				processData: false,  // Don't process the data
				contentType: false,
				success: function (data) {
					$("#alertmsg").text(data);
					$('#alert').modal("show");
				}
			});

		}

		function ModifyTab1Submit() {

			$.ajax({
				url: './tab1modify',
				data: $("#tab1modify").serialize(),
				type: 'POST',
				success: function (data) {
					$("#alertmsg").text(data);
					$('#alert').modal("show");
				},
				error: function (jqXHR, textStatus, errorThrown) {
					console.error("Error in AJAX request: " + textStatus, errorThrown);
				}
			});
		}


		function ModifyTab2Submit() {

			$.ajax({
				url: './tab2modify',
				data: $("#tab2modify").serialize(),
				type: 'POST',
				success: function (data) {
					$("#alertmsg").text(data);
					$('#alert').modal("show");
				}
			});

		}
		function del_bran() {

			$.ajax({
				url: './tab2Del',
				data: $("#tab2Del").serialize(),
				type: 'POST',
				success: function (data) {
					$("#alertmsg").text(data);
					$('#alert').modal("show");
				}
			});

		}
	</script>

	<script>
		function openTab(evt, tabName) {
			// Hide all main tab content
			let i, tabcontent, tablinks;
			tabcontent = document.getElementsByClassName("tabcontent");
			for (i = 0; i < tabcontent.length; i++) {
				tabcontent[i].style.display = "none";
			}

			// Remove active class from main tabs
			tablinks = document.getElementsByClassName("tablinks");
			for (i = 0; i < tablinks.length; i++) {
				tablinks[i].className = tablinks[i].className
					.replace(" active", "");
			}

			// Show selected main tab and set as active
			document.getElementById(tabName).style.display = "block";
			evt.currentTarget.className += " active";
		}

		function openSubTab(evt, subTabName) {
			// Hide all sub-tab content
			let i, subtabcontent, subtablinks;
			subtabcontent = document.getElementsByClassName("subtabcontent");
			for (i = 0; i < subtabcontent.length; i++) {
				subtabcontent[i].style.display = "none";
			}

			// Remove active class from sub-tabs
			subtablinks = document.getElementsByClassName("subtablinks");
			for (i = 0; i < subtablinks.length; i++) {
				subtablinks[i].className = subtablinks[i].className.replace(
					" active", "");
			}

			// Show selected sub-tab and set as active
			document.getElementById(subTabName).style.display = "block";
			evt.currentTarget.className += " active";
		}
	</script>
	<script>
		$(function () {
			$("#date_of_regn").datepicker({
				dateFormat: "dd-mm-yy", // Format as 'DD-MM-YYYY'
				changeMonth: true, // Allows changing month
				changeYear: true, // Allows changing year
				yearRange: "1900:2024", // Year range
				maxDate: new Date()
				// Restricts to today or earlier
			});
		});
	</script>
	<script>
		function addHoliday() {

			location.href = './organizationDetails?formmode=addholiday';

		}
		function UploadHoliday() {

			location.href = './organizationDetails?formmode=UploadHoliday';

		}
		function ModifyHoliday() {

			location.href = './organizationDetails?formmode=ModifyHoliday';
		}

		function ListHoliday() {

			location.href = './organizationDetails?formmode=listholiday';
		}
	</script>
	<script>
		function submitexcelgst() {
			event.preventDefault(); // Prevent default form submission behavior

			var fileInput = document.getElementById('fileval');
			console.log(fileInput);

			// Check if a file is selected
			if (fileInput && fileInput.files.length > 0) {
				var file = fileInput.files[0];
				//alert(file.name); // Alert with the file name

				var formData = new FormData();
				formData.append('file', file);

				$.ajax({
					url: './calenderuploadexcel',
					data: formData,
					type: 'POST',
					contentType: false,
					processData: false,
					cache: false, // Disable cache to avoid potential issues
					success: function (data) {
						alert('File uploaded successfully: ' + data);
						console.log("Successfully Upload")
					},
					error: function (xhr, status, error) {
						alert('Error occurred while uploading file: ' + error);
					}
				});
			} else {
				alert('Please select a file before uploading.');
			}
		}

		function getdata(a) {
			var record_srl = a.getAttribute("data-attr");
			console.log("record_srl" + record_srl);
			location.href = 'organizationDetails?formmode=viewrecord&record_srl='
				+ record_srl;
		}
	</script>
	<script>
		function validateNumericInput(input) {
			const errorMessage = document.getElementById('errorMessage');
			// Remove any non-numeric characters
			input.value = input.value.replace(/[^0-9]/g, '');

			// Show an error message if needed (optional)
			if (/[^0-9]/.test(input.value)) {
				errorMessage.style.display = 'block';
			} else {
				errorMessage.style.display = 'none';
			}
		}

		function validatePanCard(input) {
			const errorMessage = document.getElementById('errorMessage');
			const value = input.value;

			// Allow only alphanumeric characters
			input.value = value.replace(/[^a-zA-Z0-9]/g, '');

			// Check if the length is exactly 10
			if (input.value.length !== 10) {
				errorMessage.style.display = 'block';
			} else {
				errorMessage.style.display = 'none';
			}
		}

		function validateAddress(input) {
			const value = input.value;

			// Check if the length is less than 3 characters
			if (value.length < 3 && value.length > 0) {
				alert("Please fill in more than 3 letters.");
			}
		}
	</script>
	<!-- jQuery Datepicker Setup -->
	<script>
		$(function () {
			$("#currentvalue").datepicker({
				dateFormat: "dd-mm-yy", // Date format for the UI
				changeMonth: true,
				changeYear: true,
				onSelect: function () {
					sendSelectedDate();  // Automatically call AJAX when date is selected
				}
			});
		});
	</script>

	<!-- AJAX Function to send selected date -->
	<script>
		function sendSelectedDate() {
			var selectedDate = $("#currentvalue").val();
			if (!selectedDate) {
				alert("Please select a date.");
				return;
			}

			var dateParts = selectedDate.split('-');
			var formattedDate = dateParts[2] + '-' + dateParts[1] + '-' + dateParts[0];

			function handleAjax(url, tableId, buildRowsFn) {
				$.ajax({
					url: url,
					type: 'GET',
					data: {currentDate: formattedDate},
					success: function (response) {
						var rows = "";
						if (!response || response.length === 0) {
							rows = "<tr><td colspan='7' style='text-align:center;'>No Data Found</td></tr>";
						} else {
							rows = buildRowsFn(response);
						}
						$('#' + tableId).html(rows);
					},
					error: function () {
						$('#' + tableId).html("<tr><td colspan='7' style='text-align:center;color:red;'>Error fetching data</td></tr>");
					}
				});
			}

			// === TAB 1 ===
			handleAjax("./getBranchData", "placelist1", function (response) {
				var rows = "";
				for (var i = 0; i < response.length; i++) {
					var data = response[i];
					var formattedCreationDate = '';
					if (data.creation_date) {
						var rawDate = new Date(data.creation_date);
						var day = String(rawDate.getDate()).padStart(2, '0');
						var month = String(rawDate.getMonth() + 1).padStart(2, '0');
						var year = rawDate.getFullYear();
						formattedCreationDate = day + '-' + month + '-' + year;
					}
					var loanAmountFormatted = data.loan_amount && !isNaN(data.loan_amount)
						? parseFloat(data.loan_amount).toLocaleString('en-IN', {minimumFractionDigits: 2, maximumFractionDigits: 2})
						: '';

					rows += "<tr>";
					rows += "<td>" + (i + 1) + "</td>";
					rows += "<td>1</td>";
					rows += "<td>" + formattedCreationDate + "</td>";
					rows += "<td title='DISRB'>DISRB</td>";
					rows += "<td style='text-align:right;'>" + loanAmountFormatted + "</td>";
					rows += "<td>" + (data.id || '') + "</td>";
					rows += "<td>" + (data.loan_name || '') + "</td>";
					rows += "</tr>";
				}
				return rows;
			});

			// === TAB 2 (INDEM) ===
			handleAjax("./getBranchData1", "placelist2", function (response) {
				var rows = "", serialNo = 1;
				for (var i = 0; i < response.length; i++) {
					var data = response[i];
					var formattedCreationDate = data[2] ? new Date(data[2]).toLocaleDateString('en-GB').replace(/\//g, '-') : '';
					var interest = data[10] && !isNaN(data[10]) ? parseFloat(data[10]).toLocaleString('en-IN', {minimumFractionDigits: 2}) : '';

					// INDEM row only for Tab 2
					rows += `<tr>
			                    <td>${serialNo++}</td>
			                    <td>1</td>
			                    <td>${formattedCreationDate}</td>
			                    <td title='INDEM'>INDEM</td>
			                    <td style='text-align:right;'>${interest}</td>
			                    <td>${data[30] || ''}</td>
			                    <td>${data[31] || ''}</td>
			                 </tr>`;
				}
				return rows;
			});

			// === TAB 3 ===
			handleAjax("./getBranchData31", "placelist3", function (response) {
				var rows = "", serialNo = 1;
				for (var i = 0; i < response.length; i++) {
					var data = response[i];
					var formattedCreationDate = data[2] ? new Date(data[2]).toLocaleDateString('en-GB').replace(/\//g, '-') : '';
					var principal = data[7] && !isNaN(data[7]) ? parseFloat(data[7]).toLocaleString('en-IN', {minimumFractionDigits: 2}) : '';
					var interest = data[10] && !isNaN(data[10]) ? parseFloat(data[10]).toLocaleString('en-IN', {minimumFractionDigits: 2}) : '';
					var fee = data[13] && !isNaN(data[13]) ? parseFloat(data[13]).toLocaleString('en-IN', {minimumFractionDigits: 2}) : '';

					rows += `<tr><td>${serialNo++}</td><td>1</td><td>${formattedCreationDate}</td><td title='INDEM'>INDEM</td><td style='text-align:right;'>${interest}</td><td>${data[30] || ''}</td><td>${data[31] || ''}</td></tr>`;
					rows += `<tr><td>${serialNo++}</td><td>2</td><td>${formattedCreationDate}</td><td title='FEEDM'>FEEDM</td><td style='text-align:right;'>${fee}</td><td>${data[30] || ''}</td><td>${data[31] || ''}</td></tr>`;
					rows += `<tr><td>${serialNo++}</td><td>3</td><td>${formattedCreationDate}</td><td title='PRDEM'>PRDEM</td><td style='text-align:right;'>${principal}</td><td>${data[30] || ''}</td><td>${data[31] || ''}</td></tr>`;
				}
				return rows;
			});

			// === TAB 4 ===
			handleAjax("./getBranchData11", "placelist4", function (response) {
				var rows = "";
				for (var i = 0; i < response.length; i++) {
					var data = response[i];
					var formattedCreationDate = data[2] ? new Date(data[2]).toLocaleDateString('en-GB').replace(/\//g, '-') : '';
					var loanAmountFormatted = data[10] && !isNaN(data[10]) ? parseFloat(data[10]).toLocaleString('en-IN', {minimumFractionDigits: 2}) : '';
					rows += `<tr><td>${i + 1}</td><td>1</td><td>${formattedCreationDate}</td><td title='INDEM'>INDEM</td><td style='text-align:right;'>${loanAmountFormatted}</td><td>${data[30] || ''}</td><td>${data[31] || ''}</td></tr>`;
				}
				return rows;
			});

			// === TAB 5 (FEEDM) ===
			handleAjax("./getBranchData21", "placelist5", function (response) {
				var rows = "", serialNo = 1;
				for (var i = 0; i < response.length; i++) {
					var data = response[i];
					var formattedCreationDate = data[2] ? new Date(data[2]).toLocaleDateString('en-GB').replace(/\//g, '-') : '';
					var fee = data[13] && !isNaN(data[13]) ? parseFloat(data[13]).toLocaleString('en-IN', {minimumFractionDigits: 2}) : '';

					// FEEDM row only for Tab 5
					rows += `<tr>
			                    <td>${serialNo++}</td>
			                    <td>2</td>
			                    <td>${formattedCreationDate}</td>
			                    <td title='FEEDM'>FEEDM</td>
			                    <td style='text-align:right;'>${fee}</td>
			                    <td>${data[30] || ''}</td>
			                    <td>${data[31] || ''}</td>
			                 </tr>`;
				}
				return rows;
			});
		}

		function disbursementsubmit() {
			var tableData = [];


			// Collect data from the table
			$('#placelist1 tr').each(function () {
				var row = $(this).find('td');

				var rowData = {
					srl_no: $(row[0]).text().trim(),
					flow_id: $(row[1]).text().trim(),
					flow_date: $(row[2]).text().trim(),
					flow_code: $(row[3]).text().trim(),
					flow_amount: $(row[4]).text().trim().replace(/,/g, ''), // remove comma
					account_number: $(row[5]).text().trim(),
					account_name: $(row[6]).text().trim()

				};

				tableData.push(rowData);
			});

			// Show the file uploading popup
			const currentvalue = document.getElementById('currentvalue').value;
			document.getElementById('loadingModal').style.display = 'flex';

			// Inline AJAX with File Uploading message
			$.ajax({
				url: './saveBranchData',  // Your controller endpoint
				type: 'POST',
				contentType: 'application/json',
				data: JSON.stringify(tableData),
				success: function (response) {
					document.getElementById('loadingModal').style.display = 'none';
					let formattedAmount = Number(response.totalAmount)
						.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});
					let message =
						"Disbursement Migration Completed<br>" +
						"Migration Date: " + currentvalue + "<br>" +
						"Total Disbursed Amount: " + formattedAmount + "<br>" +
						"Total Records Migrated: " + response.totalRecords + "<br>" +
						"Failed Records: " + response.failedRecords + "<br>";

					// ✅ Write to the same modal-body container
					$('#Successmsgpopup').html("<h6 class='text-center'>" + message + "</h6>");
					$('#SuccesPopUp').modal('show');
				},
				error: function () {
					// Hide the uploading popup first
					document.getElementById('loadingModal').style.display = 'none';

					// Show error message in the popup
					$('#alertmsg121').text('Failed to save data.');
					$('#alert121').modal('show');
				}
			});
		}

		function bookingsubmit() {
			var tableData = [];

			// Collect data from the table
			$('#placelist4 tr').each(function () {
				var row = $(this).find('td');

				var rowData = {
					srl_no: $(row[0]).text().trim(),
					flow_id: $(row[1]).text().trim(),
					flow_date: $(row[2]).text().trim(),
					flow_code: $(row[3]).text().trim(),
					flow_amount: $(row[4]).text().trim().replace(/,/g, ''), // remove comma
					account_number: $(row[5]).text().trim(),
					account_name: $(row[6]).text().trim()
				};

				tableData.push(rowData);
			});

			// Show the file uploading popup
			const currentvalue = document.getElementById('currentvalue').value;
			document.getElementById('loadingModal').style.display = 'flex';

			// Inline AJAX with File Uploading message
			$.ajax({
				url: './saveBranchData1',  // Your controller endpoint
				type: 'POST',
				contentType: 'application/json',
				data: JSON.stringify(tableData),
				success: function (response) {

					document.getElementById('loadingModal').style.display = 'none';
					let formattedAmount = Number(response.totalAmount)
						.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});
					let message =
						"Booking Migration Completed<br>" +
						"Migration Date: " + currentvalue + "<br>" +
						"Total Disbursed Amount: " + formattedAmount + "<br>" +
						"Total Records Migrated: " + response.totalRecords + "<br>" +
						"Failed Records: " + response.failedRecords + "<br>";

					// ✅ Write to the same modal-body container
					$('#Successmsgpopup').html("<h6 class='text-center'>" + message + "</h6>");
					$('#SuccesPopUp').modal('show');
				},
				error: function () {
					// Hide the uploading popup first
					document.getElementById('loadingModal').style.display = 'none';

					// Show error message in the popup
					$('#alertmsg121').text('Failed to save data.');
					$('#alert121').modal('show');
				}
			});
		}

		function interestsubmit() {
			const currentvalue = document.getElementById('currentvalue').value;
			document.getElementById('loadingModal').style.display = 'flex';

			var tableData = [];

			$('#placelist2 tr').each(function () {
				var row = $(this).find('td');
				if (row.length > 0) {
					var rowData = {
						srl_no: $(row[0]).text().trim(),
						flow_id: $(row[1]).text().trim(),
						flow_date: $(row[2]).text().trim(),
						flow_code: $(row[3]).text().trim(),
						flow_amount: $(row[4]).text().trim().replace(/,/g, ''),
						account_number: $(row[5]).text().trim(),
						account_name: $(row[6]).text().trim()
					};
					tableData.push(rowData);
				}
			});

			if (tableData.length === 0) {
				alert("No data to submit.");
				return;
			}


			$.ajax({
				url: './saveBranchData2',
				type: 'POST',
				contentType: 'application/json',
				data: JSON.stringify(tableData,),
				success: function (response) {
					document.getElementById('loadingModal').style.display = 'none';
					let formattedAmount = Number(response.totalAmount)
						.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});
					let message =
						"Interest Migration Completed<br>" +
						"Migration Date: " + currentvalue + "<br>" +
						"Total Disbursed Amount: " + formattedAmount + "<br>" +
						"Total Records Migrated: " + response.totalRecords + "<br>" +
						"Failed Records: " + response.failedRecords + "<br>";

					// ✅ Write to the same modal-body container
					$('#Successmsgpopup').html("<h6 class='text-center'>" + message + "</h6>");
					$('#SuccesPopUp').modal('show');
				},
				error: function () {
					document.getElementById('loadingModal').style.display = 'none';
					$('#alertmsg121').text('Failed to save data.');
					$('#alert121').modal('show');
				}
			});
		}

		function feessubmit() {
			var tableData = [];

			$('#placelist5 tr').each(function () {
				var row = $(this).find('td');
				if (row.length > 0) {
					var rowData = {
						srl_no: $(row[0]).text().trim(),
						flow_id: $(row[1]).text().trim(),
						flow_date: $(row[2]).text().trim(),
						flow_code: $(row[3]).text().trim(),
						flow_amount: $(row[4]).text().trim().replace(/,/g, ''),
						account_number: $(row[5]).text().trim(),
						account_name: $(row[6]).text().trim()
					};
					tableData.push(rowData);
				}
			});

			if (tableData.length === 0) {
				alert("No data to submit.");
				return;
			}

			const currentvalue = document.getElementById('currentvalue').value;
			document.getElementById('loadingModal').style.display = 'flex';

			$.ajax({
				url: './saveBranchData2',
				type: 'POST',
				contentType: 'application/json',
				data: JSON.stringify(tableData),
				success: function (response) {
					document.getElementById('loadingModal').style.display = 'none';
					let formattedAmount = Number(response.totalAmount)
						.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});
					let message =
						"Fees Migration Completed<br>" +
						"Migration Date: " + currentvalue + "<br>" +
						"Total Disbursed Amount: " + formattedAmount + "<br>" +
						"Total Records Migrated: " + response.totalRecords + "<br>" +
						"Failed Records: " + response.failedRecords + "<br>";

					// ✅ Write to the same modal-body container
					$('#Successmsgpopup').html("<h6 class='text-center'>" + message + "</h6>");
					$('#SuccesPopUp').modal('show');
				},
				error: function () {
					document.getElementById('loadingModal').style.display = 'none';
					$('#alertmsg121').text('Failed to save data.');
					$('#alert121').modal('show');
				}
			});
		}

		function recoverysubmit() {
			var tableData = [];

			$('#placelist3 tr').each(function () {
				var row = $(this).find('td');
				if (row.length > 0) {
					var rowData = {
						srl_no: $(row[0]).text().trim(),
						flow_id: $(row[1]).text().trim(),
						flow_date: $(row[2]).text().trim(),
						flow_code: $(row[3]).text().trim(),
						flow_amount: $(row[4]).text().trim().replace(/,/g, ''),
						account_number: $(row[5]).text().trim(),
						account_name: $(row[6]).text().trim()
					};
					tableData.push(rowData);
				}
			});

			if (tableData.length === 0) {
				alert("No data to submit.");
				return;
			}

			const currentvalue = document.getElementById('currentvalue').value;
			document.getElementById('loadingModal').style.display = 'flex';

			$.ajax({
				url: './saveBranchData3',
				type: 'POST',
				contentType: 'application/json',
				data: JSON.stringify(tableData),
				success: function (response) {
					document.getElementById('loadingModal').style.display = 'none';
					let formattedAmount = Number(response.totalAmount)
						.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});
					let message =
						"Recovery Migration Completed<br>" +
						"Migration Date: " + currentvalue + "<br>" +
						"Total Disbursed Amount: " + formattedAmount + "<br>" +
						"Total Records Migrated: " + response.totalRecords + "<br>" +
						"Failed Records: " + response.failedRecords + "<br>";

					// ✅ Write to the same modal-body container
					$('#Successmsgpopup').html("<h6 class='text-center'>" + message + "</h6>");
					$('#SuccesPopUp').modal('show');
				},
				error: function () {
					document.getElementById('loadingModal').style.display = 'none';
					$('#alertmsg121').text('Failed to save data.');
					$('#alert121').modal('show');
				}
			});
		}

		function downloadExcel(type) {
			// Show loading modal
			document.getElementById('loadingModal').style.display = 'flex';

			const basePath = /*[[${#httpServletRequest.contextPath}]]*/ '';
			const url = basePath + '/ASPIRA/DisplayExcel1?type=' + type;
			var selectedDate = $("#currentvalue").val();
			var dateParts = selectedDate.split('-');
			var formattedDate = dateParts[2] + '-' + dateParts[1] + '-' + dateParts[0];

			$.ajax({
				url: url,
				type: 'GET',
				data: {currentDate: formattedDate},
				xhrFields: {
					responseType: 'blob' // Important to receive file as blob
				},
				success: function (blob, status, xhr) {
					// Get filename from response header if provided
					let filename = "file.xlsx";
					const disposition = xhr.getResponseHeader('Content-Disposition');
					if (disposition && disposition.indexOf('filename=') !== -1) {
						filename = disposition.split('filename=')[1].replace(/"/g, '');
					}

					// Create a link to download the blob
					const downloadUrl = window.URL.createObjectURL(blob);
					const a = document.createElement('a');
					a.href = downloadUrl;
					a.download = filename;
					document.body.appendChild(a);
					a.click();
					a.remove();
					window.URL.revokeObjectURL(downloadUrl);
				},
				error: function (err) {
					console.error('Download error:', err);
					alert('Error downloading file.');
				},
				complete: function () {
					// Hide loading modal after success or error
					document.getElementById('loadingModal').style.display = 'none';
				}
			});
		}

		function openTab(evt, tabName) {
			let i, tabcontent, tablinks, downloadBtns;

			// Hide all main tab content
			tabcontent = document.getElementsByClassName("tabcontent");
			for (i = 0; i < tabcontent.length; i++) {
				tabcontent[i].style.display = "none";
			}

			// Remove active class from main tabs
			tablinks = document.getElementsByClassName("tablinks");
			for (i = 0; i < tablinks.length; i++) {
				tablinks[i].className = tablinks[i].className.replace(" active", "");
			}

			// Hide all download buttons
			downloadBtns = document.getElementsByClassName("download-btn");
			for (i = 0; i < downloadBtns.length; i++) {
				downloadBtns[i].style.display = "none";
			}

			// Show selected main tab and set as active
			document.getElementById(tabName).style.display = "block";
			evt.currentTarget.className += " active";

			// Show related download button only if currentvalue has value
			const currentInput = document.getElementById("currentvalue");
			const relatedBtn = document.getElementById("download-" + tabName);
			if (relatedBtn && currentInput.value.trim() !== "") {
				relatedBtn.style.display = "inline-block";
			}
		}

		$('#placelist3 tr').each(function () {
			var row = $(this).find('td');
			if (row.length > 0) {
				var rowData = {
					srl_no: $(row[0]).text().trim(),
					flow_id: $(row[1]).text().trim(),
					flow_date: $(row[2]).text().trim(),
					flow_code: $(row[3]).text().trim(),
					flow_amount: $(row[4]).text().trim().replace(/,/g, ''),
					account_number: $(row[5]).text().trim(),
					account_name: $(row[6]).text().trim()
				};
				tableData.push(rowData);
			}
		});

		if (tableData.length === 0) {
			alert("No data to submit.");
			return;
		}

		$('#alertmsg121').text('File Uploading...');
		$('#alert121').modal('show');

		$.ajax({
			url: './saveBranchData3',
			type: 'POST',
			contentType: 'application/json',
			data: JSON.stringify(tableData),
			success: function (response) {
				$('#alertmsg121').text('Data saved successfully!');
				$('#alert121').modal('hide');
			},
			error: function () {
				$('#alert121').modal('hide');
				$('#alertmsg121').text('Failed to save data.');
				$('#alert121').modal('show');
			}
		});
	</script>
</head>

<body>
	<div class="col-sm-2">
		<div th:insert="BGLSHeaderMenu :: header"></div>
	</div>
	<!---------------------User List Starts------------------------------------------------------->
	<!-- Start Content-->
	<div class="container-manager">



		<div class="row">


			<div class="col-sm-11 ml-5 mt-2" style="font-size: 0.8rem;">


				<!-- ------------------------------------Organization Main---------------------------------- -->


				<div th:if="${formmode}=='add'">
					<div class="card ">

						<div class="card-header d-flex justify-content-between align-items-center"
							style="background-color: #e9ecef; height: 50px;">

							<!-- Left side -->
							<div>
								<h6 style="font-size: 1.2rem; color: black; margin: 0;">TRANSACTION</h6>
							</div>

							<!-- Right side -->
							<div class="d-flex align-items-center">
								<div class="pr-2 mr-2">
									<span><b>MIGRATION DATE</b></span>
								</div>
								<div>
									<input type="text" name="current" id="currentvalue"
										class="form-control form-control-sm bg-white border border-dark"
										placeholder="dd-mm-yyyy" autocomplete="off" />
								</div>

								<div style="padding-left: 40px;">
									<!-- Place all download buttons -->
									<button id="download-tab1" class="download-btn btn-primary big-btn"
										style="display:none;" onclick="downloadExcel('disbursement')">Download
										Disbursement</button>
									<button id="download-tab2" class="download-btn btn-primary big-btn"
										style="display:none;" onclick="downloadExcel('interest')">Download
										Interest</button>
									<button id="download-tab5" class="download-btn btn-primary big-btn"
										style="display:none;" onclick="downloadExcel('fees')">Download Fees</button>
									<button id="download-tab3" class="download-btn btn-primary big-btn"
										style="display:none;" onclick="downloadExcel('recovery')">Download
										Recovery</button>
									<button id="download-tab4" class="download-btn btn-primary big-btn"
										style="display:none;" onclick="downloadExcel('booking')">Download
										Booking</button>
								</div>

							</div>
						</div>

						<div class="tab mt-2"
							style="padding: 4px 4px; position: relative; display: flex; justify-content: space-around; margin-top: 10px; width: 100%; height: 43px">
							<button class="tablinks" onclick="openTab(event, 'tab1')"
								style="font-size: 16px; padding: 4px 8px; height: 32px;">Disbursement</button>
							<button class="tablinks" onclick="openTab(event, 'tab2')"
								style="font-size: 16px; padding: 4px 8px; height: 32px;">Interest
								Transaction</button>
							<button class="tablinks" onclick="openTab(event, 'tab5')"
								style="font-size: 16px; padding: 4px 8px; height: 32px;">Fees
								Transaction</button>
							<button class="tablinks" onclick="openTab(event, 'tab3')"
								style="font-size: 16px; padding: 4px 8px; height: 32px;">Recovery
								Transaction</button>
							<button class="tablinks" onclick="openTab(event, 'tab4')"
								style="font-size: 16px; padding: 4px 8px; height: 32px;">Booking
								Transaction</button>
						</div>

						<div id="tab1" class="tabcontent" style="display: block">
							<div class="card-body">
								<!-- Scrollable table container -->
								<div class="table-wrapper"
									style="max-height: 340px; overflow-y: auto; display: block; border: 1px solid #ccc;">
									<table class="table table-bordered table-hover table-sm"
										style="margin-bottom: 0px; font-size: initial; width: 100%; table-layout: fixed;">
										<thead class="thead-light"
											style="position: sticky; top: 0; background-color: #f8f9fa; z-index: 1;">
											<tr>
												<th style="width: 9%">SRL NO</th>
												<th style="width: 9%">FLOW ID</th>
												<th style="width: 12%">FLOW DATE</th>
												<th style="width: 12%">FLOW CODE</th>
												<th style="width: 12%; text-align: center;">FLOW AMOUNT</th>
												<th style="width: 23%">ACCOUNT NUMBER</th>
												<th style="width: 23%">ACCOUNT NAME</th>
											</tr>
										</thead>
										<tbody id="placelist1">

										</tbody>
									</table>
								</div>
							</div>

							<div class="card-footer text-center" style="background-color: #e9ecef">
								<button class="btn-primary big-btn" onclick="Home();">Home</button>
								<button class="btn-primary big-btn" onclick="disbursementsubmit(this);">Proceed</button>
								<button class="btn-primary big-btn" onclick="Back();">Back</button>
							</div>
						</div>


						<div id="tab2" class="tabcontent" style="display: none">

							<div class="card-body">
								<div class="table-wrapper"
									style="max-height: 340px; overflow-y: auto; display: block; border: 1px solid #ccc;">
									<table class="table table-bordered table-hover table-sm"
										style="margin-bottom: 0px; font-size: initial; width: 100%; table-layout: fixed;">
										<thead class="thead-light"
											style="position: sticky; top: 0; background-color: #f8f9fa; z-index: 1;">
											<tr>
												<th style="width: 9%">SRL NO</th>
												<th style="width: 9%">FLOW ID</th>
												<th style="width: 12%">FLOW DATE</th>
												<th style="width: 12%">FLOW CODE</th>
												<th style="width: 12%; text-align: center;">FLOW AMOUNT</th>
												<th style="width: 23%">ACCOUNT NUMBER</th>
												<th style="width: 23%">ACCOUNT NAME</th>
											</tr>
										</thead>
										<tbody id="placelist2">

										</tbody>
									</table>
								</div>
							</div>
							<div class="card-footer text-center" style="background-color: #e9ecef;">
								<button class="btn-primary big-btn" onclick="Home();">Home</button>
								<button class="btn-primary big-btn" onclick="interestsubmit(this);">Proceed</button>
								<button class="btn-primary big-btn" onclick="Back();">Back</button>
							</div>
						</div>

						<div id="tab3" class="tabcontent" style="display: none;">
							<div class="card-body">
								<div class="table-wrapper"
									style="max-height: 340px; overflow-y: auto; display: block; border: 1px solid #ccc;">
									<table class="table table-bordered table-hover table-sm"
										style="margin-bottom: 0px; font-size: initial; width: 100%; table-layout: fixed;">
										<thead class="thead-light"
											style="position: sticky; top: 0; background-color: #f8f9fa; z-index: 1;">
											<tr>
												<th style="width: 9%">SRL NO</th>
												<th style="width: 9%">FLOW ID</th>
												<th style="width: 12%">FLOW DATE</th>
												<th style="width: 12%">FLOW CODE</th>
												<th style="width: 12%; text-align: center;">FLOW AMOUNT</th>
												<th style="width: 23%">ACCOUNT NUMBER</th>
												<th style="width: 23%">ACCOUNT NAME</th>
											</tr>
										</thead>

										<tbody id="placelist3">

										</tbody>
									</table>
								</div>
							</div>
							<div class="card-footer text-center" style="background-color: #e9ecef;">
								<button class="btn-primary big-btn" onclick="Home();">Home</button>
								<button class="btn-primary big-btn" onclick="recoverysubmit(this);">Proceed</button>
								<button class="btn-primary big-btn" onclick="Back();">Back</button>
							</div>
						</div>

						<div id="tab4" class="tabcontent" style="display: none;">
							<div class="card-body">
								<div class="table-wrapper"
									style="max-height: 340px; overflow-y: auto; display: block; border: 1px solid #ccc;">
									<table class="table table-bordered table-hover table-sm"
										style="margin-bottom: 0px; font-size: initial; width: 100%; table-layout: fixed;">
										<thead class="thead-light"
											style="position: sticky; top: 0; background-color: #f8f9fa; z-index: 1;">
											<tr>
												<th style="width: 9%">SRL NO</th>
												<th style="width: 9%">FLOW ID</th>
												<th style="width: 12%">FLOW DATE</th>
												<th style="width: 12%">FLOW CODE</th>
												<th style="width: 12%; text-align: center;">FLOW AMOUNT</th>
												<th style="width: 23%">ACCOUNT NUMBER</th>
												<th style="width: 23%">ACCOUNT NAME</th>
											</tr>
										</thead>
										<tbody id="placelist4">

										</tbody>
									</table>
								</div>
							</div>
							<div class="card-footer text-center" style="background-color: #e9ecef;">
								<button class="btn-primary big-btn" onclick="Home();">Home</button>
								<button class="btn-primary big-btn" onclick="bookingsubmit(this);">Proceed</button>
								<button class="btn-primary big-btn" onclick="Back();">Back</button>
							</div>
						</div>

						<div id="tab5" class="tabcontent" style="display: none;">
							<div class="card-body">
								<div class="table-wrapper"
									style="max-height: 340px; overflow-y: auto; display: block; border: 1px solid #ccc;">
									<table class="table table-bordered table-hover table-sm"
										style="margin-bottom: 0px; font-size: initial; width: 100%; table-layout: fixed;">
										<thead class="thead-light"
											style="position: sticky; top: 0; background-color: #f8f9fa; z-index: 1;">
											<tr>
												<th style="width: 9%">SRL NO</th>
												<th style="width: 9%">FLOW ID</th>
												<th style="width: 12%">FLOW DATE</th>
												<th style="width: 12%">FLOW CODE</th>
												<th style="width: 12%; text-align: center;">FLOW AMOUNT</th>
												<th style="width: 23%">ACCOUNT NUMBER</th>
												<th style="width: 23%">ACCOUNT NAME</th>
											</tr>
										</thead>
										<tbody id="placelist5">

										</tbody>
									</table>
								</div>
							</div>
							<div class="card-footer text-center" style="background-color: #e9ecef;">
								<button class="btn-primary big-btn" onclick="Home();">Home</button>
								<button class="btn-primary big-btn" onclick="feessubmit(this);">Proceed</button>
								<button class="btn-primary big-btn" onclick="Back();">Back</button>
							</div>
						</div>

					</div>
				</div>
				<!-- ---------------------------------------------------------------------------------------------------------------- -->
				<div th:if="${formmode} =='addholiday'">
					<div class="card">
						<div class="card-header" style="background-color: #e9ecef; height: 50px">
							<div class="float-left">
								<h6 style="font-size: 1.2rem; color: black;">Holiday
									Master-Add</h6>
							</div>

						</div>

						<div class="card-body">
							<form class=" border border-secondary" action="#" method="post" id="" autocomplete="off"
								enctype="multipart/form-data">
								<div class="row formline" style="padding: 10px 0px 2px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">Organization</div>
									<div class="col-sm-2">
										<input type="text" name="" id="" readonly
											class="form-control form-control-sm bg-white border border-dark" />

									</div>
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Location</div>
									<div class="col-sm-2">
										<input type="text" name="" id="" readonly
											class="form-control form-control-sm bg-white border border-dark" />
									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 0px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Calendar Year</div>
									<div class="col-sm-2">
										<input type="text" name="" id="" readonly
											class="form-control form-control-sm bg-white border border-dark" />
									</div>
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Month</div>
									<div class="col-sm-2">
										<input type="text" name="" id="" readonly
											class="form-control form-control-sm bg-white border border-dark" />
									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 0px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Record No</div>
									<div class="col-sm-2">
										<input type="text" name="" id="" readonly
											class="form-control form-control-sm bg-white border border-dark" />
									</div>
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Date</div>
									<div class="col-sm-2">
										<input type="text" name="" id="" readonly
											class="form-control form-control-sm bg-white border border-dark" />
									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 0px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Description</div>
									<div class="col-sm-2">
										<input type="text" name="" id="" readonly
											class="form-control form-control-sm bg-white border border-dark" />

									</div>
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Remarks</div>
									<div class="col-sm-2">
										<input type="text" name="" id="" readonly
											class="form-control form-control-sm bg-white border border-dark" />

									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 0px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Holiday Flag</div>
									<div class="col-sm-2">
										<input type="text" name="" id="" readonly
											class="form-control form-control-sm bg-white border border-dark" />

									</div>
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Record Status</div>
									<div class="col-sm-2">

										<input type="text" name="" id="" readonly
											class="form-control form-control-sm bg-white border border-dark" />

									</div>
								</div>

							</form>

						</div>
						<div class="card-footer text-center " style="background-color: #e9ecef">


							<button class="btn-primary big-btn" onclick="Home();">Home</button>
							<button class="btn-primary big-btn" id="submitBtn" onclick="AddSubmit();">Submit</button>

							<button class="btn-primary big-btn" onclick="Back();">Back</button>

						</div>
					</div>
				</div>
				<div th:if="${formmode}=='UploadHoliday'">
					<form action="#" method="post" autocomplete="off" style="width: 100%">
						<div class="card">
							<div class="card-header" style="background-color: #BBC3CB;">
								<div class="float-right"></div>
								<h4>HOLIDAY MASTER - FILE UPLOAD</h4>
							</div>
							<div class="card-body p-0 mt-3">
								<div class="panel-heading text-center">



									<div class="form-group ">
										<div class="row">

											<div class="col-sm-3">
												<label class="">Upload</label>
											</div>
											<div class="col-sm-2">

												<input type="file" id="fileval" name="fileval" accept=".xlsx,.xls,.csv"
													class="form-control form-control-sm">

											</div>

											<div class="col-sm-2"></div>
										</div>
									</div>
									<div class="form-group "></div>

								</div>
							</div>
							<div class="card-footer text-center" style="background-color: #BBC3CB;">
								<button type="button" class="btn-primary big-btn" id="btnHome"
									onclick="home();">Home</button>

								<button type="button" class="btn-primary big-btn" id="nav"
									onclick="submitexcelgst(this)">Upload</button>

								<button type="button" class="btn-primary big-btn" id="btnBack"
									onclick="back();">Back</button>
							</div>
						</div>
					</form>
				</div>

				<div th:if="${formmode} =='ModifyHoliday'">
					<div class="card">
						<div class="card-header" style="background-color: #e9ecef; height: 50px">
							<div class="float-left">
								<h6 style="font-size: 1.2rem; color: black;">Holiday
									Master-Modify</h6>
							</div>

						</div>


						<div class="card-body">
							<form class=" border border-secondary" action="#" method="post" id="tab1modify"
								autocomplete="off">
								<div class="row formline" style="padding: 10px 0px 2px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">Organization</div>
									<div class="col-sm-2">
										<input type="text" name="" id="" readonly
											class="form-control form-control-sm bg-white border border-dark" />

									</div>
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Location</div>
									<div class="col-sm-2">
										<input type="text" name="" id="" readonly
											class="form-control form-control-sm bg-white border border-dark" />
									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 0px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Calendar Year</div>
									<div class="col-sm-2">
										<input type="text" name="" id="" readonly
											class="form-control form-control-sm bg-white border border-dark" />
									</div>
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Month</div>
									<div class="col-sm-2">
										<input type="text" name="" id="" readonly
											class="form-control form-control-sm bg-white border border-dark" />
									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 0px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Record No</div>
									<div class="col-sm-2">
										<input type="text" name="" id="" readonly
											class="form-control form-control-sm bg-white border border-dark" />
									</div>
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Date</div>
									<div class="col-sm-2">
										<input type="text" name="" id="" readonly
											class="form-control form-control-sm bg-white border border-dark" />
									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 0px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Description</div>
									<div class="col-sm-2">
										<input type="text" name="" id="" readonly
											class="form-control form-control-sm bg-white border border-dark" />

									</div>
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Remarks</div>
									<div class="col-sm-2">
										<input type="text" name="" id="" readonly
											class="form-control form-control-sm bg-white border border-dark" />

									</div>
								</div>
								<div class="row formline" style="padding: 0px 0px 2px 0px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Holiday Flag</div>
									<div class="col-sm-2">
										<input type="text" name="" id="" readonly
											class="form-control form-control-sm bg-white border border-dark" />

									</div>
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Record Status</div>
									<div class="col-sm-2">

										<input type="text" name="" id="" readonly
											class="form-control form-control-sm bg-white border border-dark" />

									</div>
								</div>
							</form>

						</div>
						<div class="card-footer text-center " style="background-color: #e9ecef">


							<button class="btn-primary big-btn" onclick="Home();">Home</button>
							<button class="btn-primary big-btn" id="submitBtn"
								onclick="ModifyTab1Submit();">Submit</button>

							<button class="btn-primary big-btn" onclick="Back();">Back</button>

						</div>


					</div>
				</div>


				<div th:if="${formmode}=='listholiday'">
					<div class="panel panel-primary filterable">
						<div class="card w-100 border panel panel-primary filterable">
							<div class="card-header" style="background-color: #e9ecef; height: 70px">
								<div class="float-left">
									<h6 style="font-size: 1.2rem; color: black;">Holiday
										Master-List</h6>
								</div>

							</div>

							<div class="card-body">
								<div class="table-responsive">
									<table class="table table-bordered  table-hover table-sm"
										style="margin-bottom: 0px; font-size: initial;" id="AssosiateTable">
										<thead class="thead-light">

											<tr>
												<th>SRL NO</th>
												<th>YEAR</th>
												<th>MONTH</th>
												<th>DATE</th>
												<th>DAY</th>
												<th>DESCRIPTION</th>
												<th>REMARKS</th>
											</tr>
										</thead>
										<tbody id="placelist">
											<tr th:each="chartacc : ${Listofvalues}">

												<td class="hover-underline" onclick="getdata(this)"
													style="color: #007bff;" th:attr="data-attr=${chartacc?.record_srl}"
													th:text="${chartacc?.record_srl}"></td>
												<td th:text="${chartacc?.cal_year}"></td>
												<td th:text="${chartacc?.cal_month}"></td>
												<td th:text="${#dates.format(chartacc?.record_date, 'dd-MM-yyyy')}">
												</td>
												<td th:text="${#dates.format(chartacc?.record_date, 'dd')}"></td>
												<td th:text="${chartacc?.holiday_desc}"></td>

												<td th:text="${chartacc?.holiday_remarks}"></td>



											</tr>
										</tbody>


									</table>
								</div>
							</div>

							<div class="card-footer text-center" style="background-color: #e9ecef">
								<button class="btn-primary big-btn" onclick="Home();">Home</button>
								<button class="btn-primary big-btn" id="submitBtn"
									onclick="getCheckedValues()">Submit</button>
								<button class="btn-primary big-btn" onclick="Back();">Back</button>
							</div>
						</div>
					</div>
				</div>


				<div th:if="${formmode}=='viewrecord'">
					<div class="card ">

						<div class="card-header" style="background-color: #e9ecef; height: 50px">
							<div class="float-left">
								<h6 style="font-size: 1.2rem; color: black;">Holiday
									Master-View</h6>
							</div>

						</div>
						<div class="card-body">
							<form class=" border border-secondary" action="#" method="post" id="tab1modify"
								autocomplete="off">
								<div class="row formline" style="padding: 10px 0px 2px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">Organization</div>
									<div class="col-sm-2">
										<input type="text" name="orgn" id="orgn" th:value="${singlerecord?.orgn}"
											class="form-control form-control-sm bg-white border border-dark" />

									</div>
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Location</div>
									<div class="col-sm-2">
										<input type="text" name="location" id="location"
											th:value="${singlerecord?.location}" readonly
											class="form-control form-control-sm bg-white border border-dark" />
									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 0px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Calendar Year</div>
									<div class="col-sm-2">
										<input type="text" name="cal_year" id="cal_year"
											th:value="${singlerecord?.cal_year}" readonly
											class="form-control form-control-sm bg-white border border-dark" />
									</div>
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Calender Month</div>
									<div class="col-sm-2">
										<input type="text" name="cal_month" id="cal_month"
											th:value="${singlerecord?.cal_month}" readonly
											class="form-control form-control-sm bg-white border border-dark" />
									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 0px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Record No</div>
									<div class="col-sm-2">
										<input type="text" name="record_srl" id="record_srl"
											th:value="${singlerecord?.record_srl}" readonly
											class="form-control form-control-sm bg-white border border-dark" />
									</div>
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Record Date</div>
									<div class="col-sm-2">
										<input type="text" name="record_date" id="record_date"
											th:value="${#dates.format(singlerecord?.record_date, 'dd-MM-yyyy')}"
											readonly class="form-control form-control-sm bg-white border border-dark" />

									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 0px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Holiday Description</div>
									<div class="col-sm-2">
										<input type="text" name="holiday_desc" id="holiday_desc"
											th:value="${singlerecord?.holiday_desc}" readonly
											class="form-control form-control-sm bg-white border border-dark" />

									</div>
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Holiday Remarks</div>
									<div class="col-sm-2">
										<input type="text" name="holiday_remarks" id="holiday_remarks"
											th:value="${singlerecord?.holiday_remarks}" readonly
											class="form-control form-control-sm bg-white border border-dark" />

									</div>
								</div>
								<div class="row formline" style="padding: 0px 0px 2px 0px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Holiday Flag</div>
									<div class="col-sm-2">
										<input type="text" name="holiday_flg" id="holiday_flg"
											th:value="${#strings.equals(singlerecord?.holiday_flg, 'Y') ? 'ACTIVE' : 'INACTIVE'}"
											readonly class="form-control form-control-sm bg-white border border-dark" />

									</div>
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Record Status</div>
									<div class="col-sm-2">

										<input type="text" name="record_status" id="record_status"
											th:value="${singlerecord?.record_status}" readonly
											class="form-control form-control-sm bg-white border border-dark" />

									</div>
								</div>
							</form>

						</div>
						<div class="card-footer text-center " style="background-color: #e9ecef">


							<button class="btn-primary big-btn" onclick="Home();">Home</button>

							<button class="btn-primary big-btn" onclick="Back();">Back</button>

						</div>

					</div>


				</div>
				<!-- ------------------------------------Organization Modify---------------------------------- -->
				<div th:if="${formmode}=='view'">
					<div class="card ">

						<div class="card-header" style="background-color: #e9ecef; height: 50px">
							<div class="float-left">
								<h6 style="font-size: 1.2rem; color: black;">BRANCH - VIEW</h6>
							</div>

						</div>

						<div class="card-body">
							<form class=" border border-secondary" action="#" method="post" id="" autocomplete="off">
								<div class="row formline" style="padding: 10px 0px 2px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">Branch Code</div>


									<div class="col-sm-2">
										<input type="text" name="branch_code" id="branch_code"
											th:value="${OrgBranch?.branch_code}" readonly
											class="form-control form-control-sm bg-white border border-dark" />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Branch Name</div>
									<div class="col-sm-2">
										<input type="text" name="branch_name" id="branch_name"
											th:value="${OrgBranch?.branch_name}" readonly
											class="form-control form-control-sm bg-white border border-dark" />
									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">Branch Head</div>


									<div class="col-sm-2">
										<input type="text" name="branch_head" id="branch_head"
											th:value="${OrgBranch?.branch_head}" readonly
											class="form-control form-control-sm bg-white border border-dark" />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Designation</div>
									<div class="col-sm-2">

										<input type="text" name="designation" id="designation"
											th:value="${OrgBranch?.designation}" readonly
											class="form-control form-control-sm bg-white border border-dark" />

									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">Swift Code</div>


									<div class="col-sm-2">
										<input type="text" name="swift_code" id="swift_code"
											th:value="${OrgBranch?.swift_code}" readonly
											class="form-control form-control-sm bg-white border border-dark" />
									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Pic No</div>
									<div class="col-sm-2">

										<input type="text" name="pic_no" id="pic_no" th:value="${OrgBranch?.pic_no}"
											readonly class="form-control form-control-sm bg-white border border-dark" />


									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">Land Line</div>


									<div class="col-sm-2">
										<input type="text" name="land_line" id="land_line"
											th:value="${OrgBranch?.land_line}" readonly
											class="form-control form-control-sm bg-white border border-dark" />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Fax</div>
									<div class="col-sm-2">

										<input type="text" name="fax" id="fax" th:value="${OrgBranch?.fax}" readonly
											class="form-control form-control-sm bg-white border border-dark" />

									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">Mobile</div>


									<div class="col-sm-2">
										<input type="number" name="mobile" id="mobile" th:value="${OrgBranch?.mobile}"
											readonly class="form-control form-control-sm bg-white border border-dark" />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Contact Person</div>
									<div class="col-sm-2">

										<input type="text" name="cont_person" id="cont_person"
											th:value="${OrgBranch?.cont_person}" readonly
											class="form-control form-control-sm bg-white border border-dark" />

									</div>
								</div>
								<div class="row formline" style="padding: 0px 0px 2px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">Web Site</div>


									<div class="col-sm-2">
										<input type="text" name="website" id="website" th:value="${OrgBranch?.website}"
											readonly class="form-control form-control-sm bg-white border border-dark" />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Mail Id</div>
									<div class="col-sm-2">

										<input type="text" name="mail_id" id="mail_id" th:value="${OrgBranch?.mail_id}"
											readonly class="form-control form-control-sm bg-white border border-dark" />

									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">Address 1</div>


									<div class="col-sm-2">
										<input type="text" name="add_1" id="add_1" th:value="${OrgBranch?.add_1}"
											readonly class="form-control form-control-sm bg-white border border-dark" />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Address 2</div>
									<div class="col-sm-2">
										<input type="text" name="add_2" id="add_2" th:value="${OrgBranch?.add_2}"
											readonly class="form-control form-control-sm bg-white border border-dark" />


									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">City</div>


									<div class="col-sm-2">
										<input type="text" name="city" id="city" th:value="${OrgBranch?.city}" readonly
											class="form-control form-control-sm bg-white border border-dark" />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">State</div>
									<div class="col-sm-2">
										<input type="text" name="state" id="state" th:value="${OrgBranch?.state}"
											readonly class="form-control form-control-sm bg-white border border-dark" />
									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 10px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">Country</div>


									<div class="col-sm-2">
										<input type="text" name="country" id="country" th:value="${OrgBranch?.country}"
											readonly class="form-control form-control-sm bg-white border border-dark" />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Zip Code</div>
									<div class="col-sm-2">
										<input type="text" name="zip_code" id="zip_code"
											th:value="${OrgBranch?.zip_code}" readonly
											class="form-control form-control-sm bg-white border border-dark" />
									</div>
								</div>


							</form>

						</div>
						<div class="card-footer text-center " style="background-color: #e9ecef">


							<button class="btn-primary big-btn" onclick="Home();">Home</button>

							<button class="btn-primary big-btn" onclick="Back();">Back</button>

						</div>

					</div>


				</div>
				<div th:if="${formmode}=='DeleteBranch'">
					<div class="card ">

						<div class="card-header" style="background-color: #e9ecef; height: 50px">
							<div class="float-left">
								<h6 style="font-size: 1.2rem; color: black;">BRANCH -
									DELETE</h6>
							</div>

						</div>

						<div class="card-body">
							<form class=" border border-secondary" action="#" method="post" id="tab2Del"
								autocomplete="off">
								<div class="row formline" style="padding: 10px 0px 2px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">Branch Code</div>


									<div class="col-sm-2">
										<input type="text" name="branch_code" id="branch_code"
											th:value="${OrgBranch?.branch_code}" readonly
											class="form-control form-control-sm bg-white border border-dark" />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Branch Name</div>
									<div class="col-sm-2">
										<input type="text" name="branch_name" id="branch_name"
											th:value="${OrgBranch?.branch_name}" readonly
											class="form-control form-control-sm bg-white border border-dark" />
									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">Branch Head</div>


									<div class="col-sm-2">
										<input type="text" name="branch_head" id="branch_head"
											th:value="${OrgBranch?.branch_head}" readonly
											class="form-control form-control-sm bg-white border border-dark" />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Designation</div>
									<div class="col-sm-2">

										<input type="text" name="designation" id="designation"
											th:value="${OrgBranch?.designation}" readonly
											class="form-control form-control-sm bg-white border border-dark" />

									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">Swift Code</div>


									<div class="col-sm-2">
										<input type="text" name="swift_code" id="swift_code"
											th:value="${OrgBranch?.swift_code}" readonly
											class="form-control form-control-sm bg-white border border-dark" />
									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Pic No</div>
									<div class="col-sm-2">

										<input type="text" name="pic_no" id="pic_no" th:value="${OrgBranch?.pic_no}"
											readonly class="form-control form-control-sm bg-white border border-dark" />


									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">Land Line</div>


									<div class="col-sm-2">
										<input type="text" name="land_line" id="land_line"
											th:value="${OrgBranch?.land_line}" readonly
											class="form-control form-control-sm bg-white border border-dark" />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Fax</div>
									<div class="col-sm-2">

										<input type="text" name="fax" id="fax" th:value="${OrgBranch?.fax}" readonly
											class="form-control form-control-sm bg-white border border-dark" />

									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">Mobile</div>


									<div class="col-sm-2">
										<input type="number" name="mobile" id="mobile" th:value="${OrgBranch?.mobile}"
											readonly class="form-control form-control-sm bg-white border border-dark" />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Contact Person</div>
									<div class="col-sm-2">

										<input type="text" name="cont_person" id="cont_person"
											th:value="${OrgBranch?.cont_person}" readonly
											class="form-control form-control-sm bg-white border border-dark" />

									</div>
								</div>
								<div class="row formline" style="padding: 0px 0px 2px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">Web Site</div>


									<div class="col-sm-2">
										<input type="text" name="website" id="website" th:value="${OrgBranch?.website}"
											readonly class="form-control form-control-sm bg-white border border-dark" />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Mail Id</div>
									<div class="col-sm-2">

										<input type="text" name="mail_id" id="mail_id" th:value="${OrgBranch?.mail_id}"
											readonly class="form-control form-control-sm bg-white border border-dark" />

									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">Address 1</div>


									<div class="col-sm-2">
										<input type="text" name="add_1" id="add_1" th:value="${OrgBranch?.add_1}"
											readonly class="form-control form-control-sm bg-white border border-dark" />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Address 2</div>
									<div class="col-sm-2">
										<input type="text" name="add_2" id="add_2" th:value="${OrgBranch?.add_2}"
											readonly class="form-control form-control-sm bg-white border border-dark" />


									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">City</div>


									<div class="col-sm-2">
										<input type="text" name="city" id="city" th:value="${OrgBranch?.city}" readonly
											class="form-control form-control-sm bg-white border border-dark" />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">State</div>
									<div class="col-sm-2">
										<input type="text" name="state" id="state" th:value="${OrgBranch?.state}"
											readonly class="form-control form-control-sm bg-white border border-dark" />
									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 10px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">Country</div>


									<div class="col-sm-2">
										<input type="text" name="country" id="country" th:value="${OrgBranch?.country}"
											readonly class="form-control form-control-sm bg-white border border-dark" />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Zip Code</div>
									<div class="col-sm-2">
										<input type="text" name="zip_code" id="zip_code"
											th:value="${OrgBranch?.zip_code}" readonly
											class="form-control form-control-sm bg-white border border-dark" />
									</div>
								</div>


							</form>

						</div>
						<div class="card-footer text-center " style="background-color: #e9ecef">


							<button class="btn-primary big-btn" onclick="Home();">Home</button>
							<button class="btn-primary big-btn" onclick="del_bran();">Submit</button>
							<button class="btn-primary big-btn" onclick="Back();">Back</button>

						</div>

					</div>


				</div>
				<div th:if="${formmode}=='modify'">
					<div class="card ">

						<div class="card-header" style="background-color: #e9ecef; height: 50px">
							<div class="float-left">
								<h6 style="font-size: 1.2rem; color: black;">BRANCH -
									MODIFY</h6>
							</div>

						</div>


						<div class="card-body">
							<form class=" border border-secondary" action="#" method="post" id="tab2modify"
								autocomplete="off">
								<div class="row formline" style="padding: 10px 0px 2px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">Branch Code</div>


									<div class="col-sm-2">
										<input type="text" name="branch_code" id="branch_code"
											th:value="${OrgBranch?.branch_code}"
											class="form-control form-control-sm bg-white border border-dark" />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Branch Name</div>
									<div class="col-sm-2">
										<input type="text" name="branch_name" id="branch_name"
											th:value="${OrgBranch?.branch_name}"
											class="form-control form-control-sm bg-white border border-dark" readonly />
									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">Branch Head</div>


									<div class="col-sm-2">
										<input type="text" name="branch_head" id="branch_head"
											th:value="${OrgBranch?.branch_head}"
											class="form-control form-control-sm bg-white border border-dark" />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Designation</div>
									<div class="col-sm-2">

										<input type="text" name="designation" id="designation"
											th:value="${OrgBranch?.designation}"
											class="form-control form-control-sm bg-white border border-dark" />

									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">Swift Code</div>


									<div class="col-sm-2">
										<input type="text" name="swift_code" id="swift_code"
											th:value="${OrgBranch?.swift_code}"
											class="form-control form-control-sm bg-white border border-dark" />
									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Pic No</div>
									<div class="col-sm-2">

										<input type="text" name="pic_no" id="pic_no" th:value="${OrgBranch?.pic_no}"
											class="form-control form-control-sm bg-white border border-dark" />


									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">Land Line</div>


									<div class="col-sm-2">
										<input type="text" name="land_line" id="land_line"
											th:value="${OrgBranch?.land_line}"
											class="form-control form-control-sm bg-white border border-dark" />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Fax</div>
									<div class="col-sm-2">

										<input type="text" name="fax" id="fax" th:value="${OrgBranch?.fax}"
											class="form-control form-control-sm bg-white border border-dark" />

									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">Mobile</div>


									<div class="col-sm-2">
										<input type="number" name="mobile" id="mobile" th:value="${OrgBranch?.mobile}"
											class="form-control form-control-sm bg-white border border-dark" />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Contact Person</div>
									<div class="col-sm-2">

										<input type="text" name="cont_person" id="cont_person"
											th:value="${OrgBranch?.cont_person}"
											class="form-control form-control-sm bg-white border border-dark" />

									</div>
								</div>
								<div class="row formline" style="padding: 0px 0px 2px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">Web Site</div>


									<div class="col-sm-2">
										<input type="text" name="website" id="website" th:value="${OrgBranch?.website}"
											class="form-control form-control-sm bg-white border border-dark" />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Mail Id</div>
									<div class="col-sm-2">

										<input type="text" name="mail_id" id="mail_id" th:value="${OrgBranch?.mail_id}"
											class="form-control form-control-sm bg-white border border-dark" />

									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">Address 1</div>


									<div class="col-sm-2">
										<input type="text" name="add_1" id="add_1" th:value="${OrgBranch?.add_1}"
											class="form-control form-control-sm bg-white border border-dark" />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Address 2</div>
									<div class="col-sm-2">
										<input type="text" name="add_2" id="add_2" th:value="${OrgBranch?.add_2}"
											class="form-control form-control-sm bg-white border border-dark" />


									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">City</div>


									<div class="col-sm-2">
										<input type="text" name="city" id="city" th:value="${OrgBranch?.city}"
											class="form-control form-control-sm bg-white border border-dark" />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">State</div>
									<div class="col-sm-2">
										<input type="text" name="state" id="state" th:value="${OrgBranch?.state}"
											class="form-control form-control-sm bg-white border border-dark" />
									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 10px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">Country</div>


									<div class="col-sm-2">
										<input type="text" name="country" id="country" th:value="${OrgBranch?.country}"
											class="form-control form-control-sm bg-white border border-dark" />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Zip Code</div>
									<div class="col-sm-2">
										<input type="text" name="zip_code" id="zip_code"
											th:value="${OrgBranch?.zip_code}"
											class="form-control form-control-sm bg-white border border-dark" />
									</div>
								</div>


							</form>

						</div>
						<div class="card-footer text-center " style="background-color: #e9ecef">


							<button class="btn-primary big-btn" onclick="Home();">Home</button>
							<button class="btn-primary big-btn" id="submitBtn"
								onclick="ModifyTab2Submit();">Submit</button>

							<button class="btn-primary big-btn" onclick="Back();">Back</button>

						</div>

					</div>


				</div>

				<div th:if="${formmode} =='ModifyHead'">
					<div class="card">
						<div class="card-header" style="background-color: #e9ecef; height: 50px">
							<div class="float-left">
								<h6 style="font-size: 1.2rem; color: black;">HEAD OFFICE -
									MODIFY</h6>
							</div>

						</div>


						<div class="card-body">
							<form class=" border border-secondary" action="#" method="post" id="tab1modify"
								autocomplete="off">
								<div class="row formline" style="padding: 10px 0px 2px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">Organization Name</div>


									<div class="col-sm-2">
										<input type="text" name="org_name" id="org_name"
											th:value="${organization?.org_name}"
											class="form-control form-control-sm bg-white border border-dark" readonly />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Organization Type</div>
									<div class="col-sm-2">
										<input type="text" name="org_type" id="org_type"
											th:value="${organization?.org_type}"
											class="form-control form-control-sm bg-white border border-dark" />
									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">Date of Registration</div>


									<div class="col-sm-2">
										<input type="text" name="date_of_regn" id="date_of_regn"
											th:value="${#dates.format(organization?.date_of_regn, 'dd-MM-yyyy')}"
											class="form-control form-control-sm bg-white border border-dark" />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Certificate and Registration</div>
									<div class="col-sm-2">

										<input type="text" name="reg_no" id="reg_no" th:value="${organization?.reg_no}"
											class="form-control form-control-sm bg-white border border-dark" />

									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">Business Registration Card</div>


									<div class="col-sm-2">
										<input type="text" name="pan_card" id="pan_card"
											th:value="${organization?.pan_card}" maxlength="10"
											oninput="validatePanCard(this)"
											class="form-control form-control-sm bg-white border border-dark" />
									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">VAT Reference</div>
									<div class="col-sm-2">

										<input type="text" name="tan_card" id="tan_card"
											th:value="${organization?.tan_card}"
											class="form-control form-control-sm bg-white border border-dark" />


									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">No of Employees</div>
									<div class="col-sm-2">
										<input type="text" name="no_of_emp" id="no_of_emp"
											th:value="${organization?.no_of_emp}" oninput="validateNumericInput(this)"
											class="form-control form-control-sm bg-white border border-dark" />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">As On</div>
									<div class="col-sm-2">

										<input type="date" name="as_on" id="as_on"
											th:value="${#dates.format(organization?.as_on, 'yyyy-MM-dd')}"
											class="form-control form-control-sm bg-white border border-dark" />


									</div>
								</div>
								<div class="row formline" style="padding: 0px 0px 2px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">Registered Office Address 1</div>


									<div class="col-sm-2">
										<input type="text" name="reg_addr_1" id="reg_addr_1"
											th:value="${organization?.reg_addr_1}" oninput="validateAddress(this)"
											class="form-control form-control-sm bg-white border border-dark" />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Registered Office Address 2</div>
									<div class="col-sm-2">

										<input type="text" name="reg_addr_2" id="reg_addr_2"
											th:value="${organization?.reg_addr_2}" oninput="validateAddress(this)"
											class="form-control form-control-sm bg-white border border-dark" />

									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">Corporate Office Address 1</div>


									<div class="col-sm-2">
										<input type="text" name="corp_addr_1" id="corp_addr_1"
											th:value="${organization?.corp_addr_1}" oninput="validateAddress(this)"
											class="form-control form-control-sm bg-white border border-dark" />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Corporate Office Address 2</div>
									<div class="col-sm-2">
										<input type="text" name="cor_addr_2" id="cor_addr_2"
											th:value="${organization?.cor_addr_2}" oninput="validateAddress(this)"
											class="form-control form-control-sm bg-white border border-dark" />


									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 10px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">WebSite</div>


									<div class="col-sm-2">
										<input type="text" name="web_site" id="web_site"
											th:value="${organization?.web_site}"
											class="form-control form-control-sm bg-white border border-dark" />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Email</div>
									<div class="col-sm-2">
										<input type="text" name="email" id="email" th:value="${organization?.email}"
											class="form-control form-control-sm bg-white border border-dark" />
									</div>
								</div>




							</form>

						</div>
						<div class="card-footer text-center " style="background-color: #e9ecef">


							<button class="btn-primary big-btn" onclick="Home();">Home</button>
							<button class="btn-primary big-btn" id="submitBtn"
								onclick="ModifyTab1Submit();">Submit</button>

							<button class="btn-primary big-btn" onclick="Back();">Back</button>

						</div>


					</div>
				</div>

				<div th:if="${formmode} =='AddBranch'">
					<div class="card">
						<div class="card-header" style="background-color: #e9ecef; height: 50px">
							<div class="float-left">
								<h6 style="font-size: 1.2rem; color: black;">BRANCH - ADD</h6>
							</div>

						</div>

						<div class="card-body">
							<form class=" border border-secondary" action="#" method="post"
								enctype="multipart/form-data" id="assosiateForm1" autocomplete="off">
								<div class="row formline" style="padding: 10px 0px 2px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">
										Branch Code <span class="text-danger">*</span>
									</div>


									<div class="col-sm-2">
										<input type="text" name="branch_code" id="branch_code"
											class="form-control form-control-sm bg-white border border-dark" />


									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">
										Branch Name <span class="text-danger">*</span>
									</div>
									<div class="col-sm-2">
										<input type="text" name="branch_name" id="branch_name"
											class="form-control form-control-sm bg-white border border-dark" />
									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">
										Branch Head <span class="text-danger">*</span>
									</div>


									<div class="col-sm-2">
										<input type="text" name="branch_head" id="branch_head"
											class="form-control form-control-sm bg-white border border-dark" />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">
										Designation <span class="text-danger">*</span>
									</div>
									<div class="col-sm-2">

										<input type="text" name="designation" id="designation"
											class="form-control form-control-sm bg-white border border-dark" />

									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">
										Swift Code <span class="text-danger">*</span>
									</div>


									<div class="col-sm-2">
										<input type="text" name="swift_code" id="swift_code"
											class="form-control form-control-sm bg-white border border-dark" />
									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">
										Pic No <span class="text-danger">*</span>
									</div>
									<div class="col-sm-2 d-flex align-items-center">

										<input type="file" name="photo" id="photo"
											class="form-control form-control-sm bg-white border border-dark" />

									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">
										Land Line <span class="text-danger">*</span>
									</div>


									<div class="col-sm-2">
										<input type="text" name="land_line" id="land_line"
											class="form-control form-control-sm bg-white border border-dark" />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">
										Fax <span class="text-danger">*</span>
									</div>
									<div class="col-sm-2">

										<input type="text" name="fax" id="fax"
											class="form-control form-control-sm bg-white border border-dark" />

									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">
										Mobile <span class="text-danger">*</span>
									</div>


									<div class="col-sm-2">
										<input type="number" name="mobile" id="mobile"
											class="form-control form-control-sm bg-white border border-dark" />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">
										Contact Person <span class="text-danger">*</span>
									</div>
									<div class="col-sm-2">

										<input type="text" name="cont_person" id="cont_person"
											class="form-control form-control-sm bg-white border border-dark" />

									</div>
								</div>
								<div class="row formline" style="padding: 0px 0px 2px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">Web Site</div>


									<div class="col-sm-2">
										<input type="text" name="website" id="website"
											class="form-control form-control-sm bg-white border border-dark" />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Mail Id</div>
									<div class="col-sm-2">

										<input type="text" name="mail_id" id="mail_id"
											class="form-control form-control-sm bg-white border border-dark" />

									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">Address 1</div>


									<div class="col-sm-2">
										<input type="text" name="add_1" id="add_1"
											class="form-control form-control-sm bg-white border border-dark" />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Address 2</div>
									<div class="col-sm-2">
										<input type="text" name="add_2" id="add_2"
											class="form-control form-control-sm bg-white border border-dark" />


									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">City</div>


									<div class="col-sm-2">
										<input type="text" name="city" id="city"
											class="form-control form-control-sm bg-white border border-dark" />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">State</div>
									<div class="col-sm-2">
										<input type="text" name="state" id="state"
											class="form-control form-control-sm bg-white border border-dark" />
									</div>
								</div>

								<div class="row formline" style="padding: 0px 0px 10px 0px;">


									<div class="col-sm-1"></div>
									<div class="col-sm-2">Country</div>


									<div class="col-sm-2">
										<input type="text" name="country" id="country"
											class="form-control form-control-sm bg-white border border-dark" />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Zip Code</div>
									<div class="col-sm-2">
										<input type="text" name="zip_code" id="zip_code"
											class="form-control form-control-sm bg-white border border-dark" />
									</div>
								</div>

							</form>

						</div>
						<div class="card-footer text-center " style="background-color: #e9ecef">


							<button class="btn-primary big-btn" onclick="Home();">Home</button>
							<button class="btn-primary big-btn" id="submitBtn" onclick="AddSubmit();">Submit</button>

							<button class="btn-primary big-btn" onclick="Back();">Back</button>

						</div>
					</div>
				</div>




			</div>



		</div>
	</div>


	<div class="modal fade" data-backdrop="false" data-keyboard="false" id="alert" tabindex="-1" role="dialog"
		aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
			<div class="modal-content">

				<div class="modal-body" style="text-align: center;">
					<h6 id="alertmsg"></h6>
					<button type="button" class="btn-primary big-btn" onclick="add()">Close</button>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" data-backdrop="false" data-keyboard="false" id="alert1" tabindex="-1" role="dialog"
		aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
			<div class="modal-content">

				<div class="modal-body" style="text-align: center;">
					<h6 id="alertmsg1"></h6>
					<button type="button" class="btn-primary big-btn"
						onclick="$('#alert1').modal('hide')">Close</button>
				</div>
			</div>
		</div>
	</div>

	<!-- Modal structure -->
	<div class="modal fade" data-backdrop="false" data-keyboard="false" tabindex="-1" role="dialog" aria-hidden="true"
		id="alert121">
		<form action="#" th:object="${reportform}" method="post" enctype="multipart/form-data" id="reportform2">
			<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable" role="document"
				style="max-width: 600px; height: auto;">
				<div class="modal-content" style="width: 100%; height: 100%;">
					<!-- Modal Header -->
					<div class="modal-header" style="justify-content: center; width: 100%; padding: 10px;">
						<h5 class="modal-title" id="popupAlert" style="font-size: 18px;">
							TRNSACTION DATA - UPLOAD</h5>
					</div>

					<!-- Modal Body -->
					<div class="modal-body d-flex flex-row align-items-center justify-content-center"
						style="text-align: center; flex-grow: 1; min-height: 100px; padding: 10px;">
						<h6 id="alertmsg121" class="text-center text-primary"></h6>
					</div>

					<!-- Modal Footer -->
					<div class="modal-footer d-flex justify-content-center" style="width: 100%; padding: 10px;">
						<button type="button" class="btn-primary big-btn"
							onclick="$('#alert121').modal('hide'); location.reload();">
							Close
						</button>
					</div>
				</div>
			</div>
		</form>
	</div>

	<div class="modal fade" data-backdrop="false" data-keyboard="false" id="alert1211" tabindex="-1" role="dialog"
		aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
			<div class="modal-content">
				<div class="modal-body" style="text-align: center;">
					<h6 id="alertmsg1211"></h6>
					<button type="button" class="btn-primary big-btn"
						onclick="$('#alert121').modal('hide')">Close</button>
				</div>
			</div>
		</div>
	</div>

	<script>
		document.addEventListener("DOMContentLoaded", function () {
			// Get the input field
			var dateInput = document.getElementById('as_on');

			if (dateInput) {
				var today = new Date().toISOString().split('T')[0];
				dateInput.setAttribute('max', today);


			}
		});

		$('#alert121').on('hidden.bs.modal', function () {
			location.reload();
		});

	</script>

	<!-- success pop up -->
	<div class="modal fade" id="SuccesPopUp" style="background: #000000b0;margin-bottom:10px;" role="dialog"
		aria-labelledby="deleteModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable" role="document">
			<div class="modal-content" style="min-height:274px;">
				<!-- Modal Body -->
				<div class="modal-body">
					<h5 id="Successmsgpopup" style="font-size: 17px; color: black; padding: 15px;"></h5>
				</div>
				<!-- Modal Footer -->
				<div style="padding: 10px; text-align: center;">
					<button type="button" class="btn btn-outline-dark me-3" style="font-size: 16px;"
						onclick="$('#SuccesPopUp').modal('hide')">Cancel</button>
				</div>

			</div>
		</div>
	</div>
</body>

</html>