<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="/ASPIRA/js/jquery.min.js"></script>
    <script src="/ASPIRA/js/jquery-ui.min.js"></script>
    <style>
        .btn {
            line-height: 0.5rem;
        }

        .table-bordered td,
        .table-bordered th {
            font-size: smaller;
        }

        .filterable .filters input[disabled]::-webkit-input-placeholder {
            color: #333;
        }

        .filterable .filters input[disabled]::-moz-placeholder {
            color: #333;
        }

        .filterable .filters input[disabled]:-ms-input-placeholder {
            color: #333;
        }

        .filterable .filters input[disabled] {
            background-color: transparent;
            border: none;
            cursor: auto;
            box-shadow: none;
            padding: 0;
            height: auto;
        }

        .container-manager {
            width: 83.5%;
            padding-right: 15px;
            padding-left: 15px;
            margin-right: auto;
            margin-left: 17.3%;
            margin-top: 80px;
            margin-top: 80px;
        }

        .table .thead-light th {
            color: #495057;
            background-color: #e9ecef;
            border-color: #dee2e6;
            width: 23px;
        }
    </style>
    <style>
        .modal {
            display: none;
            /* Hidden by default */
            position: absolute;
            /* Stay in place */
            z-index: 1;
            /* Location of the box */
            left: 0;
            top: 0;
            width: 100%;
            /* Full width */
            height: 100%;
            /* Full height */
            overflow: auto;
            /* Enable scroll if needed */
            background-color: rgb(0, 0, 0);
            /* Fallback color */
            background-color: rgba(0, 0, 0, 0.4);
            /* Black w/ opacity */
        }

        /* Modal Content */
        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 20px;
            border: 1px solid #888;
            width: 100%;
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
            -webkit-animation-name: animatetop;
            -webkit-animation-duration: 0.4s;
            animation-name: animatetop;
            animation-duration: 0.4s
        }

        .modal-pass {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 40%;
            height: 25%;
            margin-left: 400PX;
            margin-right: auto;
            border-radius: 10px;
            box-shadow: 0px 0px 20px rgba(0, 0, 0, 0.2);
            /* Adding shadow for depth */
            font-family: Arial, sans-serif;
            /* Using a more common font */
        }

        .close {
            color: red;
            font-size: 28px;
            font-weight: bold;
        }
    </style>
    <style>
        .password-info {
            visibility: hidden;
            width: 320px;
            background-color: #333;
            color: #fff;
            text-align: left;
            border-radius: 10px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            top: calc(100% + 10px);
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
        }

        input:hover+.password-info {
            visibility: visible;
            opacity: 0.8;
        }

        .tablinks.active {
            background-color: #007bff;
            color: #fff;
        }

        .big-btn {
            font-size: 16px;
        }
    </style>


    <script>
        function Home() {

            location.href = 'Dashboard';
        }

        function Back() {
            window.history.back();
        }

        /* function for the table scroll */
        function adjustHeight() {
            const cardBody = document.getElementById("cardBody");
            const viewportHeight = window.innerHeight;
            cardBody.style.maxHeight = `${viewportHeight * 0.95}px`; // Adjust 80% of the viewport height
        }

        window.addEventListener("resize", adjustHeight);
        document.addEventListener("DOMContentLoaded", adjustHeight);

        function goBack() { // Use this to go to the previous page in browser
            history.back();
        }

    </script>


    <script>
        //Filter Table mela
        $(document)
            .ready(
                function () {
                    $('.filterable .btn-filter')
                        .click(
                            function () {
                                var $panel = $(this).parents(
                                    '.filterable'), $filters = $panel
                                        .find('.filters input'), $tbody = $panel
                                            .find('.table tbody');
                                if ($filters.prop('disabled') == true) {
                                    $filters
                                        .prop('disabled', false);
                                    $filters.first().focus();
                                } else {
                                    $filters.val('').prop(
                                        'disabled', true);
                                    $tbody.find('.no-result')
                                        .remove();
                                    $tbody.find('tr').show();
                                }
                            });

                    $('.filterable .filters input')
                        .keyup(
                            function (e) {
                                /* Ignore tab key */
                                var code = e.keyCode || e.which;
                                if (code == '9')
                                    return;
                                /* Useful DOM data and selectors */
                                var $input = $(this), inputContent = $input
                                    .val().toLowerCase(), $panel = $input
                                        .parents('.filterable'), column = $panel
                                            .find('.filters th')
                                            .index($input.parents('th')), $table = $panel
                                                .find('.table'), $rows = $table
                                                    .find('tbody tr');
                                /* Dirtiest filter function ever ;) */
                                var $filteredRows = $rows
                                    .filter(function () {
                                        var value = $(this)
                                            .find('td').eq(
                                                column)
                                            .text()
                                            .toLowerCase();
                                        return value
                                            .indexOf(inputContent) === -1;
                                    });
                                /* Clean previous no-result if exist */
                                $table.find('tbody .no-result')
                                    .remove();
                                /* Show all rows, hide filtered ones (never do that outside of a demo ! xD) */
                                $rows.show();
                                $filteredRows.hide();
                                /* Prepend no-result row if all rows are filtered */
                                if ($filteredRows.length === $rows.length) {
                                    $table
                                        .find('tbody')
                                        .prepend(
                                            $('<tr class="no-result text-center"><td colspan="'
                                                + $table
                                                    .find('.filters th').length
                                                + '">No result found</td></tr>'));
                                }
                            });
                });
    </script>

    <script>
        function rowClick(refId) {
            // Example: navigate to URL with refId
            window.location.href = 'TransactionsAccounts?formmode=view&id=' + refId;
        }

        function Add() {
            // Example: navigate to URL with refId
            window.location.href = 'TransactionsAccounts?formmode=add';
        }

         function redirectToEdit(element) {
            var refId = element.getAttribute("data-refid");
            window.location.href = 'TransactionsAccounts?formmode=modify&id=' + refId;
        }
        
        function redirectToDelete(element) {
            var refId = element.getAttribute("data-refid");
            window.location.href = 'TransactionsAccounts?formmode=delete&id=' + refId;
        }

        function redirectToVerify(element) {
            var refId = element.getAttribute("data-refid");
            window.location.href = 'TransactionsAccounts?formmode=verify&id=' + refId;
        }

        function Verify(element) {
            var paramId = element.getAttribute("data-refid");

            $.ajax({
                url: './TransactionsAccounts/verify',   // exact mapping
                type: 'POST',
                data: { id: paramId },      // must match entity field
                success: function(response) {
                    $("#alertmsg").text(response || "Record verified successfully");
                    $('#alert').modal('show');

                    $("#alertOkBtn").off("click").on("click", function() {
                        $('#alert').modal('hide'); 
                        window.location.href = './TransactionsAccounts';
                    });
                },
                error: function(xhr, status, error) {
                    $("#alertmsg").text("Error while deleting: " + error);
                    $('#alert').modal('show');
                }
            });
        }


        function Delete(element) {
            var paramId = element.getAttribute("data-refid");

            $.ajax({
                url: './TransactionsAccounts/delete',   // exact mapping
                type: 'POST',
                data: { id: paramId },      // must match entity field
                success: function(response) {
                    $("#alertmsg").text(response || "Record verified successfully");
                    $('#alert').modal('show');

                    $("#alertOkBtn").off("click").on("click", function() {
                        $('#alert').modal('hide'); 
                        window.location.href = './TransactionsAccounts';
                    });
                },
                error: function(xhr, status, error) {
                    $("#alertmsg").text("Error while deleting: " + error);
                    $('#alert').modal('show');
                }
            });
        }


        function Submit() {
    const formData = {};
    $("#transactionAddForm").serializeArray().forEach(function (field) {
        formData[field.name] = field.value;
    });

    // Validation
    if (!formData.productKey || formData.productKey.trim() === "") {
        alert("Please fill in the Product Key.");
        return;
    }

    // Ensure it's an Add request
    formData.id = null;

    $.ajax({
        url: './TransactionsAccounts/save',
        type: 'POST',
        contentType: 'application/json',
        data: JSON.stringify(formData),
        success: function (data) {
            $("#alertmsg").text(data);
            $('#alert').modal('show');
            $("#alertOkBtn").off("click").on("click", function () {
                $('#alert').modal('hide');
                window.location.href = './TransactionsAccounts';
            });
        },
        error: function (xhr, status, error) {
            $("#alertmsg").text("Error while saving: " + error);
            $('#alert').modal('show');
        }
    });
}


function Update() {
    const formData = {};
    $("#transactionViewForm").serializeArray().forEach(function (field) {
        formData[field.name] = field.value;
    });

    // Ensure we have an ID
    if (!formData.id || formData.id.trim() === "") {
        alert("No record selected for update.");
        return;
    }

    // Validation
    if (!formData.productKey || formData.productKey.trim() === "") {
        alert("Please fill in the Product Key.");
        return;
    }

    $.ajax({
        url: './TransactionsAccounts/save',
        type: 'POST',
        contentType: 'application/json',
        data: JSON.stringify(formData),
        success: function (data) {
            $("#alertmsg").text(data);
            $('#alert').modal('show');
            $("#alertOkBtn").off("click").on("click", function () {
                $('#alert').modal('hide');
                window.location.href = './TransactionsAccounts';
            });
        },
        error: function (xhr, status, error) {
            $("#alertmsg").text("Error while updating: " + error);
            $('#alert').modal('show');
        }
    });
}


    </script>

    <script>
        		
function RefCode(a) {
	event.preventDefault();
	var ref = document.getElementById("RefButton");
	ref.classList.add("active");

	var gl = document.getElementById("GLButton");
	gl.classList.remove("active");

	 var scheme = document.getElementById("param");
	scheme.classList.remove("active"); 

	var chart = document.getElementById("chartOfAccounts");
	chart.classList.remove("active");

	var act = document.getElementById("accountLedger");
	act.classList.remove("active");

	location.href = './refCodeMain?formmode=list';
}

function GLStruct(a) {
	event.preventDefault();
	var ref = document.getElementById("RefButton");
	ref.classList.remove("active");

	var gl = document.getElementById("GLButton");
	gl.classList.add("active");

	 var scheme = document.getElementById("param");
	scheme.classList.remove("active"); 

	var chart = document.getElementById("chartOfAccounts");
	chart.classList.remove("active");

	var act = document.getElementById("accountLedger");
	act.classList.remove("active");

	location.href = './glcode';
}

function SchemeCode(a) {
	event.preventDefault();
	var ref = document.getElementById("RefButton");
	ref.classList.remove("active");

	var gl = document.getElementById("GLButton");
	gl.classList.remove("active");

	var scheme = document.getElementById("param");
	scheme.classList.add("active"); 

	var chart = document.getElementById("chartOfAccounts");
	chart.classList.remove("active");

	var act = document.getElementById("accountLedger");
	act.classList.remove("active");

	location.href = './Parameter';
}

function Chart(a) {
	event.preventDefault();
	var ref = document.getElementById("RefButton");
	ref.classList.remove("active");

	var gl = document.getElementById("GLButton");
	gl.classList.remove("active");

	var scheme = document.getElementById("param");
	scheme.classList.remove("active");

	var chart = document.getElementById("chartOfAccounts");
	chart.classList.add("active");

	var act = document.getElementById("accountLedger");
	act.classList.remove("active");

	location.href = './chartOfAccounts';
}

function Account(a) {
	event.preventDefault();
	var ref = document.getElementById("RefButton");
	ref.classList.remove("active");

	var gl = document.getElementById("GLButton");
	gl.classList.remove("active");

	var scheme = document.getElementById("param");
	scheme.classList.remove("active");

	var chart = document.getElementById("chartOfAccounts");
	chart.classList.remove("active");

	var act = document.getElementById("accountLedger");
	act.classList.add("active");

	location.href = './accountLedger';
}


function TransactionAccount(a) {
	event.preventDefault();
	var ref = document.getElementById("RefButton");
	ref.classList.remove("active");

	var gl = document.getElementById("GLButton");
	gl.classList.remove("active");

	var scheme = document.getElementById("param");
	scheme.classList.remove("active");

	var chart = document.getElementById("chartOfAccounts");
	chart.classList.remove("active");

	var act = document.getElementById("accountLedger");
	act.classList.remove("active");

	var act = document.getElementById("TransactionsAccounts");
	act.classList.add("active");

	location.href = './TransactionsAccounts';
}



	</script>

</head>


<body>

    <div class="col-sm-2">
        <div th:insert="BGLSHeaderMenu :: header"></div>
    </div>
    <!---------------------User List Starts------------------------------------------------------->
    <!-- Start Content-->
    <div class="container-manager">
        <div class="row">
            <div class="col-sm-11 ml-5 mt-2" style="font-size: 0.8rem;">


                <!-- ------------------------------------LIST START---------------------------------- -->
                <div th:if="${formmode}=='list'">
                    <div class="card filterable">

                        <div class="card-header" style="background-color: #e9ecef; height: 50px">
                            <div class="float-left">
                                <h6 style="font-size: 1.2rem; color: black;">TRANSACTION ACCOUNTS
                                </h6>
                            </div>
                            <div class="float-right">
                                <!-- <button class="btn-primary big-btn" onclick="addparam()">Add</button> -->
                                <button class="btn-primary big-btn btn-filter">Filter</button>
                                <button class="btn-primary big-btn" onclick="Add()">Add</button>
                            </div>
                        </div>


                        <div class="mt-3"
							style="padding: 4px 4px; position: relative; display: flex; justify-content: space-around; width: 100%;">
							<!-- Tab buttons -->
							<button class="tablinks rounded-pill" id="RefButton" onclick="RefCode(this);"
								style="font-size: 16px; padding: 4px 8px; height: 40%; width: 15%;">Reference
								Code Maintenance</button>
							<button class="tablinks rounded-pill" id="GLButton" onclick="GLStruct(this);"
								style="font-size: 16px; padding: 4px 8px; height: 40%; width: 15%;">GL
								Structure</button>
							<button class="tablinks rounded-pill" id="param" onclick="SchemeCode(this);"
								style="font-size: 16px; padding: 4px 8px; height: 40%; width: 15%;">Scheme
								Codes</button>
							<button class="tablinks rounded-pill" id="chartOfAccounts" onclick="Chart(this);"
								style="font-size: 16px; padding: 4px 8px; height: 40%; width: 15%;">Chart
								of Accounts</button>
							<button class="tablinks rounded-pill" id="accountLedger" onclick="Account(this);"
								style="font-size: 16px; padding: 4px 8px; height: 40%; width: 15%;">Account
								Ledger</button>

							<button class="tablinks active rounded-pill" id="TransactionAccount" onclick="TransactionAccount(this);"
								style="font-size: 16px; padding: 4px 8px; height: 40%; width: 15%;">Transaction Accounts</button>

						</div>

                        <div class="card-body" style="overflow-y: auto; border: 1px solid #ddd;">
                            <div class="table-responsive" id="cardBody">
                                <table class="table  table-bordered  table-hover table-sm"
                                    style="margin-bottom: 0px; font-size: initial;" id="usertable">
                                    <thead class="thead-light"
                                        style="position: sticky; top: 0; background-color: #f8f9fa; z-index: 1;">
                                        <tr class="filters">
                                            <th><input type="text" class="form-control font-weight-bold"
                                                    placeholder="Id" disabled></th>
                                            <th><input type="text" class="form-control font-weight-bold"
                                                    placeholder="Product key" disabled></th>
                                            <th><input type="text" class="form-control font-weight-bold"
                                                    placeholder="GL Code" disabled></th>
                                            <th><input type="text" class="form-control font-weight-bold"
                                                    placeholder="GL Desc" disabled></th>
                                            <th><input type="text" class="form-control font-weight-bold"
                                                    placeholder="Scheme Code" disabled></th>
                                            <th><input type="text" class="form-control font-weight-bold"
                                                    placeholder="Scheme Desc" disabled></th>
                                            <th class="text-center font-weight-bold">Actions</th>
                                        </tr>
                                    </thead>

                                    <tbody>
                                        <tr th:if="${list == null or #lists.isEmpty(list)}">
                                            <td colspan="7" style="text-align:center; color:red; font-weight:bold; font-size:16px;">
                                                No record found
                                            </td>
                                        </tr>

                                        <tr th:each="tabledata, iterator : ${list}" class="userlist">

                                            <td style="width: 30px; font-size: 15px;" th:text="${tabledata.id}">
                                            </td>
                                            <td style="width: 120px; font-size: 15px; color: #007bff; cursor: pointer;"
                                                th:attr="onclick=|rowClick('${tabledata.id}')|"
                                                th:text="${tabledata.productKey}">
                                            </td>
                                            <td style="
												max-width: 300px; 
												font-size: 15px; 
												white-space: nowrap; 
												overflow: hidden; 
												text-overflow: ellipsis;" th:text="${tabledata.glCode}" title="${tabledata.glCode}">
                                            </td>


                                            <td style="width: 50px; font-size: 15px; text-align: left;"
                                                th:text="${tabledata.glDesc}">
                                            </td>
                                            <td style="width: 100px; font-size: 15px;" th:text="${tabledata.schmCode}">
                                            </td>
                                            <td style="width: 100px; font-size: 15px;" th:text="${tabledata.schmDesc}">
                                            </td>




                                            <td class="text-center" style="width: 100px;">
                                                <div class="dropdown action-dropdown">
                                                    <button class="btn btn-action dropdown-toggle" style="padding:0px"
                                                        type="button" id="dropdownMenuButton" title="Action"
                                                        data-toggle="dropdown" aria-haspopup="true"
                                                        aria-expanded="false">
                                                        Action
                                                    </button>

                                                    <div class="dropdown-menu" style="padding:0px"
                                                        aria-labelledby="dropdownMenuButton">

                                                        <!-- Edit option: show only if MODIFY_FLG == 'Y' -->
                                                        <a class="dropdown-item edit-item"
                                                            th:if="${tabledata.modifyFlg == 'Y'}"
                                                            th:attr="data-refid=${tabledata.id}" title="Edit"
                                                            onclick="redirectToEdit(this)">Edit</a>

                                                        <div class="dropdown-divider"
                                                            th:if="${tabledata.modifyFlg == 'Y'}"></div>

                                                        <!-- Delete option (always visible or restrict if needed) -->
                                                        <a class="dropdown-item delete-item"
                                                            th:attr="data-refid=${tabledata.id}" title="Delete"
                                                            onclick="redirectToDelete(this)">Delete</a>

                                                        <div class="dropdown-divider"></div>

                                                        <!-- Verify option: show only if VERIFY_FLG != 'Y' -->
                                                        <a class="dropdown-item delete-item"
                                                            th:if="${tabledata.verifyFlg != 'Y'}"
                                                            th:attr="data-refid=${tabledata.id}" title="Verify"
                                                            onclick="redirectToVerify(this)">Verify</a>
                                                    </div>

                                                </div>
                                            </td>

                                        </tr>

                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="card-footer text-center " style="background-color: #e9ecef">
                        <button class="btn-primary big-btn" onclick="Home();">Home</button>
                        <button class="btn-primary big-btn" onclick="Back();">Back</button>
                    </div>

                </div>

                <!-- ------------------------------------LIST END---------------------------------- -->



                <!-- ------------------------------------View verify delete modify START----------------------------------- -->

                <div th:if="${formmode}=='view' or ${formmode}=='verify' or ${formmode}=='delete' or ${formmode}=='modify'">
                    <div class="card">
                        <div class="card-header" style="background-color:#e9ecef;height:50px" th:if="${formmode} == 'view'">
                            <div class="float-left">
                                <h6 style="font-size:1.2rem;color:black;">TRANSACTION ACCOUNT - VIEW</h6>
                            </div>
                        </div>

                        <div class="card-header" style="background-color:#e9ecef;height:50px" th:if="${formmode} == 'verify'">
                            <div class="float-left">
                                <h6 style="font-size:1.2rem;color:black;">TRANSACTION ACCOUNT - VERIFY</h6>
                            </div>
                        </div>

                        <div class="card-header" style="background-color:#e9ecef;height:50px" th:if="${formmode} == 'delete'">
                            <div class="float-left">
                                <h6 style="font-size:1.2rem;color:black;">TRANSACTION ACCOUNT - DELETE</h6>
                            </div>
                        </div>

                        <div class="card-header" style="background-color:#e9ecef;height:50px" th:if="${formmode} == 'modify'">
                            <div class="float-left">
                                <h6 style="font-size:1.2rem;color:black;">TRANSACTION ACCOUNT - MODIFY</h6>
                            </div>
                        </div>

                        <div class="card-body">
                            <form action="#" method="post" id="transactionViewForm" autocomplete="off">

                                <!-- ROW 1 -->
                                <div class="row formline" style="padding: 15px 0px 2px 0px;">
                                    <div class="col-sm-1"></div>
                                    <div class="col-sm-2 d-flex align-items-center">Id</div>
                                    <div class="col-sm-2">
                                        <input type="text" id="id" name="id" th:value="${account?.id}"
                                            class="form-control form-control-sm bg-white border border-dark" readonly />
                                    </div>

                                    <div class="col-sm-1"></div>
                                    <div class="col-sm-2 d-flex align-items-center">Product Key</div>
                                    <div class="col-sm-2">
                                        <input type="text" id="productKey" name="productKey"
                                            th:value="${account?.productKey}"
                                            class="form-control form-control-sm bg-white border border-dark" th:readonly="${formmode != 'modify'}" />
                                    </div>
                                    <div class="col-sm-1"></div>
                                </div>

                                <!-- ROW 2 -->
                                <div class="row formline" style="padding: 5px 0px 2px 0px;">
                                    <div class="col-sm-1"></div>
                                    <div class="col-sm-2 d-flex align-items-center">GL Code</div>
                                    <div class="col-sm-2">
                                        <input type="text" id="glCode" name="glCode" th:value="${account?.glCode}"
                                            class="form-control form-control-sm bg-white border border-dark" th:readonly="${formmode != 'modify'}" />
                                    </div>

                                    <div class="col-sm-1"></div>
                                    <div class="col-sm-2 d-flex align-items-center">GL Description</div>
                                    <div class="col-sm-2">
                                        <input type="text" id="glDesc" name="glDesc" th:value="${account?.glDesc}"
                                            class="form-control form-control-sm bg-white border border-dark" th:readonly="${formmode != 'modify'}" />
                                    </div>
                                    <div class="col-sm-1"></div>
                                </div>

                                <!-- ROW 3 -->
                                <div class="row formline" style="padding: 5px 0px 2px 0px;">
                                    <div class="col-sm-1"></div>
                                    <div class="col-sm-2 d-flex align-items-center">Scheme Code</div>
                                    <div class="col-sm-2">
                                        <input type="text" id="schmCode" name="schmCode" th:value="${account?.schmCode}"
                                            class="form-control form-control-sm bg-white border border-dark" th:readonly="${formmode != 'modify'}" />
                                    </div>

                                    <div class="col-sm-1"></div>
                                    <div class="col-sm-2 d-flex align-items-center">Scheme Description</div>
                                    <div class="col-sm-2">
                                        <input type="text" id="schmDesc" name="schmDesc" th:value="${account?.schmDesc}"
                                            class="form-control form-control-sm bg-white border border-dark" th:readonly="${formmode != 'modify'}" />
                                    </div>
                                    <div class="col-sm-1"></div>
                                </div>

                                <!-- Row 4 -->
                                <div class="row formline" style="padding: 5px 0px 2px 0px;">
                                    <div class="col-sm-1"></div>
                                    <div class="col-sm-2 d-flex align-items-center">GLSH Code</div>
                                    <div class="col-sm-2">
                                        <input type="text" id="glshCode" name="glshCode" th:value="${account?.glshCode}"
                                            class="form-control form-control-sm bg-white border border-dark" th:readonly="${formmode != 'modify'}" />
                                    </div>

                                    <div class="col-sm-1"></div>
                                    <div class="col-sm-2 d-flex align-items-center">GLSH Description</div>
                                    <div class="col-sm-2">
                                        <input type="text" id="glshDesc" name="glshDesc" th:value="${account?.glshDesc}"
                                            class="form-control form-control-sm bg-white border border-dark" th:readonly="${formmode != 'modify'}" />
                                    </div>
                                    <div class="col-sm-1"></div>
                                </div>

                                <!-- Row 5 -->
                                <div class="row formline" style="padding: 5px 0px 2px 0px;">
                                    <div class="col-sm-1"></div>
                                    <div class="col-sm-2 d-flex align-items-center">Interest Income</div>
                                    <div class="col-sm-2">
                                        <input type="text" id="interestIncome" name="interestIncome"
                                            th:value="${account?.interestIncome}"
                                            class="form-control form-control-sm bg-white border border-dark" th:readonly="${formmode != 'modify'}" />
                                    </div>

                                    <div class="col-sm-1"></div>
                                    <div class="col-sm-2 d-flex align-items-center">Interest recievable</div>
                                    <div class="col-sm-2">
                                        <input type="text" id="interestReceivable" name="interestReceivable"
                                            th:value="${account?.interestReceivable}"
                                            class="form-control form-control-sm bg-white border border-dark" th:readonly="${formmode != 'modify'}" />
                                    </div>
                                    <div class="col-sm-1"></div>
                                </div>

                                <!-- Row 6 -->
                                <div class="row formline" style="padding: 5px 0px 2px 0px;">
                                    <div class="col-sm-1"></div>
                                    <div class="col-sm-2 d-flex align-items-center">Fees Income</div>
                                    <div class="col-sm-2">
                                        <input type="text" id="feesIncome" name="feesIncome"
                                            th:value="${account?.feesIncome}"
                                            class="form-control form-control-sm bg-white border border-dark" th:readonly="${formmode != 'modify'}" />
                                    </div>

                                    <div class="col-sm-1"></div>
                                    <div class="col-sm-2 d-flex align-items-center">Penalty Income</div>
                                    <div class="col-sm-2">
                                        <input type="text" id="penaltyIncome" name="penaltyIncome"
                                            th:value="${account?.penaltyIncome}"
                                            class="form-control form-control-sm bg-white border border-dark" th:readonly="${formmode != 'modify'}" />
                                    </div>
                                    <div class="col-sm-1"></div>
                                </div>



                                <!-- Row 7 -->
                                <div class="row formline" style="padding: 5px 0px 2px 0px;">
                                    <div class="col-sm-1"></div>
                                    <div class="col-sm-2 d-flex align-items-center">Collection Account</div>
                                    <div class="col-sm-2">
                                        <input type="text" id="collectionAccount" name="collectionAccount"
                                            th:value="${account?.collectionAccount}"
                                            class="form-control form-control-sm bg-white border border-dark" th:readonly="${formmode != 'modify'}" />
                                    </div>

                                    <div class="col-sm-1"></div>
                                    <div class="col-sm-2 d-flex align-items-center">Loan parking Account</div>
                                    <div class="col-sm-2">
                                        <input type="text" id="loanParkingAccount" name="loanParkingAccount"
                                            th:value="${account?.loanParkingAccount}"
                                            class="form-control form-control-sm bg-white border border-dark" th:readonly="${formmode != 'modify'}" />
                                    </div>
                                    <div class="col-sm-1"></div>
                                </div>



                            </form>
                        </div>

                        <div class="card-footer text-center" style="background-color:#e9ecef">
                            <button class="btn-primary big-btn" onclick="Home();">Home</button>

                            <button type="button" class="btn-primary big-btn"
                                    th:if="${formmode} == 'verify' and ${account?.verifyFlg != 'Y'}"
                                    th:attr="data-refid=${account.id}"
                                    onclick="Verify(this);">
                                Verify
                            </button>

                            <button type="button" class="btn-primary big-btn"
                                    th:if="${formmode} == 'modify'"
                                    th:attr="data-refid=${account.id}"
                                    onclick="Update()">
                                Modify
                            </button>

                            <button type="button" class="btn-primary big-btn"
                                    th:if="${formmode} == 'delete'"
                                    th:attr="data-refid=${account.id}"
                                    onclick="Delete(this);">
                                Delete
                            </button>

                            <button class="btn-primary big-btn" onclick="Back();">Back</button>
                        </div>
                    </div>
                </div>

                <!-- ------------------------------------VIEW END----------------------------------- -->

                <!-- ------------------------------------ADD START----------------------------------- -->

<div th:if="${formmode}=='add'">
    <div class="card">
        <div class="card-header" style="background-color:#e9ecef;height:50px">
            <div class="float-left">
                <h6 style="font-size:1.2rem;color:black;">TRANSACTION ACCOUNT - ADD</h6>
            </div>
        </div>

        <div class="card-body">
            <form id="transactionAddForm" autocomplete="off">
                
                <!-- ROW 1 -->
                <div class="row formline" style="padding: 15px 0px 2px 0px;">
                    <div class="col-sm-1"></div>
                    <div class="col-sm-2 d-flex align-items-center">Product Key</div>
                    <div class="col-sm-2">
                        <input type="text" id="productKey" name="productKey"
                            class="form-control form-control-sm border border-dark" required />
                    </div>

                    <div class="col-sm-1"></div>
                    <div class="col-sm-2 d-flex align-items-center">GL Code</div>
                    <div class="col-sm-2">
                        <input type="text" id="glCode" name="glCode"
                            class="form-control form-control-sm border border-dark" required />
                    </div>
                    <div class="col-sm-1"></div>
                </div>

                <!-- ROW 2 -->
                <div class="row formline" style="padding: 5px 0px 2px 0px;">
                    <div class="col-sm-1"></div>
                    <div class="col-sm-2 d-flex align-items-center">GL Description</div>
                    <div class="col-sm-2">
                        <input type="text" id="glDesc" name="glDesc"
                            class="form-control form-control-sm border border-dark" />
                    </div>

                    <div class="col-sm-1"></div>
                    <div class="col-sm-2 d-flex align-items-center">Scheme Code</div>
                    <div class="col-sm-2">
                        <input type="text" id="schmCode" name="schmCode"
                            class="form-control form-control-sm border border-dark" />
                    </div>
                    <div class="col-sm-1"></div>
                </div>

                <!-- ROW 3 -->
                <div class="row formline" style="padding: 5px 0px 2px 0px;">
                    <div class="col-sm-1"></div>
                    <div class="col-sm-2 d-flex align-items-center">Scheme Description</div>
                    <div class="col-sm-2">
                        <input type="text" id="schmDesc" name="schmDesc"
                            class="form-control form-control-sm border border-dark" />
                    </div>

                    <div class="col-sm-1"></div>
                    <div class="col-sm-2 d-flex align-items-center">GLSH Code</div>
                    <div class="col-sm-2">
                        <input type="text" id="glshCode" name="glshCode"
                            class="form-control form-control-sm border border-dark" />
                    </div>
                    <div class="col-sm-1"></div>
                </div>

                <!-- ROW 4 -->
                <div class="row formline" style="padding: 5px 0px 2px 0px;">
                    <div class="col-sm-1"></div>
                    <div class="col-sm-2 d-flex align-items-center">GLSH Description</div>
                    <div class="col-sm-2">
                        <input type="text" id="glshDesc" name="glshDesc"
                            class="form-control form-control-sm border border-dark" />
                    </div>

                    <div class="col-sm-1"></div>
                    <div class="col-sm-2 d-flex align-items-center">Interest Income</div>
                    <div class="col-sm-2">
                        <input type="text" id="interestIncome" name="interestIncome"
                            class="form-control form-control-sm border border-dark" />
                    </div>
                    <div class="col-sm-1"></div>
                </div>

                <!-- ROW 5 -->
                <div class="row formline" style="padding: 5px 0px 2px 0px;">
                    <div class="col-sm-1"></div>
                    <div class="col-sm-2 d-flex align-items-center">Interest Receivable</div>
                    <div class="col-sm-2">
                        <input type="text" id="interestReceivable" name="interestReceivable"
                            class="form-control form-control-sm border border-dark" />
                    </div>

                    <div class="col-sm-1"></div>
                    <div class="col-sm-2 d-flex align-items-center">Fees Income</div>
                    <div class="col-sm-2">
                        <input type="text" id="feesIncome" name="feesIncome"
                            class="form-control form-control-sm border border-dark" />
                    </div>
                    <div class="col-sm-1"></div>
                </div>

                <!-- ROW 6 -->
                <div class="row formline" style="padding: 5px 0px 2px 0px;">
                    <div class="col-sm-1"></div>
                    <div class="col-sm-2 d-flex align-items-center">Penalty Income</div>
                    <div class="col-sm-2">
                        <input type="text" id="penaltyIncome" name="penaltyIncome"
                            class="form-control form-control-sm border border-dark" />
                    </div>

                    <div class="col-sm-1"></div>
                    <div class="col-sm-2 d-flex align-items-center">Collection Account</div>
                    <div class="col-sm-2">
                        <input type="text" id="collectionAccount" name="collectionAccount"
                            class="form-control form-control-sm border border-dark" />
                    </div>
                    <div class="col-sm-1"></div>
                </div>

                <!-- ROW 7 -->
                <div class="row formline" style="padding: 5px 0px 10px 0px;">
                    <div class="col-sm-1"></div>
                    <div class="col-sm-2 d-flex align-items-center">Loan Parking Account</div>
                    <div class="col-sm-2">
                        <input type="text" id="loanParkingAccount" name="loanParkingAccount"
                            class="form-control form-control-sm border border-dark" />
                    </div>
                    <div class="col-sm-1"></div>
                </div>
            </form>
        </div>

        <div class="card-footer text-center" style="background-color:#e9ecef">
            <button class="btn-primary big-btn" type="button" onclick="Submit()">Submit</button>
            <button class="btn-secondary big-btn" onclick="Back(); return false;">Cancel</button>
        </div>
    </div>
</div>

<!-- ------------------------------------ADD END----------------------------------- -->




            </div>
        </div>
    </div>



    <div class="modal fade" data-backdrop="false" data-keyboard="false" id="alert" tabindex="-7" role="dialog"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content">

                <div class="modal-body" style="text-align: center;">
                    <h6 id="alertmsg"></h6>
                    <button type="button" class="btn-primary big-btn" id="alertOkBtn"
                        onclick="$('#alert').modal('hide')">Close</button>
                </div>
            </div>
        </div>
    </div>



    <div class="modal fade" data-backdrop="false" data-keyboard="false" id="mypopup" tabindex="-1" role="dialog"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content"
                style="position: fixed; left: 50%; transform: translate(-50%, 0%); width: 30%; height: 25%;">
                <div class="card">
                    <!-- Header with Alert Message -->
                    <div class="modal-header">
                        <h5 class="modal-title" id="popupAlert">Alert Message</h5>
                        <!-- Alert message will appear here -->
                    </div>

                    <!-- Body with Response -->
                    <div class="modal-body" style="text-align: center;">
                        <h6 id="popupmsg"></h6>
                        <!-- Response will be displayed here -->
                    </div>

                    <!-- Footer with Close Button -->
                    <div class="modal-footer">
                        <button type="button" class="btn-primary big-btn" data-dismiss="modal"
                            onclick="goBack();">Close</button>
                        <!-- Calls goBack function -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal" id="submit_model" tabindex="-1" role="dialog" aria-labelledby="alertLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="alertLabel">Alert</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body" id="alertmsg">
                    <!-- Message will be inserted here -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn-primary big-btn" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

</body>

</html>