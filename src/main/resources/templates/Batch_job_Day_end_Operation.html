<html lang="en" xmlns:th="http://www.thymeleaf.org" th:fragment="summary">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="/ASPIRA/js/jquery.min.js"></script>
	<script src="/ASPIRA/js/jquery-ui.min.js"></script>
	<style>
		.filterable {
			margin-top: 35px;
		}

		.filterable .panel-heading .pull-right {
			margin-top: -20px;
		}

		.filterable .filters input[disabled] {
			background-color: transparent;
			border: none;
			cursor: auto;
			box-shadow: none;
			padding: 0;
			height: auto;
		}

		.btn {
			line-height: 0.5rem;
		}

		.body {
			font-family: calibri;
			font-size: 11px;
			line-height: 1.42857143;
			color: #333;
		}

		.filterable .filters input[disabled]::-webkit-input-placeholder {
			color: #333;
		}

		.filterable .filters input[disabled]::-moz-placeholder {
			color: #333;
		}

		.new-color {
			background-color: rgba(0, 0, 0, .03) !important;
		}

		.filterable .filters input[disabled]:-ms-input-placeholder {
			color: #333;
		}

		.panel-primary>.panel-heading {
			color: #fff;
			background-color: #bbc3cb;
			border-color: #bbc3cb;
		}

		.panel-title {
			font-size: 12px;
			text-align: center;
			color: black;
		}

		.panel-heading {
			padding: 8px;
			height: 38px;
		}

		.form-control {
			font-size: 11px;
			width: 80%;
			height: 25px;
		}

		body {
			font-size: 0.8rem;
		}

		.panel-primary {
			border-color: rgba(18, 18, 19, 0.22);
		}

		.modal-footer {
			text-align: center;
			border-top: 0;
			padding: 25px;
			padding-right: 600px;
		}

		.modal-pass {
			background-color: #fefefe;
			margin: 15% auto;
			padding: 20px;
			border: 1px solid #888;
			width: 40%;
			height: 25%;
			margin-left: 400PX;
			margin-right: auto;
			border-radius: 10px;
			box-shadow: 0px 0px 20px rgba(0, 0, 0, 0.2);
			font-family: Arial, sans-serif;
		}

		.modal {
			overflow: auto;
			background-color: rgba(0, 0, 0, 0.4);
		}

		.glyphicon {
			float: right;
			cursor: pointer;
		}

		.loader {
			width: 30px;
			aspect-ratio: 1;
			display: grid;
			border-radius: 50%;
			background: linear-gradient(0deg, rgb(0 0 0/ 50%) 30%, #0000 0 70%,
					rgb(0 0 0/ 100%) 0) 50%/8% 100%,
				linear-gradient(90deg, rgb(0 0 0/ 25%) 30%, #0000 0 70%,
					rgb(0 0 0/ 75%) 0) 50%/100% 8%;
			background-repeat: no-repeat;
			animation: l23 1s infinite steps(12);
		}

		.loader::before,
		.loader::after {
			content: "";
			grid-area: 1/1;
			border-radius: 50%;
			background: inherit;
			opacity: 0.915;
			transform: rotate(30deg);
		}

		.loader::after {
			opacity: 0.83;
			transform: rotate(60deg);
		}

		@keyframes l23 {
			100% {
				transform: rotate(1turn)
			}

		}

		.loader2 {
			margin-left: 150px;
			width: fit-content;
			font-size: 30px;
			font-family: system-ui, sans-serif;
			font-weight: bold;
			text-transform: uppercase;
			color: #0000;
			text-align: center;
			-webkit-text-stroke: 1px #000;
			background: linear-gradient(90deg, #0000 33%, #000 0 67%, #0000 0) 0/300% 100% no-repeat text;
			animation: l2 2s linear infinite;
			width: fit-content;
		}

		.loader2:before {
			content: "Loading...";
		}

		@keyframes l2 {
			0% {
				background-position: 100%;
			}

		}

		.loader3 {
			margin-left: 150px;
			width: fit-content;
			font-size: 30px;
			font-family: system-ui, sans-serif;
			font-weight: bold;
			text-transform: uppercase;
			color: #0000;
			text-align: center;
			-webkit-text-stroke: 1px #000;
			background: linear-gradient(90deg, #0000 33%, #000 0 67%, #0000 0) 0/300% 100% no-repeat text;
			animation: l2 2s linear infinite;
			width: fit-content;
		}

		.loader3:before {
			content: "Loading...";
		}

		@keyframes l2 {
			0% {
				background-position: 100%;
			}

		}

		.loader8 {
			margin-left: 150px;
			width: fit-content;
			font-size: 30px;
			font-family: system-ui, sans-serif;
			font-weight: bold;
			text-transform: uppercase;
			color: #0000;
			text-align: center;
			-webkit-text-stroke: 1px #000;
			background: linear-gradient(90deg, #0000 33%, #000 0 67%, #0000 0) 0/300% 100% no-repeat text;
			animation: l2 2s linear infinite;
			width: fit-content;
		}

		.loader8:before {
			content: "Loading...";
		}

		.big-btn {
			font-size: 16px;
		}
	</style>
	<style>

		.custom-modal .modal-dialog {
    max-width: 900px !important; /* increased width */
    margin: 1.75rem auto;
    transition: all 0.3s ease-in-out;
  }

  /* Header alignment */
  .custom-modal .modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  /* Table adjustments */
  #accountTable {
    width: 100%;
    table-layout: fixed;
  }

  #accountTable th,
  #accountTable td {
    text-align: left;
    padding: 6px 10px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  /* Smooth modal body center alignment */
  .custom-modal .modal-body {
    margin: auto;
    width: 100%;
    transition: all 0.3s ease;
  }

  /* Filter toggle animation */
  .filter-active {
    max-width: 900px !important;
  }

  /* Back button on the left */
  .modal-footer .btn-left {
    margin-right: auto;
  }

  /* Keep modal centered always */
#dabSubmitModal .modal-dialog {
  max-width: 700px;
  margin: 1.75rem auto;   /* centers horizontally */
  transition: all 0.3s ease-in-out;
}

/* Expanded width when showing the account table */
#dabSubmitModal .modal-dialog.expanded {
  max-width: 900px;
  margin: 1.75rem auto;   /* still centered */
}

		.custom-margin-top {
			margin-top: 1000px;
		}
	</style>
</head>
<script th:inline="javascript" >
	// $(function () {
	// 		$(".holiday_from_date").datepicker({
	// 			dateFormat: 'dd-mm-yy',
	// 			changeMonth: true,
	// 			changeYear: true
	// 		});
	// 	});


	const sessionTranDate = /*[[${#dates.format(session.TRANDATE, 'dd-MM-yyyy')}]]*/ '';

	$(document).on("click","#dabDaySelectSubmit",function(){
		Doatranscation();
	});

	$(document).on("click","#dateChangeProcess",function(){
			DateChangeProcess();
		});

	$(document).on("click","#batchjob_consitency_check",function(){
		ConsistencyCheck();
	});


	$(document).on("click","#holiday_date_selection",function(){		
		var tableHtml = `
                <div>
					<div style="display:flex;" >
						<lable style="width:100px" ><b>From Date : </b> </lable>
						<input style="width:250px" id="holiday_from_date" type="text" class="datepicker form-control"  >
					</div>
					<div style="display:flex;margin-top: 10px;" >
						<lable style="width:100px" ><b>To Date : </b></lable>
						<input style="width:250px" id="holiday_to_date" type="text" class="datepicker form-control" readonly>
					</div>
				</div>
            `;

				// Inject content into modal
				$("#holidaySubmitModalBody").html(tableHtml);

				
				// Initialize both datepickers after inserting into DOM
				$("#holiday_from_date").datepicker({
					dateFormat: "dd-mm-yy",
					changeMonth: true,
					changeYear: true
				});

				$("#holiday_from_date").datepicker("setDate", sessionTranDate);
				$("#holiday_from_date").datepicker("option", "maxDate", sessionTranDate);
				document.getElementById('holiday_to_date').value = sessionTranDate;

				// Show modal
				$("#holidaySubmitModal").modal("show");
	});

	$(document).on("click","#dab_date_selection",function(){
		
		$("#loadingModal").css("display", "flex");
		$.ajax({
			url: "getDabAcctList",
			type: 'GET',
			success: function (res) {
			// 	let Acct_Id_List = '<option>--Select--</option>'
			// 	res.forEach(item=>{
			// 		Acct_Id_List += '<option value="'+item.acct_num+'" data-acct_name="'+item.acct_name+'" >'+item.acct_num+" - "+item.acct_name+'</option>'
			// 	})
			// 	var tableHtml = `
            //     <div>
			// 		<div style="display:flex;" >
			// 			<lable style="width:100px" ><b>Acct ID : </b> </lable>
			// 			<select style="width:250px" id="dab_select_id" class="form-control" >
			// 				${Acct_Id_List}
			// 			</select>
			// 		</div>
			// 		<div style="display:flex;margin-top: 10px;" >
			// 			<lable style="width:100px" ><b>From Date : </b> </lable>
			// 			<input style="width:250px" id="dab_from_date" type="text" class="form-control" >
			// 		</div>
			// 		<div style="display:flex;margin-top: 10px;" >
			// 			<lable style="width:100px" ><b>To Date : </b></lable>
			// 			<input style="width:250px" id="dab_to_date" type="text" class="form-control" readonly >
			// 		</div>
			// 	</div>
            // `;

				// Inject content into modal
				// $("#dabSubmitModalBody").html(tableHtml);

								// Initialize both datepickers after inserting into DOM
				// $("#dab_from_date").datepicker({
				// 	dateFormat: "dd-mm-yy",
				// 	changeMonth: true,
				// 	changeYear: true
				// });

			
				
				// Show modal
				$("#dabSubmitModal").modal("show");
				$("#dab_from_date,#dab_to_date").datepicker({
					dateFormat: "dd-mm-yy",
					changeMonth: true,
					changeYear: true
				});
				$("#dab_from_date").datepicker("setDate", sessionTranDate);
				$("#dab_from_date").datepicker("option", "maxDate", sessionTranDate);
				document.getElementById('dab_to_date').value = sessionTranDate;

				$("#loadingModal").hide();
			},
			error: function (xhr, status, error) {
				$("#loadingModal").hide();
				console.error("error:", error);
			}
		});

		
	});

	// ✅ Open Account List (Expand Modal)
	$(document).on("click", "#openAccountList", function () {
	$("#dabStep1").hide();
	$("#dabStep2").show();
	$("#toggleFilterBtn, #backToForm").show();
	$(".modal-dialog").addClass("expanded");   // <-- expand & center
	loadAccounts();
	});


	// ✅ Back to Step 1 (Normal Width)
	$(document).on("click", "#backToForm", function () {
	$("#dabStep2").hide();
	$("#dabStep1").show();
	$("#toggleFilterBtn, #backToForm").hide();
	$(".modal-dialog").removeClass("expanded"); // <-- restore width
	});


	// ✅ Enable/Disable Filters
	$(document).on("click", "#toggleFilterBtn", function () {
	const isDisabled = $("#filterAccountNumber").prop("disabled");
	$("#filterAccountNumber, #filterAccountName").prop("disabled", !isDisabled);

	if (!isDisabled) {
		$("#filterAccountNumber, #filterAccountName").val("");
		loadAccounts();
	}
	});


	// ✅ Load Accounts (Normal/Search)
	function loadAccounts(column, keyword) {
	const url = keyword
		? `getDabAcctList/search?column=${column}&keyword=${encodeURIComponent(keyword)}`
		: `getDabAcctList`;

	$.ajax({
		url: url,
		type: "GET",
		success: function (res) {
		let rows = "";
		if (res && res.length > 0) {
			res.forEach(acc => {
			rows += `
				<tr style="cursor:pointer;" onclick="selectAccount('${acc.acct_num}', '${acc.acct_name}')">
				<td>${acc.acct_num}</td>
				<td>${acc.acct_name}</td>
				</tr>`;
			});
		} else {
			rows = `<tr><td colspan="2" class="text-center">No records found</td></tr>`;
		}
		$("#accountTableBody").html(rows);
		},
		error: function (xhr, status, error) {
		console.error("Error fetching accounts:", error);
		},
	});
	}


	// ✅ Live Search
	$(document).on("keyup", "#filterAccountNumber, #filterAccountName", function () {
	if ($(this).prop("disabled")) return;
	const col = this.id === "filterAccountNumber" ? "acct_num" : "acct_name";
	const keyword = $(this).val().trim();
	loadAccounts(col, keyword || null);
	});


	// ✅ Select Account
	function selectAccount(acctNum, acctName) {
	$("#acctSearchInput").val(`${acctNum} - ${acctName}`);
	$("#acct_num").val(`${acctNum}`);
	$("#dabStep2").hide();
	$("#dabStep1").show();
	$("#toggleFilterBtn, #backToForm").hide();
	$(".modal-dialog").removeClass("expanded"); // reset width & keep center
	}

	$(document).on('click','#holidayDaySelectSubmit',function(){
		HolidayCheckValidate();
	})

	/* function Refresh() {
		window.location.reload();
	} */

	document.addEventListener('DOMContentLoaded', function () {
		// Elements for loader and messages
		var loader = document.getElementById('loader8');
		var successMessage = document.getElementById('successMessage8');
		var failureMessage = document.getElementById('failureMessage8');

		// Show loader for 5-6 seconds (5000-6000 milliseconds)
		setTimeout(function () {
			// Hide loader after 5-6 seconds
			loader.style.display = 'none';

			// Check if the condition is for success or failure
			if (successMessage) {
				successMessage.style.display = 'block'; // Show success message
			} else if (failureMessage) {
				failureMessage.style.display = 'block'; // Show failure message
			}
		}, 3500); // Change this to 6000 if you want 6 seconds
	});

	// Wait for the DOM to load
	document.addEventListener('DOMContentLoaded', function () {
		// Elements for loader and messages
		var loader = document.getElementById('loader2');
		var successMessage = document.getElementById('successMessage');
		var failureMessage = document.getElementById('failureMessage');

		// Show loader for 5-6 seconds (5000-6000 milliseconds)
		setTimeout(function () {
			// Hide loader after 5-6 seconds
			loader.style.display = 'none';

			// Check if the condition is for success or failure
			if (successMessage) {
				successMessage.style.display = 'block'; // Show success message
			} else if (failureMessage) {
				failureMessage.style.display = 'block'; // Show failure message
			}
		}, 3500); // Change this to 6000 if you want 6 seconds
	});


	document.addEventListener('DOMContentLoaded', function () {
		var loader = document.getElementById('loader3');
		var successMessage2 = document.getElementById('successMessage2');
		var failureMessage2 = document.getElementById('failureMessage2');

		// Function to check balances and display messages
		function checkBalances() {
			const accountCredit = document.getElementById("accountCredit").innerText;
			const accountDebit = document.getElementById("accountDebit").innerText;
			const glCredit = document.getElementById("glCredit").innerText;
			const glDebit = document.getElementById("glDebit").innerText;

			console.log("accountCredit: " + accountCredit);
			console.log("accountDebit: " + accountDebit);
			console.log("glCredit: " + glCredit);
			console.log("glDebit: " + glDebit);

			// Convert to numbers for comparison
			const accOpen = parseFloat(accountCredit.replace(/,/g, ''));
			const accClose = parseFloat(accountDebit.replace(/,/g, ''));
			const glC = parseFloat(glCredit.replace(/,/g, ''));
			const glD = parseFloat(glDebit.replace(/,/g, ''));

			console.log("accOpen: " + accOpen);
			console.log("accClose: " + accClose);
			console.log("glC: " + glC);
			console.log("glD: " + glD);


			if (accOpen === glC && accClose === glD) {
				successMessage2.style.display = "block";
				failureMessage2.style.display = "none";
			} else {
				failureMessage2.style.display = "block";
				successMessage2.style.display = "none";
			}
		}

		// Show loader for 3.5 seconds (3500 milliseconds)
		setTimeout(function () {
			// Hide loader after 3.5 seconds
			loader.style.display = 'none';

			// Call the checkBalances function after loader is hidden
			checkBalances();
		}, 4500); // Adjust to 6000 if you want 6 seconds
	});





	// Set the next date when the page loads
	window.onload = setNextDate;


	// Set the next date when the page loads
	window.onload = setNextDate;
</script>




<script>

	function DateChangeProcess() {
		// alert("Play11");
		$("#loadingModal").css("display", "flex");
		var nxtdate = $("#nxtdate").val();
		console.log("Selected Date:", nxtdate);

		var trndate = $("#current_date").val();
		console.log("Current Date:", trndate);

		// AJAX call
		$.ajax({
			url: "bacthJobdateChageProcess",  // ✅ backend Spring Boot endpoint
			type: 'POST',
			data: { nxtdate: nxtdate, trndate: trndate },
			success: function (res) {
				console.log("success: " + res);
				$('#DateChangeModelbody').html('<h5 class="text-center">' + res + '</h5>');
				$('#DateChangeModel').modal('show');
				$("#loadingModal").hide();
				
			},
			error: function (xhr, status, error) {
				console.error("error:", error);
				$('#DateChangeModelbody').html('<h5 class="text-center">' + status + '</h5>');
				$('#DateChangeModel').modal('show');
				$("#loadingModal").hide();
				
			}
		});

	}

	// function DateChangeProcess() {
	// 	// alert("Play11");

	// 	// Hide the start button
	// 	$("#play11").hide();

	// 	// Remove any existing loader cell
	// 	$('#td11').remove();

	// 	// Append loader while waiting for response
	// 	$('#tr11').append(
	// 		'<td width="205px;" id="td11" style="text-align: center;padding-left:80px;"><div class="loader"></div></td>'
	// 	);

	// 	// Fake delay: replace loader with tick after 2s
	// 	setTimeout(function () {
	// 		$('#td11').html(
	// 			'<td style="text-align: center;font-size: 20px;padding:0px;margin:0px">&#9989;</td>'
	// 		);
	// 	}, 2000);

	// 	var nxtdate = $("#nxtdate").val();
	// 	console.log("Selected Date:", nxtdate);

	// 	var trndate = $("#current_date").val();
	// 	console.log("Current Date:", trndate);

	// 	// AJAX call
	// 	$.ajax({
	// 		url: "dateChageProcess",  // ✅ backend Spring Boot endpoint
	// 		type: 'POST',
	// 		data: { nxtdate: nxtdate, trndate: trndate },
	// 		success: function (res) {
	// 			console.log("success: " + res);
	// 			$('#td11').remove();

	// 			// Show response in modal
	// 			$('#datechangeModelBody').text("Your Tranaction Date has been successfully changed");
	// 			$('#dateChangeProcess').modal('show');

	// 			// Append success tick
	// 			$('#tr11').append(
	// 				'<td style="text-align: center;font-size: 20px;padding:0px;margin:0px">&#9989;</td>'
	// 			);
	// 		},
	// 		error: function (xhr, status, error) {
	// 			console.error("error:", error);
	// 			$('#td11').remove();

	// 			// Show error in modal
	// 			$('#datechangeModelBody').text("An error occurred while processing your request.");
	// 			$('#dateChangeProcess').modal('show');

	// 			// Append cross mark
	// 			$('#tr11').append(
	// 				'<td style="text-align: center;font-size: 20px;padding:0px;margin:0px">&#10060;</td>'
	// 			);
	// 		}
	// 	});

	// }


	// function Doatranscation() {
	// 	//alert("Doatranscation");

	// 	confirm("Are you sure you want to proceed with Daily Account Balance?")

	// 	var trndate = $("#current_date").val();
	// 	console.log("Selected Date:", trndate);
	// 	$.ajax({
	// 		url: "Doatransactionpush",
	// 		type: 'POST',
	// 		data: {trndate: trndate},

	// 		success: function (responseText) {
	// 			//  alert(responseText);  

	// 			// Store responseText in the input field
	// 			var responseField = document.getElementById("responseField");

	// 			// Set the response text as the value of the input field
	// 			responseField.value = responseText;

	// 			// Display the updated value for debugging
	// 			// alert(responseField.value + " responseField");

	// 			// Elements for success and failure messages
	// 			var loader = document.getElementById('loader2');
	// 			//alert("hihihi")
	// 			var successMessage = document.getElementById('successMessage1');
	// 			var failureMessage = document.getElementById('failureMessage1');
	// 			var button = document.getElementById('Doatranscationbutton');

	// 			// Initially hide both messages and loader
	// 			loader.style.display = 'block';
	// 			button.style.display = 'none';


	// 			/*        setTimeout(function() {
	// 					   //alert("timeout")
	// 					   loader.style.display = 'none';


	// 					   // Check the responseField value to display the appropriate message
	// 					   if (responseField.value === 'Account balances successfully inserted') {
	// 						   successMessage.style.display = 'block';
	// 					   } else {
	// 						   failureMessage.style.display = 'block';
	// 					   }
	// 				   }, 500); */
	// 			if (responseField.value === 'Account balances successfully inserted') {
	// 				$("#alertmsg1").text("Account balances successfully inserted");
	// 			} else {
	// 				$("#alertmsg1").text("Account balances not successfully inserted");
	// 			}
	// 			$('#alertsval').modal("toggle");
	// 		},
	// 		error: function (xhr, status, error) {
	// 			alert("Error: " + error);
	// 		}
	// 	});
	// }

	$(document).on("click", "#glUpdationBatchJob", function () {
			GlconsolidationCheck();
		});

	function Doatranscation() {
		// Confirm before proceeding
		if (!confirm("Are you sure you want to proceed with Daily Account Balance?")) return;

		// Hide button
		// $("#play7").hide();

		// Remove previous loader cell
		// $('#td7').remove();

		// Add loader in table cell
	// 	$('#tr7').append(`
	// 	<td width="205px;" id="td7" style="text-align: center; padding-left:80px;">
	// 		<div class="loader"></div>
	// 	</td>
	// `);

		// Show modal immediately with loader
		$('#doaTransModalBody').html(`
		<div class="text-center">
			<div class="loader2"></div>
			<p>Processing Daily Account Balance...</p>
			<p id="doaResponseText"></p>
		</div>
	`);
		// $('#doaTransModal').modal('show');

		// AJAX request
		var from_date = $("#dab_from_date").val();
		var to_date = $("#dab_to_date").val();
		var acct_num = $("#acct_num").val();

		$.ajax({
			url: "DoatransactionpushBatchJob",
			type: 'POST',
			data: { 
				from_date: from_date,
				to_date: to_date,
				acct_num:acct_num
			 },
			success: function (responseText) {
				console.log("Doatranscation Response:", responseText);

				// Keep loader in modal visible, show response text
				$('#doaTransModalBody').html(`
				<div class="text-center">
					<p id="doaResponseText" style="text-align:center; font-size:20px;"></p>
				</div>
			`);
				$("#doaResponseText").text(responseText).css({
					color: responseText.includes("successfully") ? 'green' : 'red',
					'font-weight': 'bold',
					'font-size': '16px'
				});
				$('#doaTransModal').modal('show');
			},
			error: function (xhr, status, error) {

				// Keep loader in modal visible and show error
				$("#doaResponseText").text("An error occurred while processing your request.").css({
					color: 'red',
					'font-weight': 'bold',
					'font-size': '16px'
				});
				$('#doaTransModal').modal('show');
			}
		});
	}

	function refresh() {
		window.location.reload();
	}

</script>

<script>
	function formatAmount(value) {
		if (value == null) return "0.00";
		return parseFloat(value).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
	}

	function ConsistencyCheck() {
		var trndate = $("#current_date").val();
		console.log("Selected Date:", trndate);

		$.ajax({
			url: "/ASPIRA/BatchJobconsistencyCheck",
			type: "POST",
			data: { trndate: trndate },
			dataType: "json",
			success: function (res) {
				console.log("ConsistencyCheck Response:", res);

				var tableHtml = '<table class="table table-bordered table-hover">' +
					'<thead><tr><th>VALIDATION</th><th>CREDIT AMOUNT</th><th>DEBIT AMOUNT</th></tr></thead><tbody>';

				tableHtml += '<tr><td>TRM Balance</td>' +
					'<td>' + formatAmount(res.custcheck1[0][0]) + '</td>' +
					'<td>' + formatAmount(res.custcheck1[0][1]) + '</td></tr>';

				tableHtml += '<tr><td>COA Balance</td>' +
					'<td>' + formatAmount(res.custcheck2[0][0]) + '</td>' +
					'<td>' + formatAmount(res.custcheck2[0][1]) + '</td></tr>';

				tableHtml += '<tr><td>DAB Balance</td>' +
					'<td>' + formatAmount(res.custcheck3[0][0]) + '</td>' +
					'<td>' + formatAmount(res.custcheck3[0][1]) + '</td></tr>';

				tableHtml += '</tbody></table>';

				// Inject table into modal
				$("#journalModal8 .modal-body").html(tableHtml);

				// Validation messages
				if (res.custcheck1[0][0] === res.custcheck2[0][0]) {
					$("#journalModal8 .modal-body").append('<div style="text-align:center; margin-top:10px;"><h4 style="color:green;">Validation Success &#9989;</h4></div>');
				} else {
					$("#journalModal8 .modal-body").append('<div style="text-align:center; margin-top:10px;"><h4 style="color:red;">Validation Failed &#10060;</h4></div>');
				}
				$('#journalModal8').modal('show');

			},
			error: function () {
				$('#journalModal8').modal('show');
			}
		});
	}



	function AccountLedgerValidate() {
		// Hide the start button
		$("#play5").hide();

		// Remove any existing loader cell
		$('#td5').remove();

		// Append loader
		$('#tr5').append(
			'<td width="205px;" id="td5" style="text-align: center; padding-left:80px;"><div class="loader"></div></td>'
		);

		var trndate = $("#current_date").val();
		console.log("Selected Date:", trndate);

		// AJAX request
		$.ajax({
			url: "accountLedgerdayend",
			type: 'POST',
			data: { trndate: trndate },
			dataType: "json",
			success: function (res) {
				console.log("Account Ledger Response:", res);

				// Remove loader and replace with tick
				$('#td5').remove();
				$('#tr5').append('<td style="text-align:center; font-size:20px;">&#9989;</td>');

				// Build table for modal dynamically
				var tableHtml = `
                <table class="table table-bordered table-hover text-center">
                    <thead class="thead-light">
                        <tr>
                            <th>TABLE</th>
                            <th>COUNT</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>${res.table}</td>
                            <td>${res.count}</td>
                        </tr>
                    </tbody>
                </table>
                <div style="text-align:center; margin-top:10px;">
                    <h5 style="color:green;">${res.message} &#9989;</h5>
                </div>
            `;

				// Inject content into modal
				$("#ledgerModalBody").html(tableHtml);

				// Show modal
				$("#ledgerModal").modal("show");
			},
			error: function (xhr, status, error) {
				console.error("AJAX error:", status, error);

				// Remove loader and show failure icon
				$('#td5').remove();
				$('#tr5').append('<td style="text-align:center; font-size:20px;">&#10060;</td>');

				// Show error message
				$("#ledgerModalBody").html(`
                <div style="text-align:center; font-size:18px; color:red;">
                    An error occurred while processing your request. &#10060;
                </div>
            `);
				$("#ledgerModal").modal("show");
			}
		});
	}

	function HolidayCheckValidate() {
		var trndate = $("#holiday_from_date").val();

		// Show modal with loader
		$('#holidayModalBody').html('<div class="text-center my-3"><div class="loader"></div><p class="mt-2">Checking for holiday...</p></div>');

		// AJAX request
		$.ajax({
			url: "holidayCheckBatchJob",
			type: 'POST',
			data: { trndate: trndate },
			dataType: "text",
			success: function (res) {
				// Replace modal body content with result
				$('#holidayModalBody').html('<h5 class="text-center">' + res + '</h5>');
				$('#holidayModal').modal('show');
			},
			error: function (xhr, status, error) {
				$('#holidayModalBody').html('<h5 class="text-center text-danger">❌ An error occurred while processing your request.</h5>');
				$('#holidayModal').modal('show');
			}
		});
	}

	function GlconsolidationCheck() {
		// Hide the start button
		// $("#play9").hide();

		// Remove any existing loader
		// $('#td9').remove();

		// Append the loader before the AJAX call
		// $('#tr9').append('<td width="205px;" id="td9" style="text-align: center;padding-left:80px;"><div class="loader"></div></td>');
		$("#loadingModal").css("display", "flex");
		$.ajax({
			url: "glconsolidationBatchJob",
			type: 'GET',
			async: true,
			success: function (res) {
				$("#loadingModal").hide();
				// Remove the loader
				// $('#td9').remove();

				// Append a success icon
				// $('#tr9').append('<td style="text-align: center;font-size: 20px;padding:0px;margin:0px">&#9989;</td>');

				// Update modal content with the response string
				$('#glConsolidationModalTitle').text('GL Consolidation');
				$('#glConsolidationModalBody').html('<div class="text-center my-3" style="text-align: center;font-size: 20px;padding:0px;margin:0px">' + res + '</div>');

				// Show the modal after 1 second
				// setTimeout(function () {
				$("#loadingModal").hide();
					$('#glConsolidationModal').modal('show');
				// }, 1000);
			},
			error: function (xhr, status, error) {
				// Remove the loader
				// $('#td9').remove();

				// Append a failure icon
				// $('#tr9').append('<td style="text-align: center;font-size: 20px;padding:0px;margin:0px">&#10060;</td>');

				// Update modal content with the error message
				$('#glConsolidationModalTitle').text('GL Consolidation');
				$('#glConsolidationModalBody').html('<div class="text-center my-3">' + xhr.responseText + '</div>');

				// Show the modal after 1 second
				// setTimeout(function () {
				$("#loadingModal").hide();
					$('#glConsolidationModal').modal('show');
				// }, 1000);
			}

		});
	}


	function MovementofTransaction() {
		// Hide the start button
		$("#play10").hide();

		// Remove any existing loader
		$('#td10').remove();

		// Append the custom CSS loader while waiting for the AJAX response
		$('#tr10').append('<td width="205px;" id="td10" style="text-align: center;padding-left:80px;"><div class="loader"></div></td>');

		var trndate = $("#current_date").val();
		console.log("Selected Date:", trndate);
		// Send AJAX request
		$.ajax({
			url: "movementoftransaction",
			type: 'POST',
			data: { trndate: trndate },
			// dataType: "json",
			success: function (res) {
				// Remove loader
				$('#td10').remove();

				// Append a success icon
				$('#tr10').append('<td style="text-align: center;font-size: 20px;padding:0px;margin:0px">&#9989;</td>');

				// Show the success modal after 1 second
				setTimeout(function () {
					$('#successMessage3').modal('show');
				}, 1000);
			},
			error: function (xhr, status, error) {
				// Remove the loader if it's there
				$('#td10').remove();

				// Append a failure icon
				$('#tr10').append('<td style="text-align: center;font-size: 20px;padding:0px;margin:0px">&#9989;</td>');

				// Show the failure modal after 1 second
				setTimeout(function () {
					$('#failureMessage3').modal('show');
				}, 1000);
			}
		});
	}

	function InterestDemandgeneration() {
		// Hide the start button
		$("#play2").hide();

		// Remove any existing loader cell
		$('#td2').remove();

		// Append loader while processing
		$('#tr2').append(`
		<td width="205px;" id="td2" style="text-align: center; padding-left:80px;">
			<div class="loader"></div>
		</td>
	`);

		// Prepare data
		var values = {
			"MIG_DATE": $("#current_date").val()
		};

		// AJAX request
		$.ajax({
			url: "intrestDemandgeneration",
			type: "POST",
			data: values,
			// Remove dataType: 'json' since response is plain text
			success: function (res) {
				console.log("Interest Demand Response:", res);

				// Remove loader
				$('#td2').remove();

				// Decide icon based on success keyword presence (optional)
				let isSuccess = typeof res === 'string' && /success/i.test(res);

				// Append tick or cross
				$('#tr2').append(`
				<td style="text-align:center; font-size:20px;">
					${isSuccess ? '&#9989;' : '&#10060;'}
				</td>
			`);

				// Show whatever message backend returned
				let modalHtml = `
				<div style="text-align:center;">
					<h5 class="mt-3 ${isSuccess ? 'text-success' : 'text-danger'}">
						${res}
					</h5>
				</div>
			`;

				$('#interestDemandBody').html(modalHtml);
				$('#interestDemandModal').modal('show');
			},
			error: function (xhr, status, error) {
				console.error("Interest Demand Error:", status, error);

				// Remove loader and append cross
				$('#td2').remove();
				$('#tr2').append(`
				<td style="text-align:center; font-size:20px;">&#10060;</td>
			`);

				// Show error message
				var errorHtml = `
				<div style="text-align:center;">
					<h5 class="mt-3 text-danger">An error occurred while processing your request.</h5>
				</div>
			`;
				$('#interestDemandBody').html(errorHtml);
				$('#interestDemandModal').modal('show');
			}
		});
	}

	function FeeDemandgeneration() {
		// Hide the start button
		$("#play12").hide();

		// Remove any existing loader cell
		$('#td12').remove();

		// Append loader while processing
		$('#tr12').append(`
		<td width="205px;" id="td12" style="text-align: center; padding-left:80px;">
			<div class="loader"></div>
		</td>
	`);

		// Prepare data
		var values = {
			"MIG_DATE": $("#current_date").val()
		};

		// AJAX request
		$.ajax({
			url: "feedemandgeneration", // your backend endpoint
			type: "POST",
			data: values,
			success: function (res) {
				console.log("Fee Demand Response:", res);

				// Remove loader
				$('#td12').remove();

				// Detect success (optional keyword check)
				let isSuccess = typeof res === 'string' && /success/i.test(res);

				// Append tick or cross
				$('#tr12').append(`
				<td style="text-align:center; font-size:20px;">
					${isSuccess ? '&#9989;' : '&#10060;'}
				</td>
			`);

				// Build modal message (display raw backend string)
				let modalHtml = `
				<div style="text-align:center;">
					<h5 class="mt-3 ${isSuccess ? 'text-success' : 'text-danger'}">
						${res}
					</h5>
				</div>
			`;

				// Inject result into modal body
				$('#feeDemandBody').html(modalHtml);

				// Show modal
				$('#feeDemandModal').modal('show');
			},
			error: function (xhr, status, error) {
				console.error("Fee Demand Error:", status, error);

				// Remove loader and append cross
				$('#td12').remove();
				$('#tr12').append(`
				<td style="text-align:center; font-size:20px;">&#10060;</td>
			`);

				// Show error message in modal
				var errorHtml = `
				<div style="text-align:center;">
					<h5 class="mt-3 text-danger">An error occurred while processing your request.</h5>
				</div>
			`;
				$('#feeDemandBody').html(errorHtml);
				$('#feeDemandModal').modal('show');
			}
		});
	}

	function InterestAccural() {
		// Hide the start button
		$("#play1").hide();

		// Remove any existing loader cell
		$('#td1').remove();

		// Append loader while processing
		$('#tr1').append(`
		<td width="205px;" id="td1" style="text-align: center; padding-left:80px;">
			<div class="loader"></div>
		</td>
	`);

		// Prepare data
		var values = {
			"MIG_DATE": $("#current_date").val()
		};

		// AJAX request
		$.ajax({
			url: "InterestAccural", // your backend endpoint
			type: "POST",
			data: values,
			success: function (res) {
				console.log("InterestAccural Response:", res);

				// Remove loader
				$('#td1').remove();

				// Detect success (optional keyword check)
				let isSuccess = typeof res === 'string' && /success/i.test(res);

				// Append tick or cross
				$('#tr1').append(`
				<td style="text-align:center; font-size:20px;">
					${isSuccess ? '&#9989;' : '&#10060;'}
				</td>
			`);

				// Build modal message (display raw backend string)
				let modalHtml = `
				<div style="text-align:center;">
					<h5 class="mt-3 ${isSuccess ? 'text-success' : 'text-danger'}">
						${res}
					</h5>
				</div>
			`;

				// Inject result into modal body
				$('#InterestAccuralBody').html(modalHtml);

				// Show modal
				$('#InterestAccuralModal').modal('show');
			},
			error: function (xhr, status, error) {
				console.error("InterestAccural Error:", status, error);

				// Remove loader and append cross
				$('#td1').remove();
				$('#tr1').append(`
				<td style="text-align:center; font-size:20px;">&#10060;</td>
			`);

				// Show error message in modal
				var errorHtml = `
				<div style="text-align:center;">
					<h5 class="mt-3 text-danger">An error occurred while processing your request.</h5>
				</div>
			`;
				$('#InterestAccuralBody').html(errorHtml);
				$('#InterestAccuralModal').modal('show');
			}
		});
	}

	function PenaltyAccural() {
		// Hide the start button
		$("#play14").hide();

		// Remove any existing loader cell
		$('#td14').remove();

		// Append loader while processing
		$('#tr14').append(`
		<td width="205px;" id="td14" style="text-align: center; padding-left:80px;">
			<div class="loader"></div>
		</td>
	`);

		// Prepare data
		var values = {
			"MIG_DATE": $("#current_date").val()
		};

		// AJAX request
		$.ajax({
			url: "PenaltyAccural", // your backend endpoint
			type: "POST",
			data: values,
			success: function (res) {
				console.log("PenaltyAccural Response:", res);

				// Remove loader
				$('#td14').remove();

				// Detect success (optional keyword check)
				let isSuccess = typeof res === 'string' && /success/i.test(res);

				// Append tick or cross
				$('#tr14').append(`
				<td style="text-align:center; font-size:20px;">
					${isSuccess ? '&#9989;' : '&#10060;'}
				</td>
			`);

				// Build modal message (display raw backend string)
				let modalHtml = `
				<div style="text-align:center;">
					<h5 class="mt-3 ${isSuccess ? 'text-success' : 'text-danger'}">
						${res}
					</h5>
				</div>
			`;

				// Inject result into modal body
				$('#PenaltyAccuralBody').html(modalHtml);

				// Show modal
				$('#PenaltyAccuralModal').modal('show');
			},
			error: function (xhr, status, error) {
				console.error("PenaltyAccural Error:", status, error);

				// Remove loader and append cross
				$('#td14').remove();
				$('#tr14').append(`
				<td style="text-align:center; font-size:20px;">&#10060;</td>
			`);

				// Show error message in modal
				var errorHtml = `
				<div style="text-align:center;">
					<h5 class="mt-3 text-danger">An error occurred while processing your request.</h5>
				</div>
			`;
				$('#PenaltyAccuralBody').html(errorHtml);
				$('#PenaltyAccuralModal').modal('show');
			}
		});
	}


		function PenaltyCheck() {
		// Hide the start button
		$("#play13").hide();

		// Remove any existing loader cell
		$('#td13').remove();

		// Append loader while processing
		$('#tr13').append(`
		<td width="205px;" id="td13" style="text-align: center; padding-left:80px;">
			<div class="loader"></div>
		</td>
	`);

		// Prepare data
		var values = {
			"MIG_DATE": $("#current_date").val()
		};

		// AJAX request
		$.ajax({
			url: "penaltycheck", // your backend endpoint
			type: "POST",
			data: values,
			success: function (res) {
				console.log("Penalty Check Response:", res);

				// Remove loader
				$('#td13').remove();

				// Detect success (optional keyword check)
				let isSuccess = typeof res === 'string' && /success/i.test(res);

				// Append tick or cross
				$('#tr13').append(`
				<td style="text-align:center; font-size:20px;">
					${isSuccess ? '&#9989;' : '&#10060;'}
				</td>
			`);

				// Build modal message (display raw backend string)
				let modalHtml = `
				<div style="text-align:center;">
					<h5 class="mt-3 ${isSuccess ? 'text-success' : 'text-danger'}">
						${res}
					</h5>
				</div>
			`;

				// Inject result into modal body
				$('#penaltyCheckBody').html(modalHtml);

				// Show modal
				$('#penaltyCheckModal').modal('show');
			},
			error: function (xhr, status, error) {
				console.error("Penalty Check Error:", status, error);

				// Remove loader and append cross
				$('#td13').remove();
				$('#tr13').append(`
				<td style="text-align:center; font-size:20px;">&#10060;</td>
			`);

				// Show error message in modal
				var errorHtml = `
				<div style="text-align:center;">
					<h5 class="mt-3 text-danger">An error occurred while processing your request.</h5>
				</div>
			`;
				$('#penaltyCheckBody').html(errorHtml);
				$('#penaltyCheckModal').modal('show');
			}
		});
	}



</script>
<script>

	function handleotherbatch(){
		$('#otherbatch').modal('show');

	}

	function handleJournalValidation(triggerBtnId, rowId, cellId, modalId) {
		// Hide the Start button
		$('#' + triggerBtnId).hide();

		// Remove any existing loader cell
		$('#' + cellId).remove();

		// Append loader inside the target row (<tr>)
		$('#' + rowId).append(`
		<td width="205px;" id="${cellId}" style="text-align: center; padding-left:80px;">
			<div class="loader"></div>
		</td>
	`);

		// Show modal immediately (optional)
		// $('#' + modalId).modal('show');

		// AJAX call
		$.ajax({
			url: '/ASPIRA/journalvalid',
			type: 'POST',
			contentType: 'application/json',
			data: JSON.stringify({}),
			success: function (res) {
				console.log('Journal Validation Response:', res);

				// Remove loader cell
				$('#' + cellId).remove();

				// Build the modal content table
				const $tbody = $('#journalTableBody');
				$tbody.empty();

				if (res.Valuesfornotransaction) {
					res.Valuesfornotransaction.forEach(item => {
						$tbody.append(`<tr><td>Total No.of.Trans</td><td>${item[0]}</td><td>${item[1] || ''}</td></tr>`);
					});
				}

				if (res.Valuesfordebit) {
					res.Valuesfordebit.forEach(item => {
						$tbody.append(`<tr><td>Dr Transactions</td><td>${item[0]}</td><td>${item[1]}</td></tr>`);
					});
				}

				if (res.ValuesforCredit) {
					res.ValuesforCredit.forEach(item => {
						$tbody.append(`<tr><td>Cr Transactions</td><td>${item[0]}</td><td>${item[1]}</td></tr>`);
					});
				}

				$tbody.append(`<tr><td>Deleted</td><td>${res.ValuesforDel}</td><td></td></tr>`);

				// Show status and icon in same td position
				if (res.Valuesforunpost == 0 || res.Valuesforunpost == 0.00) {
					$('#' + rowId).append(`
					<td style="text-align:center; font-size:20px;">&#9989;</td>
				`);
					$('#successMessageJournal').show();
				} else {
					$('#' + rowId).append(`
					<td style="text-align:center; font-size:20px;">&#9989;</td>
				`);
					$('#failureMessageJournal').show();
				}

				// Show modal with updated data
				$('#' + modalId).modal('show');
			},
			error: function (err) {
				console.error('Journal Validation Error:', err);

				// Remove loader and show ❌
				$('#' + cellId).remove();
				$('#' + rowId).append(`
				<td style="text-align:center; font-size:20px;">&#10060;</td>
			`);

				$('#failureMessageJournal').show();
				$('#' + modalId).modal('show');
			}
		});
	}






</script>
<script>
	document.addEventListener("DOMContentLoaded", function () {
		// Get the current date from the input field
		const currentDateStr = $("#current_date").val();
		const [day, month, year] = currentDateStr.split('-');
		const currentDate = new Date(year, month - 1, day);

		// Calculate next date (current date + 1 day)
		const nextDate = new Date(currentDate);
		nextDate.setDate(currentDate.getDate() + 1);

		// Format date as dd-MM-yyyy
		function formatDate(date) {
			let dd = String(date.getDate()).padStart(2, '0');
			let mm = String(date.getMonth() + 1).padStart(2, '0');
			let yyyy = date.getFullYear();
			return `${dd}-${mm}-${yyyy}`;
		}

		// Set default values
		const nxtdate = formatDate(nextDate);

		// Initialize the jQuery UI Datepicker without minDate restriction
		$("#nxtdate").datepicker({
			dateFormat: 'dd-mm-yy',
			changeMonth: true,
			changeYear: true
			// Removed minDate to allow all dates including past dates
		});

		// Set default date in input (next date of current_date)
		$("#nxtdate").val(nxtdate);
	});
</script>

<script th:inline="javascript">
	$(document).ready(function () {
		var journalStatus = /*[[${Journal}]]*/ '';
		var accountLedger = /*[[${AccountLedger}]]*/ '';
		var HolidayCheck = /*[[${HolidayCheck}]]*/ '';
		var Dab = /*[[${DAB}]]*/ '';
		var consistencyCheck = /*[[${ConsistencyCheck}]]*/ '';
		var movementofTransaction = /*[[${MovementofTransaction}]]*/ '';
		var GlConsolidation = /*[[${GlConsolidation}]]*/ '';
		var dcpstatus =/*[[${dcpstatus}]]*/ '';
		var InterestDemand =/*[[${InterestDemand}]]*/ '';
		var FeeDemand =/*[[${FeeDemand}]]*/ '';
		var Penalty =/*[[${Penalty}]]*/ '';
		console.log("Journal Status: " + journalStatus);

		// ✅ Replace Start button with tick if completed
		if (journalStatus && journalStatus.toString().toUpperCase() === "COMPLETED" && dcpstatus && dcpstatus.toString().toUpperCase() !== "OPEN") {
			$('#td4').html('<span style="font-size: 20px; text-align:center;">&#9989;</span>');
		}

		if (accountLedger && accountLedger.toString().toUpperCase() === "COMPLETED" && dcpstatus && dcpstatus.toString().toUpperCase() !== "OPEN") {
			$('#td5').html('<span style="font-size: 20px; text-align:center;">&#9989;</span>');
		}

		if (HolidayCheck && HolidayCheck.toString().toUpperCase() === "COMPLETED" && dcpstatus && dcpstatus.toString().toUpperCase() !== "OPEN") {
			$('#td6').html('<span style="font-size: 20px; text-align:center;">&#9989;</span>');
		}

		if (Dab && Dab.toString().toUpperCase() === "COMPLETED" && dcpstatus && dcpstatus.toString().toUpperCase() !== "OPEN") {
			$('#td7').html('<span style="font-size: 20px; text-align:center;">&#9989;</span>');
		}

		if (consistencyCheck && consistencyCheck.toString().toUpperCase() === "COMPLETED" && dcpstatus && dcpstatus.toString().toUpperCase() !== "OPEN") {
			$('#td8').html('<span style="font-size: 20px; text-align:center;">&#9989;</span>');
		}

		if (movementofTransaction && movementofTransaction.toString().toUpperCase() === "COMPLETED" && dcpstatus && dcpstatus.toString().toUpperCase() !== "OPEN") {
			$('#td10').html('<span style="font-size: 20px; text-align:center;">&#9989;</span>');
		}

		if (GlConsolidation && GlConsolidation.toString().toUpperCase() === "COMPLETED" && dcpstatus && dcpstatus.toString().toUpperCase() !== "OPEN") {
			$('#td9').html('<span style="font-size: 20px; text-align:center;">&#9989;</span>');
		}

		if (InterestDemand && InterestDemand.toString().toUpperCase() === "COMPLETED" && dcpstatus && dcpstatus.toString().toUpperCase() !== "OPEN") {
			$('#td2').html('<span style="font-size: 20px; text-align:center;">&#9989;</span>');
		}

		if (FeeDemand && FeeDemand.toString().toUpperCase() === "COMPLETED" && dcpstatus && dcpstatus.toString().toUpperCase() !== "OPEN") {
			$('#td12').html('<span style="font-size: 20px; text-align:center;">&#9989;</span>');
		}

		if (Penalty && Penalty.toString().toUpperCase() === "COMPLETED" && dcpstatus && dcpstatus.toString().toUpperCase() !== "OPEN") {
			$('#td13').html('<span style="font-size: 20px; text-align:center;">&#9989;</span>');
		}

		$(document).on("click", "#play4, #play5, #play6, #play7, #play8, #play9, #play10, #play11", function () {
			callDcpUpdate();

		});


		function callDcpUpdate() {
			// alert("called");	
			const currentDate = $("#current_date").val();
			const nextDate = $("#nxtdate").val();
			const user = $("#userid").val();

			const values = {
				"user": user,
				"trndate": currentDate,
				"nxtdate": nextDate
			};

			// ✅ POST: dcpupdate	
			$.ajax({
				url: "/ASPIRA/dcpupdate",
				type: 'POST',
				contentType: 'application/json',
				data: JSON.stringify(values),
				dataType: 'json',
				success: function (res2) {
					if (res2.status == "success") {
						handleJournalValidation('play4', 'tr4', 'td4', 'journalValidationModal');
					}
					console.log("✅ dcpupdate Response:", res2);

				},
				error: function (err2) {
					console.error("❌ dcpupdate AJAX Error:", err2);
				}
			});
		}
		// DAte Change Process
		$(document).on("click", "#play11", function () {
			DateChangeProcess();
		});
		// Journal Validation
		// $(document).on("click", "#play4", function () {
		// 	handleJournalValidation('play4', 'tr4', 'td4', 'journalValidationModal');
		// });
		// Account Ledger
		$(document).on("click", "#play5", function () {
			AccountLedgerValidate();
		});
		// Holiday Check
		$(document).on("click", "#play6", function () {
			HolidayCheckValidate();
		});
		// Daily Account Balance
		$(document).on("click", "#play7", function () {
			Doatranscation();
		});
		// Consistency Check
		$(document).on("click", "#play8", function () {
			ConsistencyCheck();
		});
		// Gl Consolidation
		$(document).on("click", "#play9", function () {
			GlconsolidationCheck();
		});
		//MOvement Of Transaction
		$(document).on("click", "#play10", function () {
			MovementofTransaction();
		});
	});

</script>
</head>
<title>BGLS</title>

<body>
	<div class="col-sm-2">
		<div th:insert="BGLSHeaderMenu :: header"></div>
	</div>
	<div class="container " style="margin-top: 100px">

		<div class="card border panel panel-primary filterable" style="width: 1400px">
			<div class="card-header " style="height: 50px">
				<div class="panel-heading text-left" id="modheadtitle">
					<b style="font-size: 1.2rem;text-align:left;">Batch Job</b> <span
						class="glyphicon glyphicon-question-sign" onclick="open1()"></span>
				</div>


			</div>
			<div class="card-body">
				<div class="panel panel-primary">
					<div class="panel-heading new-color" style="height: 50px">
						<div class="form-group ">
							<div class="row col-sm-12 ">
								<div class="col-sm-1 "></div>
								<label class="col-sm-2">
									<font size="4" color="black">Current Date</font><span
										style="color: red; font-size: 19px;" class="mant">*</span>
								</label>

								<div class="col-sm-3 ">
									<input type="text" style="font-size: 15px; width: 150px;margin-bottom: 20px;"
										id="current_date" th:value="${#dates.format(session.TRANDATE, 'dd-MM-yyyy')}"
										class="form-control" readonly />

									<input type="hidden" id="" th:value="${Userid}" />
								</div>

								<label class="col-sm-2 control-label" style="margin-top: 4px;">
									<font size="4" color="black">Next Working Date</font><span
										style="color: red; font-size: 19px;" class="mant">*</span>
								</label>

								<div class="col-sm-3 ">
									<input type="text" name="nxtdate" id="nxtdate" class="form-control "
										style="font-size: 15px; width: 150px;margin-bottom: 15px;" />
								</div>
							</div>

						</div>

					</div>

					<table class="table table-bordered" id="desc">



						<!-- <tr id="tr4">
							<td style="padding: 2px;"><b>Validation</b></td>
							<td style="padding-left: 5px;">Journal</td>
							<td width="205px" id="td4"
								style="text-align: center; vertical-align: middle; padding: 2px;">
								<button type="button" class="btn-primary big-btn" id="play4">
									Start
								</button>
							</td>
						</tr> -->
						<!-- <tr id="tr5">
							<td style="padding: 2px;"></td>
							<td style="padding-left: 5px;">Account Ledger</td>
							<td width="205px;" id="td5"
								style="text-align: center; vertical-align: middle;padding: 2px;"><button type="button"
									class="btn-primary big-btn" id="play5">Start</button>
							</td>
						</tr> -->
						<tr id="tr6">
							<!-- <td style="padding: 2px;"><b>Validation</b></td> -->
							<td style="padding-left: 5px;cursor: pointer;" id="holiday_date_selection"  >Holiday Check</td>
							<!-- <td width="205px;" id="td6"
								style="text-align: center; vertical-align: middle;padding: 2px;"><button type="button"
									class="btn-primary big-btn" id="play6">Start</button>
							</td> -->
						</tr>
						<tr id="tr7">
							<!-- <td style="padding: 2px;"><b>Steps</b></td> -->
							<td style="padding-left: 5px;cursor: pointer;" id="dab_date_selection" >Daily Account Balance</td>
							<!-- <td width="205px;" id="td7"
								style="text-align: center; vertical-align: middle;padding: 2px;">
								<button type="button" class="btn-primary big-btn" value="Start"
									id="play7">Start</button>
							</td> -->
						</tr>
						<tr id="tr8">
							<!-- <td style="padding: 2px;"></td> -->
							<td style="padding-left: 5px;cursor: pointer;" id="batchjob_consitency_check" >Consistency Check</td>
							<!-- <td width="205px;" id="td8"
								style="text-align: center; vertical-align: middle;padding: 2px;"><button type="button"
									class="btn-primary big-btn" value="Start" id="play8">Start</button>
							</td> -->
						</tr>
						<!-- <tr id="tr9">
							<td style="padding: 2px;"></td>
							<td style="padding-left: 5px;">GL Updation</td>
							<td width="205px;" id="td9"
								style="text-align: center; vertical-align: middle;padding: 2px;"><button type="button"
									class="btn-primary big-btn" value="Start" id="play9">Start</button>
							</td>
						</tr> -->
						<!-- <tr id="tr10">
							<td style="padding: 2px;"></td>
							<td style="padding-left: 5px;">Movement of Transactions</td>
							<td width="205px;" id="td10"
								style="text-align: center; vertical-align: middle;padding: 2px;"><button type="button"
									class="btn-primary big-btn" value="Start" id="play10">Start</button>
							</td>
						</tr> -->
						<tr id="tr11">
							<!-- <td style="padding: 2px;"></td> -->
							<td style="padding-left: 5px;cursor: pointer;" id="dateChangeProcess" >Date Change Process</td>
							<!-- <td width="205px;" id="td11"
								style="text-align: center; vertical-align: middle;padding: 2px;"><button type="button"
									class="btn-primary big-btn" value="Start" id="play11">Start</button>
							</td> -->
						</tr>

						

						<tr id="tr9">
							<!-- <td style="padding: 2px;"><b>Batch Job</b></td> -->
							
							<td style="padding-left: 5px;cursor: pointer;" id="glUpdationBatchJob" >GL Updation</td>
							<!-- <td width="205px;" id="td9"
								style="text-align: center; vertical-align: middle;padding: 2px;"><button type="button"
									class="btn-primary big-btn" value="Start" id="play9">Start</button>
							</td> -->
						</tr>

						<tr id="tr1" style="height: 25px;">
							<!-- <td style="padding: 2px;"></td> -->
							<td style="padding-left: 5px;cursor: pointer;">Interest Accural</td>
							<!-- <td width="205px;" id="td1"
								style="text-align: center; vertical-align: middle; padding: 2px;">
								<button type="button" class="btn-primary big-btn" value="Start" id="play1" onclick="InterestAccural()">
									Start
								</button>
							</td> -->
						</tr>

						<!--<tr id="tr14" style="height: 25px;">
							<td style="padding: 2px;"><b></b></td>
							<td style="padding-left: 5px;">Penalty Accural</td>
							<td width="205px;" id="td14"
								style="text-align: center; vertical-align: middle; padding: 2px;">
								<button type="button" class="btn-primary big-btn" value="Start" id="play14" onclick="PenaltyAccural()">
									Start
								</button>
							</td>
						</tr>-->


						<tr id="tr2">
							<!-- <td style="padding: 2px;"></td> -->
							<td style="padding-left: 5px;cursor: pointer;">Interest Demand Generation</td>
							<!-- <td width="205px;" id="td2"
								style="text-align: center; vertical-align: middle; padding: 2px;"><button type="button"
									class="btn-primary big-btn" value="Start" id="play2"
									onclick="InterestDemandgeneration()">Start</button>
							</td> -->
						</tr>
						<tr id="tr12">
							<!-- <td style="padding: 2px;"></td> -->
							<td style="padding-left: 5px;cursor: pointer;">Fee Demand Generation</td>
							<!-- <td width="205px;" id="td12"
								style="text-align: center; vertical-align: middle; padding: 2px;"><button type="button"
									class="btn-primary big-btn" value="Start" id="play12"
									onclick="FeeDemandgeneration()">Start</button>
							</td> -->
						</tr>
						<tr id="tr13">
							<!-- <td style="padding: 2px;"></td> -->
							<td style="padding-left: 5px;cursor: pointer;">Penalty</td>
							<!-- <td width="205px;" id="td13"
								style="text-align: center; vertical-align: middle; padding: 2px;"><button type="button"
									class="btn-primary big-btn" value="Start" id="play13"
									onclick="PenaltyCheck()">Start</button>
							</td> -->
						</tr>
						<tr id="tr3">
							<!-- <td style="padding: 2px;"></td> -->
							<td style="padding-left: 5px;cursor: pointer;">Other Batch Job</td>
							<!-- <td width="205px;" id="td1"
								style="text-align: center; vertical-align: middle; padding: 2px;"><button type="button"
									class="btn-primary big-btn" value="Start" id="play1" onclick="handleotherbatch()">Start</button>
							</td> -->
						</tr>
					</table>
				</div>
			</div>
			<div id="dialog-confirm" title="Alert" style="display: none">
				<p>
					<span class="glyphicon glyphicon-alert" style="float: left; margin: 12px 12px 20px 0;"></span>This
					date is
					a Holiday!
				</p>
				<p>Do you Want Continue?</p>
			</div>
			<div id="dialog" title="Alert" style="display: none">
				<p>
					<span class="glyphicon glyphicon-alert" style="float: left; margin: 12px 12px 20px 0;"></span>Some
					Process
					are Pending......
				</p>
			</div>
			<div id="dialog1" title="Alert" style="display: none">
				<p>
					<span class="glyphicon glyphicon-alert" style="float: left; margin: 12px 12px 20px 0;"></span>Your
					Transaction Date has not been changed..try again..
				</p>
			</div>
			<div id="dialogdab" title="Alert" style="display: none">
				<p>
					<span class="glyphicon glyphicon-alert" style="float: left; margin: 12px 12px 20px 0;"></span>No
					Transaction Found this date!
				</p>
				<p>Do you Want Continue?</p>
			</div>
			<div class="card-footer text-center">
				<button type="button" class="btn-primary big-btn" id="btnhome">Home</button>
				<button type="button" class="btn-primary big-btn" id="btnrefresh" onclick="refresh()">Refresh</button>
				<button type="button" class="btn-primary big-btn" value="back" id="btnback">Back</button>
			</div>
		</div>
	</div>
	<!-- Suresh : New Models for popup -->
	<div id="journalValidationModal" class="modal fade" tabindex="-1" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title text-center">Journal Entries</h5>
				</div>
				<div class="modal-body">
					<table class="table table-bordered table-hover" id="journalTable">
						<thead>
							<tr>
								<th>VALIDATION</th>
								<th>NO</th>
								<th>AMOUNT</th>
							</tr>
						</thead>
						<tbody id="journalTableBody">
							<!-- Dynamic rows here -->
						</tbody>
					</table>
					<!-- Status message -->
					<div id="journalStatus" class="text-center mt-3">
						<div id="loaderJournal" class="loader2" style="display: none;"></div>
						<div id="successMessageJournal" style="display: none;">
							<h4>Validation Success <span>&#9989;</span></h4>
						</div>
						<div id="failureMessageJournal" style="display: none;">
							<h4>Validation Failed <span>&#10060;</span></h4>
						</div>
					</div>
				</div>
				<div class="modal-footer d-flex justify-content-center">
					<button type="button" class="btn btn-primary px-4" data-dismiss="modal" onclick="refresh()">
						Close
					</button>
				</div>
			</div>
		</div>
	</div>

	<!-- Account Ledger Modal -->
	<div id="ledgerModal" class="modal fade" tabindex="-1" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title text-center">Account Ledger Validation</h5>
				</div>
				<div class="modal-body" id="ledgerModalBody">
					<!-- Dynamic content injected by JS -->
					<div class="text-center my-3">
						<div class="loader"></div>
					</div>
				</div>
				<div class="modal-footer d-flex justify-content-center">
					<button type="button" class="btn btn-primary px-4" data-dismiss="modal" onclick="refresh()">
						Close
					</button>
				</div>
			</div>
		</div>
	</div>

	<div id="holidaySubmitModal" class="modal fade" tabindex="-1" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content" style="width: 700px;">

				<div class="modal-header">
					<h5 class="modal-title text-center">Holiday Check</h5>
				</div>

				<div class="modal-body" id="holidaySubmitModalBody" style="margin: auto;">
				
				</div>

				<div class="modal-footer d-flex justify-content-center">
					<button type="button" class="btn btn-primary px-4" data-dismiss="modal" id="holidayDaySelectSubmit" >
						Submit
					</button>
					<button type="button" class="btn btn-primary px-4" data-dismiss="modal" onclick="refresh()">
						Close
					</button>
				</div>


			</div>
		</div>
	</div>

		<!-- <div id="dabSubmitModal" class="modal fade" tabindex="-1" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content" style="width: 700px;">

				<div class="modal-header">
					<h5 class="modal-title text-center">DAB Date Selection</h5>
				</div>

				<div class="modal-body" id="dabSubmitModalBody" style="margin: auto;">
				
				</div>

				<div class="modal-footer d-flex justify-content-center">
					<button type="button" class="btn btn-primary px-4" data-dismiss="modal" id="dabDaySelectSubmit" >
						Submit
					</button>
					<button type="button" class="btn btn-primary px-4" data-dismiss="modal" onclick="refresh()">
						Close
					</button>
				</div>


			</div>
		</div>
	</div>	 -->

<div id="dabSubmitModal" class="modal fade custom-modal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="modal-title">DAB Date Selection</h5>
        <button type="button" class="btn btn-primary btn-sm" id="toggleFilterBtn" style="display:none;">
          Filter
        </button>
      </div>

      <div class="modal-body" id="dabSubmitModalBody">
        <!-- Step 1 -->
        <div id="dabStep1" style="margin: 0px 200px;">
          <div style="display:flex;align-items:center;">
            <label style="width:100px;"><b>Acct ID :</b></label>
            <input type="text" id="acctSearchInput" class="form-control" style="width:200px;" readonly placeholder="Select Account">
            <input type="hidden" id="acct_num" class="form-control" style="width:200px;" readonly placeholder="Select Account">
            <button type="button" class="btn btn-light" id="openAccountList" style="margin-left:5px;padding:5px;">
              <i class="fa fa-search"></i>
            </button>
          </div>

          <div style="display:flex;margin-top:10px;">
            <label style="width:100px;"><b>From Date :</b></label>
            <input style="width:250px" id="dab_from_date" type="text" class="form-control">
          </div>

          <div style="display:flex;margin-top:10px;">
            <label style="width:100px;"><b>To Date :</b></label>
            <input style="width:250px" id="dab_to_date" type="text" class="form-control" readonly>
          </div>
        </div>

        <!-- Step 2 -->
        <div id="dabStep2" style="display:none;">
          <div style="max-height: 400px; overflow-y: auto;">
            <table class="table table-bordered table-sm" id="accountTable">
              <thead>
                <tr class="filters">
                  <th><input type="text" id="filterAccountNumber" class="form-control font-weight-bold" placeholder="Account Number" disabled></th>
                  <th><input type="text" id="filterAccountName" class="form-control font-weight-bold" placeholder="Account Name" disabled></th>
                </tr>
              </thead>
              <tbody id="accountTableBody">
                <!-- dynamically filled -->
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <div class="modal-footer d-flex justify-content-center">
        <button type="button" class="btn btn-primary px-4 btn-left" id="backToForm" style="display:none;">Back</button>
        <button type="button" class="btn btn-primary px-4" id="dabDaySelectSubmit">Submit</button>
        <button type="button" class="btn btn-primary px-4" data-dismiss="modal" onclick="refresh()">Close</button>
      </div>

    </div>
  </div>
</div>

      <div class="modal-footer d-flex justify-content-center">
        <button type="button" class="btn btn-primary px-4 btn-left" id="backToForm" style="display:none;">Back</button>
        <button type="button" class="btn btn-primary px-4" id="dabDaySelectSubmit">Submit</button>
        <button type="button" class="btn btn-primary px-4" data-dismiss="modal" onclick="refresh()">Close</button>
      </div>

    </div>
  </div>
</div>
	
<div id="myModal" class="modal success2" style="font-size:120%; display:none;" tabindex="99999">
  <div class="modal-content1 filterable">
	
		<button type="button" class="btn text-white btn-filter btn-primary float-right"
              id="toggleFilterBtn" onclick="enableFilter()">Filter</button>

    <div class="panel panel-primary ">
      <div style="max-height: 350px; overflow-y: auto;">
        <table class="table table-bordered table-sm" id="accountTable">
          <thead>
            <tr class="filters">
              <th>
                <input type="text" id="filterAccountNumber" class="form-control font-weight-bold"
                       placeholder="Account Number" disabled>
              </th>
              <th>
                <input type="text" id="filterAccountName" class="form-control font-weight-bold"
                       placeholder="Account Name" disabled>
              </th>
            </tr>
          </thead>
          <tbody id="accountTableBody">
            <!-- rows will be inserted dynamically -->
          </tbody>
        </table>
      </div>

      <div class="text-center mt-2" style="margin-top: 20px;">
        <button type="button" class="btn-primary big-btn" onclick="closeModal()">Close</button>
      </div>
    </div>
  </div>
</div>

	<!-- ----------------------------------------------------------------------------------- -->
	

	<div id="holidayModal" class="modal fade" tabindex="-1" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content">

				<div class="modal-header">
					<h5 class="modal-title text-center">Holiday Check Validation</h5>
				</div>

				<div class="modal-body" id="holidayModalBody">
					<!-- Dynamic content injected by JS -->
					<div class="text-center my-3">
						<div class="loader"></div>
					</div>
				</div>

				<div class="modal-footer d-flex justify-content-center">
					<button type="button" class="btn btn-primary px-4" data-dismiss="modal" onclick="refresh()">
						Close
					</button>
				</div>


			</div>
		</div>
	</div>

	<!-- GL Consolidation Modal -->
	<div id="glConsolidationModal" class="modal fade" tabindex="-1" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content">

				<div class="modal-header">
					<h5 class="modal-title text-center" id="glConsolidationModalTitle">GL Consolidation</h5>
				</div>

				<div class="modal-body" id="glConsolidationModalBody">
					<!-- Dynamic content injected by JS -->
					<div class="text-center my-3">
						<div class="loader"></div>
					</div>
				</div>

				<div class="modal-footer d-flex justify-content-center">
					<button type="button" class="btn btn-primary px-4" data-dismiss="modal" onclick="refresh()">
						Close
					</button>
				</div>


			</div>
		</div>
	</div>

	<!-- Interest Demand Generation Modal -->
	<div id="interestDemandModal" class="modal fade" tabindex="-1" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content">

				<!-- Header -->
				<div class="modal-header">
					<h5 class="modal-title text-center w-100">Interest Demand Generation</h5>
				</div>

				<!-- Body (dynamic content injected by JS) -->
				<div class="modal-body" id="interestDemandBody">
					<div class="text-center my-3">
						<div class="loader"></div>
						<p>Processing, please wait...</p>
					</div>
				</div>

				<!-- Footer (centered Close button with refresh) -->
				<div class="modal-footer d-flex justify-content-center">
					<button type="button" class="btn btn-primary px-4" data-dismiss="modal" onclick="refresh()">
						Close
					</button>
				</div>

			</div>
		</div>
	</div>

	<div id="feeDemandModal" class="modal fade" tabindex="-1" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content">

				<!-- Header -->
				<div class="modal-header">
					<h5 class="modal-title text-center w-100">Fee Demand Generation</h5>
				</div>

				<!-- Body (dynamic content injected by JS) -->
				<div class="modal-body" id="feeDemandBody">
					<div class="text-center my-3">
						<div class="loader"></div>
						<p>Processing, please wait...</p>
					</div>
				</div>

				<!-- Footer (centered Close button with refresh) -->
				<div class="modal-footer d-flex justify-content-center">
					<button type="button" class="btn btn-primary px-4" data-dismiss="modal" onclick="refresh()">
						Close
					</button>
				</div>

			</div>
		</div>
	</div>

	<div id="penaltyCheckModal" class="modal fade" tabindex="-1" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content">

				<!-- Header -->
				<div class="modal-header">
					<h5 class="modal-title text-center w-100">Penalty Check</h5>
				</div>

				<!-- Body (dynamic content injected by JS) -->
				<div class="modal-body" id="penaltyCheckBody">
					<div class="text-center my-3">
						<div class="loader"></div>
						<p>Processing, please wait...</p>
					</div>
				</div>

				<!-- Footer (centered Close button with refresh) -->
				<div class="modal-footer d-flex justify-content-center">
					<button type="button" class="btn btn-primary px-4" data-dismiss="modal" onclick="refresh()">
						Close
					</button>
				</div>

			</div>
		</div>
	</div>

	<div id="InterestAccuralModal" class="modal fade" tabindex="-1" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content">

				<!-- Header -->
				<div class="modal-header">
					<h5 class="modal-title text-center w-100">Interest Accural</h5>
				</div>

				<!-- Body (dynamic content injected by JS) -->
				<div class="modal-body" id="InterestAccuralBody">
					<div class="text-center my-3">
						<div class="loader"></div>
						<p>Processing, please wait...</p>
					</div>
				</div>

				<!-- Footer (centered Close button with refresh) -->
				<div class="modal-footer d-flex justify-content-center">
					<button type="button" class="btn btn-primary px-4" data-dismiss="modal" onclick="refresh()">
						Close
					</button>
				</div>

			</div>
		</div>
	</div>

	<div id="PenaltyAccuralModal" class="modal fade" tabindex="-1" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content">

				<!-- Header -->
				<div class="modal-header">
					<h5 class="modal-title text-center w-100">Penalty Accural</h5>
				</div>

				<!-- Body (dynamic content injected by JS) -->
				<div class="modal-body" id="PenaltyAccuralBody">
					<div class="text-center my-3">
						<div class="loader"></div>
						<p>Processing, please wait...</p>
					</div>
				</div>

				<!-- Footer (centered Close button with refresh) -->
				<div class="modal-footer d-flex justify-content-center">
					<button type="button" class="btn btn-primary px-4" data-dismiss="modal" onclick="refresh()">
						Close
					</button>
				</div>

			</div>
		</div>
	</div>


	<div id="doaTransModal" class="modal fade" tabindex="-1" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content">

				<!-- Header -->
				<div class="modal-header">
					<h5 class="modal-title text-center w-100">Daily Account Balance</h5>
				</div>

				<!-- Body (loader + response text) -->
				<div class="modal-body" id="doaTransModalBody">
					<div class="text-center my-3">
						<div class="loader"></div>
						<p>Processing, please wait...</p>
						<p id="doaResponseText"></p>
					</div>
				</div>

				<!-- Footer -->
				<div class="modal-footer d-flex justify-content-center">
					<button type="button" class="btn btn-primary px-4" data-dismiss="modal" onclick="refresh()">
						Close
					</button>
				</div>

			</div>
		</div>
	</div>


	<div id="otherbatch" class="modal fade" tabindex="-1" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content">

				<!-- Header -->
				<div class="modal-header">
					<h5 class="modal-title text-center w-100">Other Batch Job</h5>
				</div>

				<!-- Body (loader + response text) -->
				<div class="modal-body" id="otherbatchBody">
					<div class="text-center my-3">
						<!-- <div class="loader"></div> -->
						<p style="font-size: 20px;">No Batch job Available</p>
						<!-- <p id="otherbatchResponseText"></p> -->
					</div>
				</div>

				<!-- Footer -->
				<div class="modal-footer d-flex justify-content-center">
					<button type="button" class="btn btn-primary px-4" data-dismiss="modal" onclick="refresh()">
						Close
					</button>
				</div>

			</div>
		</div>
	</div>






	</div>
	</div>
	</div>





	<!--<div id="journalModal" class="modal fade" tabindex="-3" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" style="text-align: center;">Journal
						Entries</h5>
				</div>
				<div class="modal-body">
					 Table for displaying transaction data 
					<table class="table table-bordered table-hover">
						<thead>
							<tr>
								<th>VALIDATION</th>
								<th>NO</th>
								<th>AMOUNT</th>
							</tr>
						</thead>
						<tbody>
							<tr th:if="${chartacc1 != null}" th:each="chartacc1 : ${Valuesfornotransaction}">
								<td>Total No.of.Trans</td>
								<td th:text="${chartacc1[0]}"></td>
								<td th:if="${chartacc1[1] != null}"
									th:text="${#numbers.formatDecimal(chartacc1[1], 1, 'COMMA', 2, 'POINT')}">Amt</td>

							</tr>

							<tr th:each="chartacc2 : ${Valuesfordebit}">
								<td>Dr Transactions</td>
								<td th:text="${chartacc2[0]}"></td>
								<td th:text="${#numbers.formatDecimal(chartacc2[1], 1, 'COMMA', 2, 'POINT')}"></td>
							</tr>
							<tr th:each="chartacc3 : ${ValuesforCredit}">
								<td>Cr Transactions</td>
								<td th:text="${chartacc3[0]}"></td>
								<td th:text="${#numbers.formatDecimal(chartacc3[1], 1, 'COMMA', 2, 'POINT')}"></td>
							</tr>
							<tr th:each="chartacc4 : ${ValuesforDel}">
								<td>Deleted</td>
								<td th:text="${chartacc4}"></td>
							</tr>
							<tr th:each="chartacc5 : ${Valuesforunpost}">
								<td>Unposted</td>
								<td th:text="${chartacc5}"></td>
								<td></td>
							</tr>
						</tbody>



					</table>


					<div th:if="${chartacc5 != null}" th:each="chartacc5 : ${Valuesforunpost}">

						 Loader that will show initially 
						<div id="loader2" class="loader2" style="display: block;"></div>

						 Success Message 
						<div id="successMessage" th:if="${chartacc5 == 0 or chartacc5 == 0.00}" style="display: none;">
							<h4 style="text-align: center;">
								Validation Success <span>&#9989;</span>
							</h4>
							<button type="button" class="btn-primary big-btn" data-dismiss="modal" aria-label="Close"
								style="margin-left: 200px">Close</button>
						</div>

						 Failure Message 
						<div id="failureMessage" th:if="${chartacc5 != 0 and chartacc5 != 0.00}" style="display: none;">
							<h4 style="text-align: center;">
								Validation Failed <span>&#10060;</span>
							</h4>
							<button type="button" class="btn-primary big-btn" data-dismiss="modal" aria-label="Close"
								style="margin-left: 200px">Close</button>
						</div>

					</div>



				</div>
			</div>
		</div>
	</div>-->


	<div id="loader3" class="loader3" style="display: block;"></div>
	<div id="successMessage2" class="modal fade bordered" tabindex="-1" role="dialog">
		<div class="modal-dialog d-flex align-items-center justify-content-center" role="document"
			style="min-height: 100vh;">
			<div class="modal-content text-center">
				<div style="margin-top: 30px; margin-bottom: 30px;">
					<h4>
						Consolidation Successful <span>&#9989;</span>
					</h4>
					<button type="button" class="btn-primary big-btn" data-dismiss="modal" aria-label="Close"
						style="margin-top: 20px;">Close</button>
				</div>
			</div>
		</div>
	</div>

	<div id="failureMessage2" class="modal fade" tabindex="-1" role="dialog">
		<div class="modal-dialog d-flex align-items-center justify-content-center" role="document"
			style="min-height: 100vh;">
			<div class="modal-content text-center">

				<div style="margin-top: 30px; margin-bottom: 30px;">
					<h4 style="text-align: center;">
						Consolidation Failed <span>&#10060;</span>
					</h4>
					<button type="button" class="btn-primary big-btn" data-dismiss="modal" aria-label="Close"
						style="margin-left: 200px">Close</button>
				</div>
			</div>
		</div>
	</div>

	<div id="loader3" class="loader3" style="display: block;"></div>
	<div id="successMessage3" class="modal fade bordered" tabindex="-1" role="dialog">
		<div class="modal-dialog d-flex align-items-center justify-content-center" role="document"
			style="min-height: 100vh;">
			<div class="modal-content text-center">
				<div style="margin-top: 30px; margin-bottom: 30px;">
					<h4>
						Transaction Successful <span>&#9989;</span>
					</h4>
					<button type="button" class="btn-primary big-btn" data-dismiss="modal" aria-label="Close"
						style="margin-top: 20px;">Close</button>
				</div>
			</div>
		</div>
	</div>

	<div id="failureMessage3" class="modal fade" tabindex="-1" role="dialog">
		<div class="modal-dialog d-flex align-items-center justify-content-center" role="document"
			style="min-height: 100vh;">
			<div class="modal-content text-center">

				<div style="margin-top: 30px; margin-bottom: 30px;">
					<h4 style="text-align: center;">
						Transaction Failed <span>&#10060;</span>
					</h4>
					<button type="button" class="btn-primary big-btn" data-dismiss="modal" aria-label="Close"
						style="margin-left: 200px">Close</button>
				</div>
			</div>
		</div>
	</div>


	<div id="journalModal8" class="modal fade" tabindex="-3" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" style="text-align: center;">Consistency Check</h5>
				</div>
				<div class="modal-body">
					<!-- Loader -->
					<div id="loader8" class="loader8" style="display: none; text-align:center; margin:20px 0;">
						<div class="loader"></div>
					</div>

					<!-- Table will be injected here dynamically by JS -->
					<div id="consistencyTable"></div>

					<!-- Validation message will be injected here dynamically by JS -->
					<div id="consistencyMessage" style="text-align: center; margin-top: 10px;"></div>
				</div>
				<div class="modal-footer d-flex justify-content-center">
					<button type="button" class="btn btn-primary px-4" data-dismiss="modal" onclick="refresh()">
						Close
					</button>
				</div>

			</div>
		</div>
	</div>



	<div id="journalModal7" class="modal fade" tabindex="-3" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content" style="max-height: 900px; overflow-y: auto; width: 900px;">
				<div class="modal-header" style="max-height: 900px; overflow-y: auto; width: 900px;">
					<h5 class="modal-title" style="text-align: center;">Journal
						Entries</h5>
				</div>
				<div class="modal-body" style="max-height: 900px; overflow-y: auto; width: 900px;">
					<!-- Table for displaying transaction data -->
					<table class="table table-bordered table-hover">
						<thead>
							<tr>
								<th>Validation</th>
								<th>Account</th>
								<th>count</th>
								<th>Credit</th>
								<th>Debit</th>
								<th>Total</th>
							</tr>
						</thead>
						<tbody>
							<!-- Total Debit Rows -->

							<!-- Debit/Credit Data -->
							<tr th:if="${chartacc7 != null}" th:each="chartacc7 : ${debitCreditData}">
								<td>Account Number</td>
								<td th:text="${chartacc7[0]}"></td>
								<td th:text="${chartacc7[1]}">Total No. of Debit and Credit</td>
								<td th:if="${chartacc7[2] != null}"
									th:text="${#numbers.formatDecimal(chartacc7[2], 1, 'COMMA', 2, 'POINT')}">Net
									Amount</td>
								<td th:if="${chartacc7[2] == null}" th:text="'0.00'">Net
									Amount</td>
								<td th:text="${chartacc7[3]}">Total No. of Debit and Credit</td>
								<td th:text="${chartacc7[4]}">Total No. of Debit and Credit</td>
							</tr>

							<!--  <tr th:if="${chartacc1 != null}" th:each="chartacc1 : ${getWoforDebitValues}">
	               <td>Total Credit</td>
	                  <td></td>
	                <td th:text="${chartacc1[0]}"></td>
	                  <td>0.00</td> 
	                <td th:if="${chartacc1[1] != null}" th:text="${#numbers.formatDecimal(chartacc1[1], 1, 'COMMA', 2, 'POINT')}">Amt</td>
	                           
	                           <td th:if="${chartacc1[1] != null}" th:text="${#numbers.formatDecimal(chartacc1[1], 1, 'COMMA', 2, 'POINT')}">Amt</td>
	           
	       
	            </tr>

	            Total Credit Rows
	            <tr th:if="${chartacc1 != null}" th:each="chartacc1 : ${getWoforcreditValues}">
	                <td>Total Debit</td>
	                <td></td>
	                <td th:text="${chartacc1[0]}"></td>
	               
	                <td th:if="${chartacc1[1] != null}" th:text="${#numbers.formatDecimal(chartacc1[1], 1, 'COMMA', 2, 'POINT')}">Amt</td>
	                    <td>0.00</td>
	                    <td th:if="${chartacc1[1] != null}" th:text="${#numbers.formatDecimal(chartacc1[1], 1, 'COMMA', 2, 'POINT')}">Amt</td>
	           
	            </tr> -->

							<!--           <tr th:if="${chartacc8 != null}" th:each="chartacc8 : ${gettotalValues}">
	                <td>Total Amount</td>
	                <td></td>
	                 <td>0.00</td>
	                  <td>0.00</td>
	                   <td>0.00</td>
	                 
	                <td th:text="${chartacc8[0]}"></td>

	                 
	            </tr> -->

							<tr>
								<td>Total Validation</td>
								<td></td>
								<td th:text="${totaltransaction}"></td>
								<td th:text="${getTotalCredit}"></td>
								<td th:text="${getTotalDebit}"></td>
								<td th:text="${totalamount}"></td>
							</tr>

						</tbody>
					</table>


					<!-- 	<tr th:each="chartacc2 : ${getNetDebitCreditForCurrentDate}">
									<td>Today Net Balance</td>
									<td th:text="${chartacc2[0]}"></td>
									<td
										th:text="${#numbers.formatDecimal(chartacc2[1], 1, 'COMMA', 2, 'POINT')}"></td>
								</tr> -->


					<button class="btn btn-primary p-2" id="Doatranscationbutton" onclick="Doatranscation()"
						style="display: block;">Submit</button>
					<input type="text" id="responseField" hidden />




					<!-- Loader that will show initially -->
					<div id="loader2" class="loader2" style="display: none;"></div>

					<!-- Success Message -->

					<div id="successMessage1" style="display: none;">

						<h4 style="text-align: center;">
							Validation Success <span>&#9989;</span>
						</h4>
						<button type="button" class="btn-primary big-btn" data-dismiss="modal"
							aria-label="Close">Close</button>
					</div>

					<!-- Failure Message -->
					<div id="failureMessage1" style="display: none;">

						<h4 style="text-align: center;">
							Validation Failed <span>&#10060;</span>
						</h4>
						<button type="button" class="btn-primary big-btn" data-dismiss="modal"
							aria-label="Close">Close</button>
					</div>





				</div>
			</div>
		</div>
	</div>


	<div class="modal fade" data-backdrop="false" data-keyboard="false" id="alertsval" tabindex="-1" role="dialog"
		aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
			<div class="modal-content" style="width: 100%; height: 25%;">
				<div class="card">
					<!-- Header with Alert Message -->
					<div class="modal-header" style="justify-content: center; width: 100%;">
						<h5 class="modal-title" id="popupAlert" style="font-size: 13px">

							Alert Message</h5>

						<!-- Alert message will appear here -->
					</div>

					<!-- Body with Response -->
					<div class="modal-body"
						style="text-align: center; display: flex; justify-content: center; align-items: center; height: 100px; overflow-y: auto; font-weight: bold; font-size: 15px">
						<!-- <label>TRAN ID</label>
		<input type="text" id="tran_id_model" th:value="${plusonetran2}" 
		    style="border: none; background: none; outline: none;">
		 -->
						<h6 id="alertmsg1"></h6>
						<!-- Response will be displayed here -->
					</div>

					<!-- Footer with Close Button -->
					<div class="modal-footer" style="justify-content: center; width: 100%;">
						<button type="button" class="btn btn-primary" data-dismiss="modal"
							onclick="refreshPagemulti()">Close</button>
					</div>

				</div>
			</div>
		</div>
	</div>


	<!-- Modal Structure -->
	<div class="modal fade" id="responseModal" tabindex="-1" role="dialog" aria-labelledby="responseModalLabel"
		aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title w-100 text-center" id="responseModalLabel">Account Ledger</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div style="text-align: center; margin: 30px;">
					<b class="modal-body" id="modalBody" style="font-size: 20px;"></b>
				</div>
				<div class="modal-footer ">
					<button type="button" class="btn-primary big-btn" data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>


	<div class="modal fade" id="holidayModal" tabindex="-1" role="dialog" aria-labelledby="responseModalLabel"
		aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title w-100 text-center" id="responseModalLabel">Holiday Master</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div style="text-align: center; margin: 30px;">
					<b class="modal-body" id="holidayBody" style="font-size: 20px;"></b>
				</div>
				<div class="modal-footer ">
					<button type="button" class="btn-primary big-btn" data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="dateChangeProcess" tabindex="-1" role="dialog" aria-labelledby="responseModalLabel"
		aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title w-100 text-center" id="responseModalLabel">Date Change Process</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div style="text-align: center; margin: 30px;">
					<b class="modal-body" id="datechangeModelBody" style="font-size: 20px;"></b>
				</div>
				<div class="modal-footer ">
					<button type="button" class="btn btn-primary px-4" data-dismiss="modal" onclick="refresh()">
						Close
					</button>
				</div>
			</div>
		</div>
	</div>
	<div id="DateChangeModel" class="modal fade" tabindex="-1" role="dialog">
			<div class="modal-dialog" role="document">
				<div class="modal-content">

					<div class="modal-header">
						<h5 class="modal-title text-center">Date Change Operation</h5>
					</div>

					<div class="modal-body" id="DateChangeModelbody">
						<!-- Dynamic content injected by JS -->
						<div class="text-center my-3">
							<div class="loader"></div>
						</div>
					</div>

					<div class="modal-footer d-flex justify-content-center">
						<button type="button" class="btn btn-primary px-4" data-dismiss="modal" onclick="refresh()">
							Close
						</button>
					</div>


				</div>
			</div>
		</div>
</body>
<script>

</script>

</html>