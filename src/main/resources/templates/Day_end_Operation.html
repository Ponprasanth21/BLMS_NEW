<html lang="en" xmlns:th="http://www.thymeleaf.org" th:fragment="summary">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="/ASPIRA/js/jquery.min.js"></script>
	<script src="/ASPIRA/js/jquery-ui.min.js"></script>
	<style>
		.filterable {
			margin-top: 35px;
		}

		.filterable .panel-heading .pull-right {
			margin-top: -20px;
		}

		.filterable .filters input[disabled] {
			background-color: transparent;
			border: none;
			cursor: auto;
			box-shadow: none;
			padding: 0;
			height: auto;
		}

		.btn {
			line-height: 0.5rem;
		}

		.body {
			font-family: calibri;
			font-size: 11px;
			line-height: 1.42857143;
			color: #333;
		}

		.filterable .filters input[disabled]::-webkit-input-placeholder {
			color: #333;
		}

		.filterable .filters input[disabled]::-moz-placeholder {
			color: #333;
		}

		.new-color {
			background-color: rgba(0, 0, 0, .03) !important;
		}

		.filterable .filters input[disabled]:-ms-input-placeholder {
			color: #333;
		}

		.panel-primary>.panel-heading {
			color: #fff;
			background-color: #bbc3cb;
			border-color: #bbc3cb;
		}

		.panel-title {
			font-size: 12px;
			text-align: center;
			color: black;
		}

		.panel-heading {
			padding: 8px;
			height: 38px;
		}

		.form-control {
			font-size: 11px;
			width: 80%;
			height: 25px;
		}

		body {
			font-size: 0.8rem;
		}

		.panel-primary {
			border-color: rgba(18, 18, 19, 0.22);
		}

		.modal-footer {
			text-align: center;
			border-top: 0;
			padding: 25px;
			padding-right: 600px;
		}

		.modal-pass {
			background-color: #fefefe;
			margin: 15% auto;
			padding: 20px;
			border: 1px solid #888;
			width: 40%;
			height: 25%;
			margin-left: 400PX;
			margin-right: auto;
			border-radius: 10px;
			box-shadow: 0px 0px 20px rgba(0, 0, 0, 0.2);
			font-family: Arial, sans-serif;
		}

		.modal {
			overflow: auto;
			background-color: rgba(0, 0, 0, 0.4);
		}

		.glyphicon {
			float: right;
			cursor: pointer;
		}

		.loader {
			width: 30px;
			aspect-ratio: 1;
			display: grid;
			border-radius: 50%;
			background: linear-gradient(0deg, rgb(0 0 0/ 50%) 30%, #0000 0 70%,
					rgb(0 0 0/ 100%) 0) 50%/8% 100%,
				linear-gradient(90deg, rgb(0 0 0/ 25%) 30%, #0000 0 70%,
					rgb(0 0 0/ 75%) 0) 50%/100% 8%;
			background-repeat: no-repeat;
			animation: l23 1s infinite steps(12);
		}

		.loader::before,
		.loader::after {
			content: "";
			grid-area: 1/1;
			border-radius: 50%;
			background: inherit;
			opacity: 0.915;
			transform: rotate(30deg);
		}

		.loader::after {
			opacity: 0.83;
			transform: rotate(60deg);
		}

		@keyframes l23 {
			100% {
				transform: rotate(1turn)
			}

		}

		.loader2 {
			margin-left: 150px;
			width: fit-content;
			font-size: 30px;
			font-family: system-ui, sans-serif;
			font-weight: bold;
			text-transform: uppercase;
			color: #0000;
			text-align: center;
			-webkit-text-stroke: 1px #000;
			background: linear-gradient(90deg, #0000 33%, #000 0 67%, #0000 0) 0/300% 100% no-repeat text;
			animation: l2 2s linear infinite;
			width: fit-content;
		}

		.loader2:before {
			content: "Loading...";
		}

		@keyframes l2 {
			0% {
				background-position: 100%;
			}

		}

		.loader3 {
			margin-left: 150px;
			width: fit-content;
			font-size: 30px;
			font-family: system-ui, sans-serif;
			font-weight: bold;
			text-transform: uppercase;
			color: #0000;
			text-align: center;
			-webkit-text-stroke: 1px #000;
			background: linear-gradient(90deg, #0000 33%, #000 0 67%, #0000 0) 0/300% 100% no-repeat text;
			animation: l2 2s linear infinite;
			width: fit-content;
		}

		.loader3:before {
			content: "Loading...";
		}

		@keyframes l2 {
			0% {
				background-position: 100%;
			}

		}

		.loader8 {
			margin-left: 150px;
			width: fit-content;
			font-size: 30px;
			font-family: system-ui, sans-serif;
			font-weight: bold;
			text-transform: uppercase;
			color: #0000;
			text-align: center;
			-webkit-text-stroke: 1px #000;
			background: linear-gradient(90deg, #0000 33%, #000 0 67%, #0000 0) 0/300% 100% no-repeat text;
			animation: l2 2s linear infinite;
			width: fit-content;
		}

		.loader8:before {
			content: "Loading...";
		}

		.big-btn {
			font-size: 16px;
		}
	</style>
	<style>
		.custom-margin-top {
			margin-top: 1000px;
		}
	</style>
</head>
<script>

	/* function Refresh() {
		window.location.reload();
	} */

	document.addEventListener('DOMContentLoaded', function () {
		// Elements for loader and messages
		var loader = document.getElementById('loader8');
		var successMessage = document.getElementById('successMessage8');
		var failureMessage = document.getElementById('failureMessage8');

		// Show loader for 5-6 seconds (5000-6000 milliseconds)
		setTimeout(function () {
			// Hide loader after 5-6 seconds
			loader.style.display = 'none';

			// Check if the condition is for success or failure
			if (successMessage) {
				successMessage.style.display = 'block'; // Show success message
			} else if (failureMessage) {
				failureMessage.style.display = 'block'; // Show failure message
			}
		}, 3500); // Change this to 6000 if you want 6 seconds
	});

	// Wait for the DOM to load
	document.addEventListener('DOMContentLoaded', function () {
		// Elements for loader and messages
		var loader = document.getElementById('loader2');
		var successMessage = document.getElementById('successMessage');
		var failureMessage = document.getElementById('failureMessage');

		// Show loader for 5-6 seconds (5000-6000 milliseconds)
		setTimeout(function () {
			// Hide loader after 5-6 seconds
			loader.style.display = 'none';

			// Check if the condition is for success or failure
			if (successMessage) {
				successMessage.style.display = 'block'; // Show success message
			} else if (failureMessage) {
				failureMessage.style.display = 'block'; // Show failure message
			}
		}, 3500); // Change this to 6000 if you want 6 seconds
	});


	document.addEventListener('DOMContentLoaded', function () {
		var loader = document.getElementById('loader3');
		var successMessage2 = document.getElementById('successMessage2');
		var failureMessage2 = document.getElementById('failureMessage2');

		// Function to check balances and display messages
		function checkBalances() {
			const accountCredit = document.getElementById("accountCredit").innerText;
			const accountDebit = document.getElementById("accountDebit").innerText;
			const glCredit = document.getElementById("glCredit").innerText;
			const glDebit = document.getElementById("glDebit").innerText;

			console.log("accountCredit: " + accountCredit);
			console.log("accountDebit: " + accountDebit);
			console.log("glCredit: " + glCredit);
			console.log("glDebit: " + glDebit);

			// Convert to numbers for comparison
			const accOpen = parseFloat(accountCredit.replace(/,/g, ''));
			const accClose = parseFloat(accountDebit.replace(/,/g, ''));
			const glC = parseFloat(glCredit.replace(/,/g, ''));
			const glD = parseFloat(glDebit.replace(/,/g, ''));

			console.log("accOpen: " + accOpen);
			console.log("accClose: " + accClose);
			console.log("glC: " + glC);
			console.log("glD: " + glD);


			if (accOpen === glC && accClose === glD) {
				successMessage2.style.display = "block";
				failureMessage2.style.display = "none";
			} else {
				failureMessage2.style.display = "block";
				successMessage2.style.display = "none";
			}
		}

		// Show loader for 3.5 seconds (3500 milliseconds)
		setTimeout(function () {
			// Hide loader after 3.5 seconds
			loader.style.display = 'none';

			// Call the checkBalances function after loader is hidden
			checkBalances();
		}, 4500); // Adjust to 6000 if you want 6 seconds
	});





	// Set the next date when the page loads
	window.onload = setNextDate;


	// Set the next date when the page loads
	window.onload = setNextDate;
</script>




<script>

	function DateChangeProcess() {
		alert("Play11");

		// Hide the start button
		$("#play11").hide();

		// Remove any existing loader cell
		$('#td11').remove();

		// Append loader while waiting for response
		$('#tr11').append(
			'<td width="205px;" id="td11" style="text-align: center;padding-left:80px;"><div class="loader"></div></td>'
		);

		// Fake delay: replace loader with tick after 2s
		setTimeout(function () {
			$('#td11').html(
				'<td style="text-align: center;font-size: 20px;padding:0px;margin:0px">&#9989;</td>'
			);
		}, 2000);

		var trndate = $("#nxtdate").val();
		console.log("Selected Date:", trndate);

		// AJAX call
		$.ajax({
			url: "dateChageProcess",  // ✅ backend Spring Boot endpoint
			type: 'POST',
			data: {trndate: trndate},
			dataType: "json",
			success: function (res) {
				console.log("success: " + res);
				$('#td11').remove();

				// Show response in modal
				$('#datechangeModelBody').text("Your Tranaction Date has been successfully changed");
				$('#dateChangeProcess').modal('show');

				// Append success tick
				$('#tr11').append(
					'<td style="text-align: center;font-size: 20px;padding:0px;margin:0px">&#9989;</td>'
				);
			},
			error: function (xhr, status, error) {
				console.error("error:", error);
				$('#td11').remove();

				// Show error in modal
				$('#datechangeModelBody').text("An error occurred while processing your request.");
				$('#dateChangeProcess').modal('show');

				// Append cross mark
				$('#tr11').append(
					'<td style="text-align: center;font-size: 20px;padding:0px;margin:0px">&#10060;</td>'
				);
			}
		});
	}


	function Doatranscation() {
		//alert("Doatranscation");

		var trndate = $("#current_date").val();
		console.log("Selected Date:", trndate);
		$.ajax({
			url: "Doatransactionpush",
			type: 'POST',
			data: {trndate: trndate},
			dataType: "json",
			success: function (responseText) {
				//  alert(responseText);  

				// Store responseText in the input field
				var responseField = document.getElementById("responseField");

				// Set the response text as the value of the input field
				responseField.value = responseText;

				// Display the updated value for debugging
				// alert(responseField.value + " responseField");

				// Elements for success and failure messages
				var loader = document.getElementById('loader2');
				//alert("hihihi")
				var successMessage = document.getElementById('successMessage1');
				var failureMessage = document.getElementById('failureMessage1');
				var button = document.getElementById('Doatranscationbutton');

				// Initially hide both messages and loader
				loader.style.display = 'block';
				button.style.display = 'none';


				/*        setTimeout(function() {
						   //alert("timeout")
						   loader.style.display = 'none';
					   	

						   // Check the responseField value to display the appropriate message
						   if (responseField.value === 'Account balances successfully inserted') {
							   successMessage.style.display = 'block';
						   } else {
							   failureMessage.style.display = 'block';
						   }
					   }, 500); */
				if (responseField.value === 'Account balances successfully inserted') {
					$("#alertmsg1").text("Account balances successfully inserted");
				} else {
					$("#alertmsg1").text("Account balances not successfully inserted");
				}
				$('#alertsval').modal("toggle");
			},
			error: function (xhr, status, error) {
				alert("Error: " + error);
			}
		});
	}



	function refresh() {
		window.location.reload();
	}


</script>

<script>
	function formatAmount(value) {
		if (value == null) return "0.00";
		return parseFloat(value).toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});
	}

	function ConsistencyCheck() {
		alert("ConsistencyCheck");
		$("#play8").hide();
		$('#td8').remove();
		$('#journalModal8').modal('show');

		// Append loader
		$('#tr8').append('<td width="205px;" id="td8" style="text-align: center; padding-left:80px;"><div class="loader"></div></td>');

		var trndate = $("#current_date").val();
		console.log("Selected Date:", trndate);

		$.ajax({
			url: "/ASPIRA/consistencyCheck",
			type: "POST",
			data: {trndate: trndate},
			dataType: "json",
			success: function (res) {
				console.log("ConsistencyCheck Response:", res);

				$('#td8').html('<td style="text-align: center; font-size: 20px;">&#9989;</td>');


				// Build table dynamically with formatted amounts
				var tableHtml = '<table class="table table-bordered table-hover">' +
					'<thead><tr><th>VALIDATION</th><th>CREDIT AMOUNT</th><th>DEBIT AMOUNT</th></tr></thead><tbody>';

				tableHtml += '<tr><td>TRM Balance</td>' +
					'<td>' + formatAmount(res.custcheck1[0][0]) + '</td>' +
					'<td>' + formatAmount(res.custcheck1[0][1]) + '</td></tr>';

				tableHtml += '<tr><td>COA Balance</td>' +
					'<td>' + formatAmount(res.custcheck2[0][0]) + '</td>' +
					'<td>' + formatAmount(res.custcheck2[0][1]) + '</td></tr>';

				tableHtml += '<tr><td>DAB Balance</td>' +
					'<td>' + formatAmount(res.custcheck3[0][0]) + '</td>' +
					'<td>' + formatAmount(res.custcheck3[0][1]) + '</td></tr>';

				tableHtml += '</tbody></table>';

				// Inject table into modal
				$("#journalModal8 .modal-body").html(tableHtml);

				// Validation messages
				if (res.custcheck1[0][0] === res.custcheck2[0][0]) {
					$("#journalModal8 .modal-body").append('<div style="text-align:center; margin-top:10px;"><h4 style="color:green;">Validation Success &#9989;</h4></div>');
				} else {
					$("#journalModal8 .modal-body").append('<div style="text-align:center; margin-top:10px;"><h4 style="color:red;">Validation Failed &#10060;</h4></div>');
				}

			},
			error: function () {
				$('#td8').html('<td style="text-align: center; font-size: 20px;">&#10060;</td>');
			}
		});
	}



	function AccountLedgerValidate() {
		// Hide the start button
		$("#play5").hide();

		// Remove any existing loader cell
		$('#td5').remove();

		// Append loader
		$('#tr5').append(
			'<td width="205px;" id="td5" style="text-align: center; padding-left:80px;"><div class="loader"></div></td>'
		);

		var trndate = $("#current_date").val();
		console.log("Selected Date:", trndate);

		// AJAX request
		$.ajax({
			url: "accountLedgerdayend",
			type: 'POST',
			data: {trndate: trndate},
			dataType: "json",
			success: function (res) {
				console.log("Account Ledger Response:", res);

				// Remove loader and replace with tick
				$('#td5').remove();
				$('#tr5').append('<td style="text-align:center; font-size:20px;">&#9989;</td>');

				// Build table for modal dynamically
				var tableHtml = `
                <table class="table table-bordered table-hover text-center">
                    <thead class="thead-light">
                        <tr>
                            <th>TABLE</th>
                            <th>COUNT</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>${res.table}</td>
                            <td>${res.count}</td>
                        </tr>
                    </tbody>
                </table>
                <div style="text-align:center; margin-top:10px;">
                    <h5 style="color:green;">${res.message} &#9989;</h5>
                </div>
            `;

				// Inject content into modal
				$("#ledgerModalBody").html(tableHtml);

				// Show modal
				$("#ledgerModal").modal("show");
			},
			error: function (xhr, status, error) {
				console.error("AJAX error:", status, error);

				// Remove loader and show failure icon
				$('#td5').remove();
				$('#tr5').append('<td style="text-align:center; font-size:20px;">&#10060;</td>');

				// Show error message
				$("#ledgerModalBody").html(`
                <div style="text-align:center; font-size:18px; color:red;">
                    An error occurred while processing your request. &#10060;
                </div>
            `);
				$("#ledgerModal").modal("show");
			}
		});
	}


	function HolidayCheckValidate() {
		// Hide the start button
		$("#play6").hide();

		// Remove any existing loader cell
		$('#td6').remove();

		// Append loader while waiting
		$('#tr6').append('<td width="205px;" id="td6" style="text-align: center; padding-left:80px;"><div class="loader"></div></td>');

		var trndate = $("#nxtdate").val();
		console.log("Selected Date:", trndate);

		// Show modal with loader
		$('#holidayModalBody').html('<div class="text-center my-3"><div class="loader"></div><p class="mt-2">Checking for holiday...</p></div>');
		$('#holidayModal').modal('show');

		// AJAX request
		$.ajax({
			url: "holidayCheck",
			type: 'POST',
			data: {trndate: trndate},
			dataType: "text",
			success: function (res) {
				console.log("HolidayCheck Response:", res);

				// Remove loader from table row
				$('#td6').remove();

				// Replace modal body content with result
				$('#holidayModalBody').html('<h5 class="text-center">' + res + '</h5>');

				// Show ✅ or ❌ based on response
				// if (res.includes("Holiday") || res.includes("Weekend")) {
				//     $('#tr6').append('<td style="text-align:center; font-size:20px;">&#9989;</td>');
				// } else {
				$('#tr6').append('<td style="text-align:center; font-size:20px;">&#9989;</td>');
				// }
			},
			error: function (xhr, status, error) {
				console.error("HolidayCheck Error:", error);
				$('#td6').remove();

				$('#holidayModalBody').html('<h5 class="text-center text-danger">❌ An error occurred while processing your request.</h5>');
				$('#tr6').append('<td style="text-align:center; font-size:20px;">&#10060;</td>');
			}
		});
	}

	function GlconsolidationCheck() {
		// Hide the start button
		$("#play9").hide();

		// Remove any existing loader
		$('#td9').remove();

		// Append the loader before the AJAX call
		$('#tr9').append('<td width="205px;" id="td9" style="text-align: center;padding-left:80px;"><div class="loader"></div></td>');

		$.ajax({
			url: "glconsolidation",
			type: 'GET',
			async: true,
			success: function (res) {
				console.log(res);

				// Remove the loader
				$('#td9').remove();

				// Append a success icon
				$('#tr9').append('<td style="text-align: center;font-size: 20px;padding:0px;margin:0px">&#9989;</td>');

				// Update modal content with the response string
				$('#glConsolidationModalTitle').text('GL Consolidation');
				$('#glConsolidationModalBody').html('<div class="text-center my-3" style="text-align: center;font-size: 20px;padding:0px;margin:0px">' + res + '</div>');

				// Show the modal after 1 second
				setTimeout(function () {
					$('#glConsolidationModal').modal('show');
				}, 1000);
			},
			error: function (xhr, status, error) {
				// Remove the loader
				$('#td9').remove();

				// Append a failure icon
				$('#tr9').append('<td style="text-align: center;font-size: 20px;padding:0px;margin:0px">&#10060;</td>');

				// Update modal content with the error message
				$('#glConsolidationModalTitle').text('GL Consolidation');
				$('#glConsolidationModalBody').html('<div class="text-center my-3">' + xhr.responseText + '</div>');

				// Show the modal after 1 second
				setTimeout(function () {
					$('#glConsolidationModal').modal('show');
				}, 1000);
			}

		});
	}


	function MovementofTransaction() {
		// Hide the start button
		$("#play10").hide();

		// Remove any existing loader
		$('#td10').remove();

		// Append the custom CSS loader while waiting for the AJAX response
		$('#tr10').append('<td width="205px;" id="td10" style="text-align: center;padding-left:80px;"><div class="loader"></div></td>');

		var trndate = $("#current_date").val();
		console.log("Selected Date:", trndate);
		// Send AJAX request
		$.ajax({
			url: "movementoftransaction",
			type: 'POST',
			data: {trndate: trndate},
			dataType: "json",
			success: function (res) {
				// Remove loader
				$('#td10').remove();

				// Append a success icon
				$('#tr10').append('<td style="text-align: center;font-size: 20px;padding:0px;margin:0px">&#9989;</td>');

				// Show the success modal after 1 second
				setTimeout(function () {
					$('#successMessage3').modal('show');
				}, 1000);
			},
			error: function (xhr, status, error) {
				// Remove the loader if it's there
				$('#td10').remove();

				// Append a failure icon
				$('#tr10').append('<td style="text-align: center;font-size: 20px;padding:0px;margin:0px">&#10060;</td>');

				// Show the failure modal after 1 second
				setTimeout(function () {
					$('#failureMessage3').modal('show');
				}, 1000);
			}
		});
	}


	function InterestDemandgeneration() {
		// Open modal
		$('#interestDemandModal').modal('show');

		// Show loader initially
		$('#interestDemandBody').html('<div class="loader"></div><p>Processing, please wait...</p>');

		var values = {
			"MIG_DATE": $("#current_date").val()
		};

		$.ajax({
			url: "intrestDemandgeneration",
			data: values,
			dataType: 'json',
			type: 'POST',
			async: true,
			success: function (res) {
				// Remove loader after response
				$('#interestDemandBody').empty();

				if (res.tranval === "Valid") {
					$('#interestDemandBody').html(`
                    <img src="../image/check.png" width="50" alt="Success" class="img-thumbnail">
                    <h5 class="mt-3 text-success">Interest demand generated successfully!</h5>
                `);
				} else {
					$('#interestDemandBody').html(`
                    <img src="../image/uncheck.png" width="50" alt="Failed" class="img-thumbnail">
                    <h5 class="mt-3 text-danger">Interest demand generation failed.</h5>
                `);
				}
			},
			error: function () {
				$('#interestDemandBody').html(`
                <img src="../image/uncheck.png" width="50" alt="Error" class="img-thumbnail">
                <h5 class="mt-3 text-danger">An error occurred while processing your request.</h5>
            `);
			}
		});
	}


</script>
<script>

	function handleJournalValidation(triggerBtnId, loaderRowId, loaderCellId, modalId) {
		// Hide Start button
		const $btn = $('#' + triggerBtnId);
		$btn.hide();

		// Show loader
		$('#loader2').show();

		// Hide previous messages
		$('#successMessageJournal').hide();
		$('#failureMessageJournal').hide();

		// Show modal
		$('#' + modalId).modal('show');

		// AJAX: Journal Validation
		$.ajax({
			url: '/ASPIRA/journalvalid',
			type: 'POST',
			contentType: 'application/json',
			data: JSON.stringify({}), // no date required
			success: function (res) {
				console.log('Journal Validation Response:', res);

				// Hide loader
				$('#loader2').hide();

				// Populate modal table
				const $tbody = $('#journalTableBody');
				$tbody.empty();

				// Total transactions
				if (res.Valuesfornotransaction) {
					res.Valuesfornotransaction.forEach(item => {
						$tbody.append('<tr><td>Total No.of.Trans</td><td>' + item[0] + '</td><td>' + (item[1] || '') + '</td></tr>');
					});
				}

				// Debit
				if (res.Valuesfordebit) {
					res.Valuesfordebit.forEach(item => {
						$tbody.append('<tr><td>Dr Transactions</td><td>' + item[0] + '</td><td>' + item[1] + '</td></tr>');
					});
				}

				// Credit
				if (res.ValuesforCredit) {
					res.ValuesforCredit.forEach(item => {
						$tbody.append('<tr><td>Cr Transactions</td><td>' + item[0] + '</td><td>' + item[1] + '</td></tr>');
					});
				}

				// Deleted
				$tbody.append('<tr><td>Deleted</td><td>' + res.ValuesforDel + '</td><td></td></tr>');

				// Unposted
				// $tbody.append('<tr><td>Unposted</td><td>' + res.Valuesforunpost + '</td><td></td></tr>');

				// Show Success or Failure
				if (res.Valuesforunpost == 0 || res.Valuesforunpost == 0.00) {
					$('#successMessageJournal').show();
					$('#' + loaderCellId).html('&#9989;'); // tick

					// Call separate function for control check & dcp update
					runControlCheckAndDCPUpdate();

				} else {
					$('#failureMessageJournal').show();
					$('#' + loaderCellId).html('&#10060;'); // cross

					// Call separate function for control check & dcp update
					runControlCheckAndDCPUpdate();
				}

			},
			error: function (err) {
				console.error('Journal Validation AJAX Error:', err);
				$('#loader2').hide();
				$('#failureMessageJournal').show();
				$('#' + loaderCellId).html('&#10060;'); // cross
			}
		});
	}





</script>
<script>
	document.addEventListener("DOMContentLoaded", function () {
		// Get the current date from the input field
		const currentDateStr = $("#current_date").val();
		const [day, month, year] = currentDateStr.split('-');
		const currentDate = new Date(year, month - 1, day);

		// Calculate next date (current date + 1 day)
		const nextDate = new Date(currentDate);
		nextDate.setDate(currentDate.getDate() + 1);

		// Format date as dd-MM-yyyy
		function formatDate(date) {
			let dd = String(date.getDate()).padStart(2, '0');
			let mm = String(date.getMonth() + 1).padStart(2, '0');
			let yyyy = date.getFullYear();
			return `${dd}-${mm}-${yyyy}`;
		}

		// Set default values
		const nxtdate = formatDate(nextDate);

		// Initialize the jQuery UI Datepicker without minDate restriction
		$("#nxtdate").datepicker({
			dateFormat: 'dd-mm-yy',
			changeMonth: true,
			changeYear: true
			// Removed minDate to allow all dates including past dates
		});

		// Set default date in input (next date of current_date)
		$("#nxtdate").val(nxtdate);
	});
</script>

<script th:inline="javascript">
	$(document).ready(function () {
		var journalStatus = /*[[${Journal}]]*/ '';
		var accountLedger = /*[[${AccountLedger}]]*/ '';
		var HolidayCheck = /*[[${HolidayCheck}]]*/ '';
		var Dab = /*[[${DAB}]]*/ '';
		var consistencyCheck = /*[[${ConsistencyCheck}]]*/ '';
		var movementofTransaction = /*[[${MovementofTransaction}]]*/ '';
		var GlConsolidation = /*[[${GlConsolidation}]]*/ '';
		var dcpstatus =/*[[${dcpstatus}]]*/ '';
		console.log("Journal Status: " + journalStatus);

		// ✅ Replace Start button with tick if completed
		if (journalStatus && journalStatus.toString().toUpperCase() === "COMPLETED" && dcpstatus && dcpstatus.toString().toUpperCase() !== "OPEN") {
			$('#td4').html('<span style="font-size: 20px; text-align:center;">&#9989;</span>');
		}

		if (accountLedger && accountLedger.toString().toUpperCase() === "COMPLETED" && dcpstatus && dcpstatus.toString().toUpperCase() !== "OPEN") {
			$('#td5').html('<span style="font-size: 20px; text-align:center;">&#9989;</span>');
		}

		if (HolidayCheck && HolidayCheck.toString().toUpperCase() === "COMPLETED" && dcpstatus && dcpstatus.toString().toUpperCase() !== "OPEN") {
			$('#td6').html('<span style="font-size: 20px; text-align:center;">&#9989;</span>');
		}

		if (Dab && Dab.toString().toUpperCase() === "COMPLETED" && dcpstatus && dcpstatus.toString().toUpperCase() !== "OPEN") {
			$('#td7').html('<span style="font-size: 20px; text-align:center;">&#9989;</span>');
		}

		if (consistencyCheck && consistencyCheck.toString().toUpperCase() === "COMPLETED" && dcpstatus && dcpstatus.toString().toUpperCase() !== "OPEN") {
			$('#td8').html('<span style="font-size: 20px; text-align:center;">&#9989;</span>');
		}

		if (movementofTransaction && movementofTransaction.toString().toUpperCase() === "COMPLETED" && dcpstatus && dcpstatus.toString().toUpperCase() !== "OPEN") {
			$('#td10').html('<span style="font-size: 20px; text-align:center;">&#9989;</span>');
		}

		if (GlConsolidation && GlConsolidation.toString().toUpperCase() === "COMPLETED" && dcpstatus && dcpstatus.toString().toUpperCase() !== "OPEN") {
			$('#td9').html('<span style="font-size: 20px; text-align:center;">&#9989;</span>');
		}

		$(document).on("click", "#play4, #play5, #play6, #play7, #play8, #play9, #play10, #play11", function () {
			callDcpUpdate();
		});


		function callDcpUpdate() {
			alert("called");
			const currentDate = $("#current_date").val();
			const nextDate = $("#nxtdate").val();
			const user = $("#userid").val();

			const values = {
				"user": user,
				"trndate": currentDate,
				"nxtdate": nextDate
			};

			// ✅ POST: dcpupdate	
			$.ajax({
				url: "/ASPIRA/dcpupdate",
				type: 'POST',
				contentType: 'application/json',
				data: JSON.stringify(values),
				dataType: 'json',
				success: function (res2) {
					console.log("✅ dcpupdate Response:", res2);
				},
				error: function (err2) {
					console.error("❌ dcpupdate AJAX Error:", err2);
				}
			});
		}

		$(document).on("click", "#play11", function () {
			DateChangeProcess();
		});
		$(document).on("click", "#play4", function () {
			handleJournalValidation('play4', 'tr4', 'td4', 'journalValidationModal');
		});

		$(document).on("click", "#play5", function () {
			AccountLedgerValidate();
		});

		$(document).on("click", "#play6", function () {
			HolidayCheckValidate();
		});
		$(document).on("click", "#play7", function () {
			Doatranscation();
		});

		$(document).on("click", "#play8", function () {
			ConsistencyCheck();
		});
		$(document).on("click", "#play9", function () {
			GlconsolidationCheck();
		});
		$(document).on("click", "#play10", function () {
			MovementofTransaction();
		});
	});

</script>
</head>
<title>BGLS</title>

<body>
	<div class="col-sm-2">
		<div th:insert="BGLSHeaderMenu :: header"></div>
	</div>
	<div class="container " style="margin-top: 100px">

		<div class="card border panel panel-primary filterable" style="width: 1400px">
			<div class="card-header " style="height: 50px">
				<div class="panel-heading text-left" id="modheadtitle">
					<b style="font-size: 1.2rem;text-align:left;">DAY END OPERATION</b> <span
						class="glyphicon glyphicon-question-sign" onclick="open1()"></span>
				</div>


			</div>
			<div class="card-body">
				<div class="panel panel-primary">
					<div class="panel-heading new-color" style="height: 50px">
						<div class="form-group ">
							<div class="row col-sm-12 ">
								<div class="col-sm-1 "></div>
								<label class="col-sm-2">
									<font size="4" color="black">Current Date</font><span
										style="color: red; font-size: 19px;" class="mant">*</span>
								</label>

								<div class="col-sm-3 ">
									<input type="text" style="font-size: 15px; width: 150px;margin-bottom: 20px;"
										id="current_date" th:value="${#dates.format(session.TRANDATE, 'dd-MM-yyyy')}"
										class="form-control" readonly />

									<input type="hidden" id="" th:value="${Userid}" />
								</div>

								<label class="col-sm-2 control-label" style="margin-top: 4px;">
									<font size="4" color="black">Next Working Date</font><span
										style="color: red; font-size: 19px;" class="mant">*</span>
								</label>

								<div class="col-sm-3 ">
									<input type="text" name="nxtdate" id="nxtdate" class="form-control "
										style="font-size: 15px; width: 150px;margin-bottom: 15px;" />
								</div>
							</div>

						</div>

					</div>

					<table class="table table-bordered" id="desc">



						<tr id="tr4">
							<td style="padding: 2px;"><b>Validation</b></td>
							<td style="padding-left: 5px;">Journal</td>
							<td width="205px" id="td4"
								style="text-align: center; vertical-align: middle; padding: 2px;">
								<button type="button" class="btn-primary big-btn" id="play4">
									Start
								</button>
							</td>
						</tr>
						<tr id="tr5">
							<td style="padding: 2px;"></td>
							<td style="padding-left: 5px;">Account Ledger</td>
							<td width="205px;" id="td5"
								style="text-align: center; vertical-align: middle;padding: 2px;"><button type="button"
									class="btn-primary big-btn" id="play5">Start</button>
							</td>
						</tr>
						<tr id="tr6">
							<td style="padding: 2px;"></td>
							<td style="padding-left: 5px;">Holiday Check</td>
							<td width="205px;" id="td6"
								style="text-align: center; vertical-align: middle;padding: 2px;"><button type="button"
									class="btn-primary big-btn" id="play6">Start</button>
							</td>
						</tr>
						<tr id="tr7">
							<td style="padding: 2px;"><b>Steps</b></td>
							<td style="padding-left: 5px;">Daily Account Balance</td>
							<td width="205px;" id="td7"
								style="text-align: center; vertical-align: middle;padding: 2px;">
								<button type="button" class="btn-primary big-btn" value="Start"
									id="play7">Start</button>
							</td>
						</tr>
						<tr id="tr8">
							<td style="padding: 2px;"></td>
							<td style="padding-left: 5px;">Consistency Check</td>
							<td width="205px;" id="td8"
								style="text-align: center; vertical-align: middle;padding: 2px;"><button type="button"
									class="btn-primary big-btn" value="Start" id="play8">Start</button>
							</td>
						</tr>
						<tr id="tr9">
							<td style="padding: 2px;"></td>
							<td style="padding-left: 5px;">GL Consolidation</td>
							<td width="205px;" id="td9"
								style="text-align: center; vertical-align: middle;padding: 2px;"><button type="button"
									class="btn-primary big-btn" value="Start" id="play9">Start</button>
							</td>
						</tr>
						<tr id="tr10">
							<td style="padding: 2px;"></td>
							<td style="padding-left: 5px;">Movement of Transactions</td>
							<td width="205px;" id="td10"
								style="text-align: center; vertical-align: middle;padding: 2px;"><button type="button"
									class="btn-primary big-btn" value="Start" id="play10">Start</button>
							</td>
						</tr>
						<tr id="tr11">
							<td style="padding: 2px;"></td>
							<td style="padding-left: 5px;">Date Change Process</td>
							<td width="205px;" id="td11"
								style="text-align: center; vertical-align: middle;padding: 2px;"><button type="button"
									class="btn-primary big-btn" value="Start" id="play11">Start</button>
							</td>
						</tr>

						<tr id="tr1" style="height: 25px;">
							<td style="padding: 2px;"><b>Batch Job</b></td>
							<td style="padding-left: 5px;">Interest Accural</td>
							<td width="205px;" id="td1"
								style="text-align: center; vertical-align: middle; padding: 2px;">
								<button type="button" class="btn-primary big-btn" value="Start" id="play1">
									Start
								</button>
							</td>
						</tr>


						<tr id="tr2">
							<td style="padding: 2px;"></td>
							<td style="padding-left: 5px;">Interest Demand Generation</td>
							<td width="205px;" id="td2"
								style="text-align: center; vertical-align: middle; padding: 2px;"><button type="button"
									class="btn-primary big-btn" value="Start" id="play2"
									onclick="InterestDemandgeneration()">Start</button>
							</td>
						</tr>
						<tr id="tr3">
							<td style="padding: 2px;"></td>
							<td style="padding-left: 5px;">Fee Demand Generation</td>
							<td width="205px;" id="td3"
								style="text-align: center; vertical-align: middle; padding: 2px;"><button type="button"
									class="btn-primary big-btn" value="Start" id="play3">Start</button>
							</td>
						</tr>
						<tr id="tr3">
							<td style="padding: 2px;"></td>
							<td style="padding-left: 5px;">Penalty</td>
							<td width="205px;" id="td3"
								style="text-align: center; vertical-align: middle; padding: 2px;"><button type="button"
									class="btn-primary big-btn" value="Start" id="play3">Start</button>
							</td>
						</tr>
						<tr id="tr3">
							<td style="padding: 2px;"></td>
							<td style="padding-left: 5px;">Other Batch Job</td>
							<td width="205px;" id="td1"
								style="text-align: center; vertical-align: middle; padding: 2px;"><button type="button"
									class="btn-primary big-btn" value="Start" id="play1">Start</button>
							</td>
						</tr>
					</table>
				</div>


			</div>
			<div id="dialog-confirm" title="Alert" style="display: none">
				<p>
					<span class="glyphicon glyphicon-alert" style="float: left; margin: 12px 12px 20px 0;"></span>This
					date is
					a Holiday!
				</p>
				<p>Do you Want Continue?</p>
			</div>
			<div id="dialog" title="Alert" style="display: none">
				<p>
					<span class="glyphicon glyphicon-alert" style="float: left; margin: 12px 12px 20px 0;"></span>Some
					Process
					are Pending......
				</p>
			</div>
			<div id="dialog1" title="Alert" style="display: none">
				<p>
					<span class="glyphicon glyphicon-alert" style="float: left; margin: 12px 12px 20px 0;"></span>Your
					Transaction Date has not been changed..try again..
				</p>
			</div>
			<div id="dialogdab" title="Alert" style="display: none">
				<p>
					<span class="glyphicon glyphicon-alert" style="float: left; margin: 12px 12px 20px 0;"></span>No
					Transaction Found this date!
				</p>
				<p>Do you Want Continue?</p>
			</div>
			<div class="card-footer text-center">

				<button type="button" class="btn-primary big-btn" id="btnhome">Home</button>

				<button type="button" class="btn-primary big-btn" id="btnrefresh" onclick="refresh()">Refresh</button>

				<button type="button" class="btn-primary big-btn" value="back" id="btnback">Back</button>

			</div>
		</div>
	</div>






	<!-- Suresh : New Models for popup -->

	<div id="journalValidationModal" class="modal fade" tabindex="-1" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content">

				<div class="modal-header">
					<h5 class="modal-title text-center">Journal Entries</h5>
				</div>

				<div class="modal-body">
					<table class="table table-bordered table-hover" id="journalTable">
						<thead>
							<tr>
								<th>VALIDATION</th>
								<th>NO</th>
								<th>AMOUNT</th>
							</tr>
						</thead>
						<tbody id="journalTableBody">
							<!-- Dynamic rows here -->
						</tbody>
					</table>

					<!-- Status message -->
					<div id="journalStatus" class="text-center mt-3">
						<div id="loaderJournal" class="loader2" style="display: none;"></div>

						<div id="successMessageJournal" style="display: none;">
							<h4>Validation Success <span>&#9989;</span></h4>
						</div>

						<div id="failureMessageJournal" style="display: none;">
							<h4>Validation Failed <span>&#10060;</span></h4>
						</div>
					</div>
				</div>

				<div class="modal-footer">
					<button type="button" class="btn-primary big-btn" data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>


	<!-- Account Ledger Modal -->
	<div id="ledgerModal" class="modal fade" tabindex="-1" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content">

				<div class="modal-header">
					<h5 class="modal-title text-center">Account Ledger Validation</h5>
				</div>

				<div class="modal-body" id="ledgerModalBody">
					<!-- Dynamic content injected by JS -->
					<div class="text-center my-3">
						<div class="loader"></div>
					</div>
				</div>

				<div class="modal-footer">
					<button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
				</div>

			</div>
		</div>
	</div>

	<div id="holidayModal" class="modal fade" tabindex="-1" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content">

				<div class="modal-header">
					<h5 class="modal-title text-center">Holiday Check Validation</h5>
				</div>

				<div class="modal-body" id="holidayModalBody">
					<!-- Dynamic content injected by JS -->
					<div class="text-center my-3">
						<div class="loader"></div>
					</div>
				</div>

				<div class="modal-footer">
					<button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
				</div>

			</div>
		</div>
	</div>

	<!-- GL Consolidation Modal -->
	<div id="glConsolidationModal" class="modal fade" tabindex="-1" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content">

				<div class="modal-header">
					<h5 class="modal-title text-center" id="glConsolidationModalTitle">GL Consolidation</h5>
				</div>

				<div class="modal-body" id="glConsolidationModalBody">
					<!-- Dynamic content injected by JS -->
					<div class="text-center my-3">
						<div class="loader"></div>
					</div>
				</div>

				<div class="modal-footer">
					<button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
				</div>

			</div>
		</div>
	</div>

	<!-- Interest Demand Generation Modal -->
	<div id="interestDemandModal" class="modal fade" tabindex="-1" role="dialog">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content">

				<div class="modal-header">
					<h5 class="modal-title" style="text-align: center;">Interest Demand Generation</h5>
				</div>

				<div class="modal-body">
					<table class="table table-bordered text-center" style="margin: auto; width: 80%;">
						<tbody>
							<tr id="tr2">
								<td style="width: 70%;">Interest Demand Generation Process</td>
								<td id="td2" style="width: 30%; text-align: center;">
									<!-- Loader / Icons will appear here -->
								</td>
							</tr>
						</tbody>
					</table>
				</div>

				<div class="modal-footer" style="justify-content: center;">
					<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
				</div>

			</div>
		</div>
	</div>





	<!--<div id="journalModal" class="modal fade" tabindex="-3" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" style="text-align: center;">Journal
						Entries</h5>
				</div>
				<div class="modal-body">
					 Table for displaying transaction data 
					<table class="table table-bordered table-hover">
						<thead>
							<tr>
								<th>VALIDATION</th>
								<th>NO</th>
								<th>AMOUNT</th>
							</tr>
						</thead>
						<tbody>
							<tr th:if="${chartacc1 != null}" th:each="chartacc1 : ${Valuesfornotransaction}">
								<td>Total No.of.Trans</td>
								<td th:text="${chartacc1[0]}"></td>
								<td th:if="${chartacc1[1] != null}"
									th:text="${#numbers.formatDecimal(chartacc1[1], 1, 'COMMA', 2, 'POINT')}">Amt</td>

							</tr>

							<tr th:each="chartacc2 : ${Valuesfordebit}">
								<td>Dr Transactions</td>
								<td th:text="${chartacc2[0]}"></td>
								<td th:text="${#numbers.formatDecimal(chartacc2[1], 1, 'COMMA', 2, 'POINT')}"></td>
							</tr>
							<tr th:each="chartacc3 : ${ValuesforCredit}">
								<td>Cr Transactions</td>
								<td th:text="${chartacc3[0]}"></td>
								<td th:text="${#numbers.formatDecimal(chartacc3[1], 1, 'COMMA', 2, 'POINT')}"></td>
							</tr>
							<tr th:each="chartacc4 : ${ValuesforDel}">
								<td>Deleted</td>
								<td th:text="${chartacc4}"></td>
							</tr>
							<tr th:each="chartacc5 : ${Valuesforunpost}">
								<td>Unposted</td>
								<td th:text="${chartacc5}"></td>
								<td></td>
							</tr>
						</tbody>



					</table>


					<div th:if="${chartacc5 != null}" th:each="chartacc5 : ${Valuesforunpost}">

						 Loader that will show initially 
						<div id="loader2" class="loader2" style="display: block;"></div>

						 Success Message 
						<div id="successMessage" th:if="${chartacc5 == 0 or chartacc5 == 0.00}" style="display: none;">
							<h4 style="text-align: center;">
								Validation Success <span>&#9989;</span>
							</h4>
							<button type="button" class="btn-primary big-btn" data-dismiss="modal" aria-label="Close"
								style="margin-left: 200px">Close</button>
						</div>

						 Failure Message 
						<div id="failureMessage" th:if="${chartacc5 != 0 and chartacc5 != 0.00}" style="display: none;">
							<h4 style="text-align: center;">
								Validation Failed <span>&#10060;</span>
							</h4>
							<button type="button" class="btn-primary big-btn" data-dismiss="modal" aria-label="Close"
								style="margin-left: 200px">Close</button>
						</div>

					</div>



				</div>
			</div>
		</div>
	</div>-->


	<div id="loader3" class="loader3" style="display: block;"></div>
	<div id="successMessage2" class="modal fade bordered" tabindex="-1" role="dialog">
		<div class="modal-dialog d-flex align-items-center justify-content-center" role="document"
			style="min-height: 100vh;">
			<div class="modal-content text-center">
				<div style="margin-top: 30px; margin-bottom: 30px;">
					<h4>
						Consolidation Successful <span>&#9989;</span>
					</h4>
					<button type="button" class="btn-primary big-btn" data-dismiss="modal" aria-label="Close"
						style="margin-top: 20px;">Close</button>
				</div>
			</div>
		</div>
	</div>

	<div id="failureMessage2" class="modal fade" tabindex="-1" role="dialog">
		<div class="modal-dialog d-flex align-items-center justify-content-center" role="document"
			style="min-height: 100vh;">
			<div class="modal-content text-center">

				<div style="margin-top: 30px; margin-bottom: 30px;">
					<h4 style="text-align: center;">
						Consolidation Failed <span>&#10060;</span>
					</h4>
					<button type="button" class="btn-primary big-btn" data-dismiss="modal" aria-label="Close"
						style="margin-left: 200px">Close</button>
				</div>
			</div>
		</div>
	</div>

	<div id="loader3" class="loader3" style="display: block;"></div>
	<div id="successMessage3" class="modal fade bordered" tabindex="-1" role="dialog">
		<div class="modal-dialog d-flex align-items-center justify-content-center" role="document"
			style="min-height: 100vh;">
			<div class="modal-content text-center">
				<div style="margin-top: 30px; margin-bottom: 30px;">
					<h4>
						Transaction Successful <span>&#9989;</span>
					</h4>
					<button type="button" class="btn-primary big-btn" data-dismiss="modal" aria-label="Close"
						style="margin-top: 20px;">Close</button>
				</div>
			</div>
		</div>
	</div>

	<div id="failureMessage3" class="modal fade" tabindex="-1" role="dialog">
		<div class="modal-dialog d-flex align-items-center justify-content-center" role="document"
			style="min-height: 100vh;">
			<div class="modal-content text-center">

				<div style="margin-top: 30px; margin-bottom: 30px;">
					<h4 style="text-align: center;">
						Transaction Failed <span>&#10060;</span>
					</h4>
					<button type="button" class="btn-primary big-btn" data-dismiss="modal" aria-label="Close"
						style="margin-left: 200px">Close</button>
				</div>
			</div>
		</div>
	</div>


	<div id="journalModal8" class="modal fade" tabindex="-3" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" style="text-align: center;">Consistency Check</h5>
				</div>
				<div class="modal-body">
					<!-- Loader -->
					<div id="loader8" class="loader8" style="display: none; text-align:center; margin:20px 0;">
						<div class="loader"></div>
					</div>

					<!-- Table will be injected here dynamically by JS -->
					<div id="consistencyTable"></div>

					<!-- Validation message will be injected here dynamically by JS -->
					<div id="consistencyMessage" style="text-align: center; margin-top: 10px;"></div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>



	<div id="journalModal7" class="modal fade" tabindex="-3" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content" style="max-height: 900px; overflow-y: auto; width: 900px;">
				<div class="modal-header" style="max-height: 900px; overflow-y: auto; width: 900px;">
					<h5 class="modal-title" style="text-align: center;">Journal
						Entries</h5>
				</div>
				<div class="modal-body" style="max-height: 900px; overflow-y: auto; width: 900px;">
					<!-- Table for displaying transaction data -->
					<table class="table table-bordered table-hover">
						<thead>
							<tr>
								<th>Validation</th>
								<th>Account</th>
								<th>count</th>
								<th>Credit</th>
								<th>Debit</th>
								<th>Total</th>
							</tr>
						</thead>
						<tbody>
							<!-- Total Debit Rows -->

							<!-- Debit/Credit Data -->
							<tr th:if="${chartacc7 != null}" th:each="chartacc7 : ${debitCreditData}">
								<td>Account Number</td>
								<td th:text="${chartacc7[0]}"></td>
								<td th:text="${chartacc7[1]}">Total No. of Debit and Credit</td>
								<td th:if="${chartacc7[2] != null}"
									th:text="${#numbers.formatDecimal(chartacc7[2], 1, 'COMMA', 2, 'POINT')}">Net
									Amount</td>
								<td th:if="${chartacc7[2] == null}" th:text="'0.00'">Net
									Amount</td>
								<td th:text="${chartacc7[3]}">Total No. of Debit and Credit</td>
								<td th:text="${chartacc7[4]}">Total No. of Debit and Credit</td>
							</tr>

							<!--  <tr th:if="${chartacc1 != null}" th:each="chartacc1 : ${getWoforDebitValues}">
	               <td>Total Credit</td>
	                  <td></td>
	                <td th:text="${chartacc1[0]}"></td>
	                  <td>0.00</td> 
	                <td th:if="${chartacc1[1] != null}" th:text="${#numbers.formatDecimal(chartacc1[1], 1, 'COMMA', 2, 'POINT')}">Amt</td>
	                           
	                           <td th:if="${chartacc1[1] != null}" th:text="${#numbers.formatDecimal(chartacc1[1], 1, 'COMMA', 2, 'POINT')}">Amt</td>
	           
	       
	            </tr>

	            Total Credit Rows
	            <tr th:if="${chartacc1 != null}" th:each="chartacc1 : ${getWoforcreditValues}">
	                <td>Total Debit</td>
	                <td></td>
	                <td th:text="${chartacc1[0]}"></td>
	               
	                <td th:if="${chartacc1[1] != null}" th:text="${#numbers.formatDecimal(chartacc1[1], 1, 'COMMA', 2, 'POINT')}">Amt</td>
	                    <td>0.00</td>
	                    <td th:if="${chartacc1[1] != null}" th:text="${#numbers.formatDecimal(chartacc1[1], 1, 'COMMA', 2, 'POINT')}">Amt</td>
	           
	            </tr> -->

							<!--           <tr th:if="${chartacc8 != null}" th:each="chartacc8 : ${gettotalValues}">
	                <td>Total Amount</td>
	                <td></td>
	                 <td>0.00</td>
	                  <td>0.00</td>
	                   <td>0.00</td>
	                 
	                <td th:text="${chartacc8[0]}"></td>

	                 
	            </tr> -->

							<tr>
								<td>Total Validation</td>
								<td></td>
								<td th:text="${totaltransaction}"></td>
								<td th:text="${getTotalCredit}"></td>
								<td th:text="${getTotalDebit}"></td>
								<td th:text="${totalamount}"></td>
							</tr>

						</tbody>
					</table>


					<!-- 	<tr th:each="chartacc2 : ${getNetDebitCreditForCurrentDate}">
									<td>Today Net Balance</td>
									<td th:text="${chartacc2[0]}"></td>
									<td
										th:text="${#numbers.formatDecimal(chartacc2[1], 1, 'COMMA', 2, 'POINT')}"></td>
								</tr> -->


					<button class="btn btn-primary p-2" id="Doatranscationbutton" onclick="Doatranscation()"
						style="display: block;">Submit</button>
					<input type="text" id="responseField" hidden />




					<!-- Loader that will show initially -->
					<div id="loader2" class="loader2" style="display: none;"></div>

					<!-- Success Message -->

					<div id="successMessage1" style="display: none;">

						<h4 style="text-align: center;">
							Validation Success <span>&#9989;</span>
						</h4>
						<button type="button" class="btn-primary big-btn" data-dismiss="modal"
							aria-label="Close">Close</button>
					</div>

					<!-- Failure Message -->
					<div id="failureMessage1" style="display: none;">

						<h4 style="text-align: center;">
							Validation Failed <span>&#10060;</span>
						</h4>
						<button type="button" class="btn-primary big-btn" data-dismiss="modal"
							aria-label="Close">Close</button>
					</div>





				</div>
			</div>
		</div>
	</div>


	<div class="modal fade" data-backdrop="false" data-keyboard="false" id="alertsval" tabindex="-1" role="dialog"
		aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
			<div class="modal-content" style="width: 100%; height: 25%;">
				<div class="card">
					<!-- Header with Alert Message -->
					<div class="modal-header" style="justify-content: center; width: 100%;">
						<h5 class="modal-title" id="popupAlert" style="font-size: 13px">

							Alert Message</h5>

						<!-- Alert message will appear here -->
					</div>

					<!-- Body with Response -->
					<div class="modal-body"
						style="text-align: center; display: flex; justify-content: center; align-items: center; height: 100px; overflow-y: auto; font-weight: bold; font-size: 15px">
						<!-- <label>TRAN ID</label>
		<input type="text" id="tran_id_model" th:value="${plusonetran2}" 
		    style="border: none; background: none; outline: none;">
		 -->
						<h6 id="alertmsg1"></h6>
						<!-- Response will be displayed here -->
					</div>

					<!-- Footer with Close Button -->
					<div class="modal-footer" style="justify-content: center; width: 100%;">
						<button type="button" class="btn btn-primary" data-dismiss="modal"
							onclick="refreshPagemulti()">Close</button>
					</div>

				</div>
			</div>
		</div>
	</div>


	<!-- Modal Structure -->
	<div class="modal fade" id="responseModal" tabindex="-1" role="dialog" aria-labelledby="responseModalLabel"
		aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title w-100 text-center" id="responseModalLabel">Account Ledger</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div style="text-align: center; margin: 30px;">
					<b class="modal-body" id="modalBody" style="font-size: 20px;"></b>
				</div>
				<div class="modal-footer ">
					<button type="button" class="btn-primary big-btn" data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>


	<div class="modal fade" id="holidayModal" tabindex="-1" role="dialog" aria-labelledby="responseModalLabel"
		aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title w-100 text-center" id="responseModalLabel">Holiday Master</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div style="text-align: center; margin: 30px;">
					<b class="modal-body" id="holidayBody" style="font-size: 20px;"></b>
				</div>
				<div class="modal-footer ">
					<button type="button" class="btn-primary big-btn" data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="dateChangeProcess" tabindex="-1" role="dialog" aria-labelledby="responseModalLabel"
		aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title w-100 text-center" id="responseModalLabel">Date Change Process</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div style="text-align: center; margin: 30px;">
					<b class="modal-body" id="datechangeModelBody" style="font-size: 20px;"></b>
				</div>
				<div class="modal-footer ">
					<button type="button" class="btn-primary big-btn" data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>

</body>
<script>

</script>

</html>