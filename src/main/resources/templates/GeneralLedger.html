<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="/ASPIRA/js/jquery.min.js"></script>
<script src="/ASPIRA/js/jquery-ui.min.js"></script>
<style>
.btn {
	line-height: 0.5rem;
}

.table-bordered td, .table-bordered th {
	font-size: smaller;
}
.filterable .filters input[disabled]::-webkit-input-placeholder {
	color: #333;
}

.filterable .filters input[disabled]::-moz-placeholder {
	color: #333;
}

.filterable .filters input[disabled]:-ms-input-placeholder {
	color: #333;
}
.filterable .filters input[disabled] {
	background-color: transparent;
	border: none;
	cursor: auto;
	box-shadow: none;
	padding: 0;
	height: auto;
}
.container-manager {
	width: 83.5%;
	padding-right: 15px;
	padding-left: 15px;
	margin-right: auto;
	margin-left: 17.3%;
	margin-top: 80px;
	margin-top: 80px;
}

.table .thead-light th {
	color: #495057;
	background-color: #e9ecef;
	border-color: #dee2e6;
	width: 23px;
}
</style>
<style>
.modal {
	display: none;
	/* Hidden by default */
	position: absolute;
	/* Stay in place */
	z-index: 1;
	/* Location of the box */
	left: 0;
	top: 0;
	width: 100%;
	/* Full width */
	height: 100%;
	/* Full height */
	overflow: auto;
	/* Enable scroll if needed */
	background-color: rgb(0, 0, 0);
	/* Fallback color */
	background-color: rgba(0, 0, 0, 0.4);
	/* Black w/ opacity */
}

/* Modal Content */
.modal-content {
	background-color: #fefefe;
	margin: auto;
	padding: 20px;
	border: 1px solid #888;
	width: 100%;
	box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0
		rgba(0, 0, 0, 0.19);
	-webkit-animation-name: animatetop;
	-webkit-animation-duration: 0.4s;
	animation-name: animatetop;
	animation-duration: 0.4s
}

.modal-pass {
	background-color: #fefefe;
	margin: 15% auto;
	padding: 20px;
	border: 1px solid #888;
	width: 40%;
	height: 25%;
	margin-left: 400PX;
	margin-right: auto;
	border-radius: 10px;
	box-shadow: 0px 0px 20px rgba(0, 0, 0, 0.2);
	/* Adding shadow for depth */
	font-family: Arial, sans-serif; /* Using a more common font */
}

.close {
	color: red;
	font-size: 28px;
	font-weight: bold;
}
</style>
<style>
.password-info {
	visibility: hidden;
	width: 320px;
	background-color: #333;
	color: #fff;
	text-align: left;
	border-radius: 10px;
	padding: 10px;
	position: absolute;
	z-index: 1;
	top: calc(100% + 10px);
	left: 50%;
	transform: translateX(-50%);
	opacity: 0;
	transition: opacity 0.3s;
}

input:hover+.password-info {
	visibility: visible;
	opacity: 0.8;
}

.tablinks.active {
	background-color: #007bff;
	color: #fff;
}
.big-btn {
  font-size: 16px;
}
</style>
<script>
	/* $(function() {
	
		$('#replist').DataTable({
			"searching" : false,
	
			"pageLength" : 25
		});
	}); */
</script>
<script th:inline="javascript">
	/*<![CDATA[*/

	function home() {
		location.href = 'Dashboard';
	}

	function back() {
		window.history.back();
	}

	function addUser() {
		location.href = 'glcode?formmode=add';
	}

	function userList() {
		location.href = 'glcode?formmode=list';
	}

	function modifysubmit(a) {
		var glsh_Code = a.getAttribute("data-attr");
		console.log("glsh_Code" + glsh_Code);
		location.href = 'glcode?formmode=edit&glsh_Code=' + glsh_Code;
	}
	function getvalues(a) {
		var glsh_Code = a.getAttribute("data-attr");
		console.log("glsh_Code" + glsh_Code);
		location.href = 'glcode?formmode=view&glsh_Code=' + glsh_Code;
	}

	function getdata(a) {
		var glsh_Code = a.getAttribute("data-attr");
		console.log("glsh_Code" + glsh_Code);
		location.href = 'glcode?formmode=view&glsh_Code=' + glsh_Code;
	}
	function deletesubmit(a) {
		var glsh_Code = a.getAttribute("data-attr");
		location.href = 'glcode?formmode=delete&glsh_Code=' + glsh_Code;
	}
	function refTypeDropdown(a) {
		$("#hideRefType").hide();
		$("#showRefType").show();
	}

	function submitform() {

		if ($("#BamGeneralLedger").valid()) {
			//alert("add");
			var url = "./GeneralLedgerAdd?formmode=add";
			$("#BamGeneralLedger").attr('action', url);

			var options = {
				success : showResponse
			};

			$("#BamGeneralLedger").ajaxSubmit(options);

			function showResponse(responseText, statusText, xhr, $form) {
				$("#alertmsg").text(responseText);
				$('#alert').modal("toggle");
			}
			;
		}
	};

	function modifyUserData() {
	    var glCode = document.getElementById("glCode").value;
	    var glshCode = document.getElementById("glsh_code").value;
	    //alert(glshCode);
	    if ($("#BamGeneralLedger").valid()) {
	        // Append both `glCode` and `glsh_code` to the URL
	        var url = "./GeneralLedgerAdd?formmode=edit";
	        $("#BamGeneralLedger").attr('action', url);

	        var options = {
	            success: showResponse
	        };

	        $("#BamGeneralLedger").ajaxSubmit(options);

	        function showResponse(responseText, statusText, xhr, $form) {
	            $("#alertmsg").text(responseText);
	            $('#alert').modal("toggle");
	        }
	    }
	}

	function deleteUserData() {
	    var glCode = document.getElementById("glCode").value;
	    var glshCode = document.getElementById("glsh_code").value;
	    //alert(glshCode);
	    if ($("#BamGeneralLedger").valid()) {
	        // Append both `glCode` and `glsh_code` to the URL
	        var url = "./GeneralLedgerAdd?formmode=delete";
	        $("#BamGeneralLedger").attr('action', url);

	        var options = {
	            success: showResponse
	        };

	        $("#BamGeneralLedger").ajaxSubmit(options);

	        function showResponse(responseText, statusText, xhr, $form) {
	            $("#alertmsg").text(responseText);
	            $('#alert').modal("toggle");
	        }
	    }
	};
	
	function Close(){
		location.href = 'glcode?formmode=list' ;
	}

	//Check to View
	$(document).ready(
			function() {
				$(".checkToView").on(
						'click',
						function() {

							$(this).prop('checked', false);

							var glcode = $(this).val();

							var formmode = "view1";

							location.href = 'glcode?formmode=' + formmode
									+ '&glcode=' + glcode;

						});

				//Check to Modify
				$(".checkToModify").on(
						'click',
						function() {

							$(this).prop('checked', true);

							var glcode = $(this).val();

							var formmode = "edit";

							location.href = 'glcode?formmode=' + formmode
									+ '&glcode=' + glcode;

						});
				//Check to Delete
				$(".checkToDelete").on(
						'click',
						function() {

							$(this).prop('checked', false);

							var glcode = $(this).val();

							var formmode = "delete";

							location.href = 'glcode?formmode=' + formmode
									+ '&glcode=' + glcode;

						});
			});

	//Filter Table

	$(document)
			.ready(
					function() {
						$('.filterable .btn-filter')
								.click(
										function() {
											var $panel = $(this).parents(
													'.filterable'), $filters = $panel
													.find('.filters input'), $tbody = $panel
													.find('.table tbody');
											if ($filters.prop('disabled') == true) {
												$filters
														.prop('disabled', false);
												$filters.first().focus();
											} else {
												$filters.val('').prop(
														'disabled', true);
												$tbody.find('.no-result')
														.remove();
												$tbody.find('tr').show();
											}
										});

						$('.filterable .filters input')
								.keyup(
										function(e) {
											/* Ignore tab key */
											var code = e.keyCode || e.which;
											if (code == '9')
												return;
											/* Useful DOM data and selectors */
											var $input = $(this), inputContent = $input
													.val().toLowerCase(), $panel = $input
													.parents('.filterable'), column = $panel
													.find('.filters th')
													.index($input.parents('th')), $table = $panel
													.find('.table'), $rows = $table
													.find('tbody tr');
											/* Dirtiest filter function ever ;) */
											var $filteredRows = $rows
													.filter(function() {
														var value = $(this)
																.find('td').eq(
																		column)
																.text()
																.toLowerCase();
														return value
																.indexOf(inputContent) === -1;
													});
											/* Clean previous no-result if exist */
											$table.find('tbody .no-result')
													.remove();
											/* Show all rows, hide filtered ones (never do that outside of a demo ! xD) */
											$rows.show();
											$filteredRows.hide();
											/* Prepend no-result row if all rows are filtered */
											if ($filteredRows.length === $rows.length) {
												$table
														.find('tbody')
														.prepend(
																$('<tr class="no-result text-center"><td colspan="'
																		+ $table
																				.find('.filters th').length
																		+ '">No result found</td></tr>'));
											}
										});
					});

	/*]]>*/

	function RefCode(a) {
		event.preventDefault();
		var ref = document.getElementById("RefButton");
		ref.classList.add("active");

		var gl = document.getElementById("GLButton");
		gl.classList.remove("active");

		var scheme = document.getElementById("param");
		scheme.classList.remove("active");

		var chart = document.getElementById("chartOfAccounts");
		chart.classList.remove("active");

		var act = document.getElementById("accountLedger");
		act.classList.remove("active");

		var act = document.getElementById("TransactionsAccounts");
		act.classList.remove("active");

		location.href = './refCodeMain?formmode=list';
	}

	function GLStruct(a) {
		event.preventDefault();
		var ref = document.getElementById("RefButton");
		ref.classList.remove("active");

		var gl = document.getElementById("GLButton");
		gl.classList.add("active");

		var scheme = document.getElementById("param");
		scheme.classList.remove("active");

		var chart = document.getElementById("chartOfAccounts");
		chart.classList.remove("active");

		var act = document.getElementById("accountLedger");
		act.classList.remove("active");

		var act = document.getElementById("TransactionsAccounts");
		act.classList.remove("active");

		location.href = './glcode';
	}

	function SchemeCode(a) {
		event.preventDefault();
		var ref = document.getElementById("RefButton");
		ref.classList.remove("active");

		var gl = document.getElementById("GLButton");
		gl.classList.remove("active");

		var scheme = document.getElementById("param");
		scheme.classList.add("active");

		var chart = document.getElementById("chartOfAccounts");
		chart.classList.remove("active");

		var act = document.getElementById("accountLedger");
		act.classList.remove("active");

		var act = document.getElementById("TransactionsAccounts");
		act.classList.remove("active");

		location.href = './Parameter';
	}

	function Chart(a) {
		event.preventDefault();
		var ref = document.getElementById("RefButton");
		ref.classList.remove("active");

		var gl = document.getElementById("GLButton");
		gl.classList.remove("active");

		var scheme = document.getElementById("param");
		scheme.classList.remove("active");

		var chart = document.getElementById("chartOfAccounts");
		chart.classList.add("active");

		var act = document.getElementById("accountLedger");
		act.classList.remove("active");

		var act = document.getElementById("TransactionsAccounts");
		act.classList.remove("active");

		location.href = './chartOfAccounts';
	}

	function Account(a) {
		event.preventDefault();
		var ref = document.getElementById("RefButton");
		ref.classList.remove("active");

		var gl = document.getElementById("GLButton");
		gl.classList.remove("active");

		var scheme = document.getElementById("param");
		scheme.classList.remove("active");

		var chart = document.getElementById("chartOfAccounts");
		chart.classList.remove("active");

		var act = document.getElementById("accountLedger");
		act.classList.add("active");

		var act = document.getElementById("TransactionsAccounts");
		act.classList.remove("active");

		location.href = './accountLedger';
	}

	function TransactionAccount(a) {
	event.preventDefault();
	var ref = document.getElementById("RefButton");
	ref.classList.remove("active");

	var gl = document.getElementById("GLButton");
	gl.classList.remove("active");

	var scheme = document.getElementById("param");
	scheme.classList.remove("active");

	var chart = document.getElementById("chartOfAccounts");
	chart.classList.remove("active");

	var act = document.getElementById("accountLedger");
	act.classList.remove("active");

	var act = document.getElementById("TransactionsAccounts");
	act.classList.add("active");

	location.href = './TransactionsAccounts';
}
</script>

<script>
	function upload() {
		location.href = 'glcode?formmode=upload';
	}

	function submitexcelgst() {
		event.preventDefault(); // Prevent default form submission behavior

		var fileInput = document.getElementById('fileval');

		// Check if a file is selected
		if (fileInput && fileInput.files.length > 0) {
			var file = fileInput.files[0];
			alert(file.name); // Alert with the file name

			var formData = new FormData();
			formData.append('file', file);

			$.ajax({
				url : './gluploadexcel',
				data : formData,
				type : 'POST',
				contentType : false,
				processData : false,
				cache : false, // Disable cache to avoid potential issues
				success : function(data) {
					alert('File uploaded successfully: ' + data);
				},
				error : function(xhr, status, error) {
					alert('Error occurred while uploading file: ' + error);
				}
			});
		} else {
			alert('Please select a file before uploading.');
		}
	}

	function uploadlist() {
		location.href = 'glcode?formmode=uploadlist';
	}

	function Home() {

		location.href = 'Dashboard';
	}

	function Back() {
		window.history.back();
	}

	/* function toggleSelectAll() {
	
		const selectAllBtn = document.getElementById('selectAllBtn');
	
		console.log(selectAllBtn);
	
		const checkboxes = document.querySelectorAll('#placelist .checkbox');
	
		console.log(checkboxes);
	
		const selectAll = selectAllBtn.textContent === 'Select All';
		console.log(selectAll);//true
	
		checkboxes.forEach(function(checkbox) {
			checkbox.checked = selectAll;
		});
	
		selectAllBtn.textContent = selectAll ? 'Deselect All' : 'Select All';
		console.log(selectAll);
	} */
</script>

<script>
	// Function to toggle Select All/Deselect All
	function toggleSelectAll() {
		const selectAllBtn = document.getElementById('selectAllBtn');
		const checkboxes = document.querySelectorAll('#placelist .checkbox');
		const selectAll = selectAllBtn.textContent === 'Select All';
		console.log(selectAll)

		checkboxes.forEach(function(checkbox) {
			checkbox.checked = selectAll;
		});

		selectAllBtn.textContent = selectAll ? 'Deselect All' : 'Select All';
	}

	// Function to get the checked values when Submit is clicked
	function getCheckedValues() {
		const checkboxes = document
				.querySelectorAll('#placelist .checkbox:checked');
		console.log(checkboxes);
		if (checkboxes.length === 0) {
			$("#alertmsg1").text("Please Pick at least one Select Option.");
			$('#alert1').modal("show"); // Display the modal
			return; // Stop further execution
		}
		const selectedValues = [];

		checkboxes.forEach(function(checkbox) {
			const row = checkbox.closest('tr');
			const glCode = row.cells[1].innerText;
			const glDescription = row.cells[2].innerText;
			const branchId = row.cells[3].innerText;
			const branchDesc = row.cells[4].innerText;
			const glshCode = row.cells[5].innerText;
			const glshDesc = row.cells[6].innerText;
			const crncyCode = row.cells[7].innerText;
			const bal_Sheet_Group = row.cells[8].innerText;
			const seq_order = row.cells[9].innerText;
			const gl_type = row.cells[10].innerText;
			const gl_type_description = row.cells[11].innerText;
			const module = row.cells[12].innerText;
			const remarks = row.cells[13].innerText;
			const no_acct_closed = row.cells[14].innerText;
			const no_acct_opened = row.cells[15].innerText;
			const total_balance = row.cells[16].innerText;

			selectedValues.push({
				glCode : glCode,
				glDescription : glDescription,
				branch_id : branchId,
				branch_desc : branchDesc,
				glsh_code : glshCode,
				glsh_desc : glshDesc,
				crncy_code : crncyCode,
				bal_sheet_group : bal_Sheet_Group,
				seq_order : seq_order,
				gl_type : gl_type,
				gl_type_description : gl_type_description,
				module : module,
				remarks : remarks,
				no_acct_closed : no_acct_closed,
				no_acct_opened : no_acct_opened,
				total_balance : total_balance

			});

		});

		console.log(selectedValues);

		$.ajax({
			url : './uploadatatogled',
			data : JSON.stringify(selectedValues),
			type : 'POST',
			contentType : 'application/json',
			processData : false,
			cache : false,
			success : function(data) {

				$("#alertmsg2").text("Values uploaded successfully !!!");
				$('#alert2').modal("show"); // Display the modal

			},
			error : function(xhr, status, error) {
				alert('Error occurred while uploading values: ' + error);
			}
		});

	}

	function navigateToMainlist(e) {

		location.href = './glcode?formmode=list';
	}


</script>
<style>
.hover-underline:hover {
	text-decoration: underline;
	text-decoration-color: #007bff;
	cursor: pointer;
	/* Sets underline color to blue */
}
</style>

<script>
	/* function for the table scroll */
	function adjustHeight() {
		const cardBody = document.getElementById("cardBody");
		const viewportHeight = window.innerHeight;
		cardBody.style.maxHeight = `${viewportHeight * 0.95}px`; // Adjust 80% of the viewport height
	}

	window.addEventListener("resize", adjustHeight);
	document.addEventListener("DOMContentLoaded", adjustHeight);
</script>
	<script th:inline="javascript">
		document.addEventListener('DOMContentLoaded', function () {

			const fileInput = document.getElementById('fileInput');
			const submitBtn = document.getElementById('submitBtn');

			// Step 1: Open file chooser when submit button is clicked
			submitBtn.addEventListener('click', () => {
				fileInput.click();
			});

			// Step 2: When file is selected, upload it
			fileInput.addEventListener('change', () => {
				if (fileInput.files.length > 0) {
					submitData(fileInput.files[0]); // pass the selected file
				}
			});

			function submitData(file) {
				document.getElementById('loadingModal').style.display = 'flex';
				var form = $('#reportform_cust')[0];
				var data = new FormData(form);
				data.append("overwrite", false);
				data.append("fileInput", "GL_CODE");
				data.append("file", file);
				$.ajax({
					type: "POST",
					url: "UploadFileData",
					data: data,
					processData: false,
					contentType: false,
					success: function (response) {
						document.getElementById('loadingModal').style.display = 'none';
						console.log(response);
						if (response.status === "duplicate") {
							$('#alertmsgpopup')
								.text(`Duplicate Customer Id(s) found: ${response.id.join(", ")}. Do you want to overwrite them?`)
								.css("white-space", "nowrap");
							window.lastData = data;
							window.lastType = "GL_CODE";

							$('#datacancel').modal("show");
							return;
						}
						showResponse(response);
					},
					error: function (error) {
						document.getElementById('loadingModal').style.display = 'none';
						showResponse("Error: " + error.responseText);
					}
				});
			}
		});

		function showResponse(response) {
			let message =
				"Upload Completed<br>" +
				"Total No of Rows Succeeded: " + response.TotalSucceeded + "<br>" +
				"Total No of Rows Failed: " + response.TotalFailed + "<br>" +
				"Total Rows Processed: " + response.TotalProcessed + "<br>";

			// ✅ Write to the same modal-body container
			$('#Successmsgpopup').html("<h6 class='text-center'>" + message + "</h6>");
			$('#SuccesPopUp').modal('show');
		}
		function backs() {
			$("#normalalertvalues").modal("hide");
		}

		// DELETE REF
		function deleteRecUpload(btn) {
			$('#datacancel').modal('hide');
			document.getElementById('loadingModal').style.display = 'flex';

			// ✅ Reuse stored FormData
			var formData = window.lastData;
			if (!formData) {
				console.error("No form data found from last upload");
				return;
			}

			// ✅ Ensure overwrite is set to true
			formData.set("overwrite", true);

			$.ajax({
				url: './UploadFileData',
				type: 'POST',
				data: formData,
				contentType: false,
				processData: false,
				success: function (response) {
					document.getElementById('loadingModal').style.display = 'none';
					showResponse(response);

				},
				error: function (xhr, status, error) {
					document.getElementById('loadingModal').style.display = 'none';
					$('#alertmsg').text("Overwrite Upload failed");
					$('#alert').modal("toggle");
				}
			});
		}

	</script>
	<script>	// Function to format number with commas and two decimal points
	function formatNumber(input) {
	    let value = input.value.replace(/,/g, '').replace(/[^\d.]/g, ''); // Remove commas and invalid characters
	    if (value === "") return;

	    let parts = value.split(".");
	    // Format integer part with commas
	    parts[0] = parseInt(parts[0], 10).toLocaleString("en-US");

	    // Handle decimal part
	    if (!parts[1]) {
	        parts[1] = "00";
	    } else if (parts[1].length === 1) {
	        parts[1] = parts[1] + "0";
	    } else if (parts[1].length > 2) {
	        parts[1] = parts[1].slice(0, 2);
	    }

	    input.value = parts.join(".");
	}

	document.addEventListener("DOMContentLoaded", function () {
	    // Select all inputs with id "total_balance" (even if multiple)
	    const fields = document.querySelectorAll('[id="total_balance"]');

	    fields.forEach(field => {
	        // Only attach listener if input is not readonly
	        if (!field.hasAttribute("readonly")) {
	            // Format while typing
	            field.addEventListener("input", function () {
	                let cursorPos = field.selectionStart;
	                formatNumber(field);
	                field.setSelectionRange(cursorPos, cursorPos);
	            });

	            // Format on blur to ensure .00
	            field.addEventListener("blur", function () {
	                formatNumber(field);
	            });
	        }
	    });
	});
</script>
</head>

<body>
	<div class="col-sm-2">
		<div th:insert="BGLSHeaderMenu :: header"></div>
	</div>
	<div class="container-manager">
		<div class="row">
			<div class="col-sm-11 ml-5 mt-2">
				<div th:if="${formmode}=='list'">
					<div class="card panel panel-primary filterable">
						<div class="card-header "
							style="background-color: #e9ecef; height: 50px">
							<div class="float-left">
								<h6 style="font-size: 1.2rem; color: black;">GENERAL LEDGER</h6>
							</div>
							<div class="float-right">
							
								<button type="button" class="big-btn btn-primary btn-filter">Filter</button>
								<button type="button" class="btn-primary big-btn" id="submitBtn">Upload</button>
								<button class="btn-primary big-btn"  onclick="addUser()">Add</button>
							</div>
						</div>
						<div class="mt-3"
							style="padding: 4px 4px; position: relative; display: flex; justify-content: space-around; width: 100%;">
							<!-- Tab buttons -->
							<button class="tablinks rounded-pill" id="RefButton"
								onclick="RefCode(this);"
								style="font-size: 16px; padding: 4px 8px; height: 40%; width: 15%;">Reference
								Code Maintenance</button>
							<button class="tablinks active rounded-pill" id="GLButton"
								onclick="GLStruct(this);"
								style="font-size: 16px; padding: 4px 8px; height: 40%; width: 15%;">GL
								Structure</button>
							<button class="tablinks rounded-pill" id="param"
								onclick="SchemeCode(this);"
								style="font-size: 16px; padding: 4px 8px; height: 40%; width: 15%;">Scheme
								Codes</button>
							<button class="tablinks rounded-pill" id="chartOfAccounts"
								onclick="Chart(this);"
								style="font-size: 16px; padding: 4px 8px; height: 40%; width: 15%;">Chart
								of Accounts</button>
							<button class="tablinks rounded-pill" id="accountLedger"
								onclick="Account(this);"
								style="font-size: 16px; padding: 4px 8px; height: 40%; width: 15%;">Account
								Ledger</button>

							<button class="tablinks rounded-pill" id="TransactionAccount" onclick="TransactionAccount(this);"
								style="font-size: 16px; padding: 4px 8px; height: 40%; width: 15%;">Transaction Accounts</button>
							

						</div>
						<div class="card-body"
							style="overflow-y: auto; border: 1px solid #ddd;">
							<form id="reportform_cust">
							<input type="file" id="fileInput" name="file" style="display: none" />
						</form>
							<div class="table-responsive" id="cardBody">
								<table class="table table-bordered table-hover table-sm"
									style="margin-bottom: 0px; font-size: initial;" id="usertable">
									<thead class="thead-light"
										style="position: sticky; top: 0; background-color: #f8f9fa; z-index: 1;">
										<tr class="filters">
											<th><input type="text"
												class="form-control font-weight-bold text-center" placeholder="S.NO"
												disabled></th>
											<th><input type="text"
												class="form-control font-weight-bold" placeholder="GL CODE"
												disabled></th>
											<th><input type="text"
												class="form-control font-weight-bold" placeholder="GL DESC"
												disabled></th>
											<th style="width: 8%;"><input type="text"
												class="form-control font-weight-bold"
												placeholder="BRANCH ID" disabled></th>
											<th style="width: 10%;"><input type="text"
												class="form-control font-weight-bold"
												placeholder="BRANCH DESC" disabled></th>
											<th><input type="text"
												class="form-control font-weight-bold"
												placeholder="GLSH CODE" disabled></th>
											<th><input type="text"
												class="form-control font-weight-bold"
												placeholder="GLSH DESC" disabled></th>
											<th style="width: 8%;"><input type="text"
												class="form-control font-weight-bold"
												placeholder="CRNCY CODE" disabled></th>
											<th style="width: 8%;" ><input type="text" style="text-align: right;"
												class="form-control font-weight-bold"
												placeholder="CREDIT BAL" disabled></th>
											<th><input type="text" style="text-align: right;"
												class="form-control font-weight-bold"
												placeholder="DEBIT BAL" disabled></th>
                                            <th style="width: 8%;text-align: center;" class="font-weight-bold" > Select</th>
										</tr>
									</thead>
									<tbody id="placelist">
										<tr th:each="chartacc ,index: ${getvaluelist}">
									 <td th:text="${index.index + 1}" class="text-center"></td>
											<td th:text="${chartacc?.glCode}" ></td>
											<td th:text="${chartacc?.glDescription}"></td>
											<td th:text="${chartacc?.branch_id}"></td>
											<td th:text="${chartacc?.branch_desc}"></td>
											<td class="hover-underline" style="color: #007bff;"
												onclick="getdata(this)"
												th:attr="data-attr=${chartacc?.glsh_code}"
												th:text="${chartacc?.glsh_code}"></td>
											<td th:text="${chartacc?.glsh_desc}"></td>
											<td th:text="${chartacc?.crncy_code}"></td>
										<!--	<td style="text-align: right;"
												th:text="${chartacc?.total_balance != null && (T(java.lang.Double).valueOf(chartacc.total_balance) > 0) ? #numbers.formatDecimal(T(java.lang.Double).valueOf(chartacc.total_balance), 2, 2) : '0.00'}">
											</td>
											<td style="text-align: right;"
												th:text="${chartacc?.total_balance != null && (T(java.lang.Double).valueOf(chartacc.total_balance) < 0) ? #numbers.formatDecimal(T(java.lang.Double).valueOf(chartacc.total_balance), 2, 2) : '0.00'}">
											</td>-->
											<!-- Positive Balance -->
											<td style="text-align: right;"
											    th:text="${#strings.isEmpty(chartacc.total_balance) 
											              || T(java.lang.Double).valueOf(chartacc.total_balance) <= 0 
											              ? '0.00' 
											              : #numbers.formatDecimal(T(java.lang.Double).valueOf(chartacc.total_balance), 2, 2)}">
											</td>

											<!-- Negative Balance -->
											<td style="text-align: right;"
											    th:text="${#strings.isEmpty(chartacc.total_balance) 
															|| T(java.lang.Double).valueOf(chartacc.total_balance) >= 0 
															? '0.00' 
															: #numbers.formatDecimal(T(java.lang.Math).abs(T(java.lang.Double).valueOf(chartacc.total_balance)), 2, 2)}"
													>
											</td>
											<td class="text-center">
																<div class="dropdown action-dropdown">
														<button class="btn btn-action dropdown-toggle" style="padding:0px"
															type="button" id="dropdownMenuButton" title="Action"
															data-toggle="dropdown" aria-haspopup="true"
															aria-expanded="false">Action</button>

														<div class="dropdown-menu" style="padding:0px"
															aria-labelledby="dropdownMenuButton">
															<!-- Modify -->
															<a class="dropdown-item modify-item"
																th:attr="data-attr=${chartacc?.glsh_code}" title="Modify"
																onclick="modifysubmit(this)">Modify</a>
															<div class="dropdown-divider"></div>
															<!-- Delete -->
															<a class="dropdown-item delete-item"
																th:attr="data-attr=${chartacc?.glsh_code}"
																title="Delete" onclick="deletesubmit(this)">Delete</a>
														</div>
													</div>
										 
												 
											</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
						<div class="card-footer  text-center"
							style="background-color: #e9ecef;">
							<button type="button" class="btn-primary big-btn "
								onclick="home()" id="btnHome">Home</button>
							<!-- 
									<button class="btn-primary big-btn" onclick="addUser()"
										th:if="${formmode}=='view'" id="btnModify">Add</button> <button
										class="btn-primary big-btn  text-white" onclick="upload()"
										id="btnupload">Upload</button> <button
										class="btn-primary big-btn" id="btnModify"
										th:if="${formmode}=='view'" onclick="modifyData();">Modify</button>

									<button class="btn-primary big-btn" id="btnDelete"
										th:if="${formmode}=='view'" onclick="deleteData();">Delete</button>

									<button class="btn-primary big-btn"
										th:if="${formmode}=='view'" id="btnList" onclick="userList();">List</button>

									<button th:if="${formmode}== 'add'" type="button"
										class="btn-primary big-btn" form="RefCodeMaster" id="btnSubmit"
										onclick="submitform(this);"
										th:attr="data-formmode=${formmode}">Submit</button>

									<button type="button" class="btn-primary big-btn" id="btnEdit"
										th:if="${formmode}=='edit'"
										th:attr="data-formmode=${formmode}"
										onclick="modifyUserData(this);">Submit</button>

									<button th:if="${formmode}== 'delete'" type="button"
										class="btn-primary big-btn" form="AdminAssociateProfile"
										id="btnSubmit" onclick="deleteUserData(this);"
										th:attr="data-formmode=${formmode}">Submit</button>
 -->
							<button type="button" class="btn-primary big-btn" id="btnBack"
								onclick="back();">Back</button>
						</div>
					</div>
				</div>
				<!-- start add function -->
				<div th:if="${formmode}=='add' OR ${formmode}=='edit' or ${formmode}=='delete'" class="col-sm-11 ml-5 mt-2" >
					<div class="card ">
						<div class="card-header" style="background-color: #e9ecef;">
							<h3 style="font-size: 1.2rem" th:if="${formmode}=='edit'">GENERAL
											LEDGER- MODIFY</h3>
							<h3 style="font-size: 1.2rem" th:if="${formmode}=='add'">GENERAL
											LEDGER- ADD</h3>
							<h3 style="font-size: 1.2rem" th:if="${formmode}=='delete'">GENERAL
											LEDGER - DELETE</h3>
						</div>
						<div class="card-body p-3">
							<form action="#" class="border border-secondary"
								th:object="${GeneralLedger}" method="post" autocomplete="off"
								id="BamGeneralLedger">
								<div class="form-group  ">
									<div class="row formline" style="padding: 10px 0px 3px 0px">
										<div class="col-sm-1"></div>
										<div class="col-4 col-lg-2">
											<label for="">Branch Id</label>
										</div>
										<div class="col-4 col-lg-2">
											<input type="text" id="Branch_id" th:if="${formmode}=='view'"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" readonly
												style="background-color: #f9fff6;" /> <input type="text"
												id="Branch_id" name="Branch_id" th:if="${formmode}=='add'"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" style="background-color: #f9fff6;" /> <input
												type="text" id="Branch_id" th:if="${formmode}=='view1'"
												th:value="${GeneralLedger?.branch_id}"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" readonly
												style="background-color: #f9fff6;" /> <input type="text"
												id="Branch_id" name="Branch_id" th:if="${formmode}=='edit'"
												th:value="${GeneralLedger?.Branch_id}"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" style="background-color: #f9fff6;" /> <input
												type="text" id="Branch_id" th:if="${formmode}=='delete'"
												th:value="${GeneralLedger?.Branch_id}" name="Branch_id"
												class="form-control form-control-sm bg-white border border-dark"
												readonly style="background-color: #f9fff6;" />

										</div>
										<div class="col-sm-1"></div>
										<div class="col-4 col-lg-2">
											<label for="typeDesc">Branch Description</label>
										</div>
										<div class="col-4 col-lg-2">

											<input type="text" id="branch_desc"
												th:if="${formmode}=='view'"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" readonly
												style="background-color: #f9fff6;" /> <input type="text"
												id="branch_desc" th:if="${formmode}=='add'"
												name="branch_desc"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" required /> <input type="text"
												id="branch_desc" th:if="${formmode}=='view1'"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" readonly
												style="background-color: #f9fff6;" /> <input type="text"
												id="branch_desc" th:if="${formmode}=='edit'"
												th:value="${GeneralLedger?.branch_desc}" name="branch_desc"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" required /> <input type="text"
												id="branch_desc" th:if="${formmode}=='delete'"
												th:value="${GeneralLedger?.branch_desc}" name="branch_desc"
												class="form-control form-control-sm bg-white border border-dark"
												readonly style="background-color: #f9fff6;" />

										</div>
									</div>
									<div class="row formline mt-1">
										<div class="col-sm-1"></div>
										<div class="col-4 col-lg-2">
											<label for="refType">GL CODE</label>
										</div>
										<div class="col-4 col-lg-2">
											<input type="text" id="glCode" th:if="${formmode}=='view'"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" readonly
												style="background-color: #f9fff6;" /> <input type="text"
												id="glCode" name="glCode" th:if="${formmode}=='add'"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" style="background-color: #f9fff6;" /> <input
												type="text" id="glCode" th:if="${formmode}=='view1'"
												th:value="${GeneralLedger?.gl_code}"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" readonly
												style="background-color: #f9fff6;" /> <input type="text"
												id="glCode" name="glCode" th:if="${formmode}=='edit'"
												th:value="${GeneralLedger?.glCode}"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" style="background-color: #f9fff6;" /> <input
												type="text" id="glCode" th:if="${formmode}=='delete'"
												th:value="${GeneralLedger?.glCode}" name="glCode"
												class="form-control form-control-sm bg-white border border-dark"
												readonly style="background-color: #f9fff6;" />

										</div>
										<div class="col-sm-1"></div>
										<div class="col-4 col-lg-2">
											<label for="typeDesc">GL Description</label>
										</div>
										<div class="col-4 col-lg-2">

											<input type="text" id="glDescription"
												th:if="${formmode}=='view'"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" readonly
												style="background-color: #f9fff6;" /> <input type="text"
												id="glDescription" th:if="${formmode}=='add'"
												name="glDescription"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" required /> <input type="text"
												id="glDescription" th:if="${formmode}=='view1'"
												th:value="${GeneralLedger?.gl_desc}"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" readonly
												style="background-color: #f9fff6;" /> <input type="text"
												id="glDescription" th:if="${formmode}=='edit'"
												th:value="${GeneralLedger?.glDescription}"
												name="glDescription"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" required /> <input type="text"
												id="glDescription" th:if="${formmode}=='delete'"
												th:value="${GeneralLedger?.glDescription}"
												name="glDescription"
												class="form-control form-control-sm bg-white border border-dark"
												readonly style="background-color: #f9fff6;" />

										</div>
									</div>

									<div class="row formline mt-1">
										<div class="col-sm-1"></div>
										<div class="col-4 col-lg-2">
											<label for="">GL Sub Head Code</label>
										</div>
										<div class="col-4 col-lg-2">
                                                 <input type="text"
												id="glsh_code" th:if="${formmode}=='add'"
												class="form-control form-control-sm bg-white border border-dark"
												name="glsh_code" autocomplete="off" required /> <input
												type="text" id="glsh_code" th:if="${formmode}=='view1'"
												th:value="${GeneralLedger?.glsh_code}"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" readonly
												style="background-color: #f9fff6;" /> <input type="text"
												id="glsh_code" th:if="${formmode}=='edit'"
												th:value="${GeneralLedger?.glsh_code}" name="glsh_code"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" required readonly
												style="background-color: #f9fff6;" /> <input type="text"
												th:if="${formmode}=='delete'"
												th:value="${GeneralLedger?.glsh_code}" name="glsh_code" id="glsh_code"
												class="form-control form-control-sm bg-white border border-dark"
												readonly style="background-color: #f9fff6;" />

										</div>
										<div class="col-sm-1"></div>
										<div class="col-4 col-lg-2">
											<label for="refDesc">GLSH Description</label>
										</div>
										<div class="col-4 col-lg-2">

											<input type="text" id="glsh_desc" th:if="${formmode}=='view'"
												class="form-control form-control-sm bg-white border border-dark"
												readonly style="background-color: #f9fff6;" /> <input
												type="text" id="glsh_desc" th:if="${formmode}=='add'"
												class="form-control form-control-sm bg-white border border-dark"
												name="glsh_desc" autocomplete="off" required /> <input
												type="text" id="glsh_desc" th:if="${formmode}=='view1'"
												th:value="${GeneralLedger?.glsh_desc}"
												class="form-control form-control-sm bg-white border border-dark"
												readonly style="background-color: #f9fff6;" /> <input
												type="text" id="glsh_desc" th:if="${formmode}=='edit'"
												th:value="${GeneralLedger?.glsh_desc}" name="glsh_desc"
												class="form-control form-control-sm bg-white border border-dark"
												required /> <input type="text" id="glsh_desc"
												th:if="${formmode}=='delete'"
												th:value="${GeneralLedger?.glsh_desc}" name="glsh_desc"
												class="form-control form-control-sm bg-white border border-dark"
												readonly style="background-color: #f9fff6;" />

										</div>
									</div>

									<div class="row formline mt-1">
										<div class="col-sm-1"></div>
										<div class="col-4 col-lg-2">
											<label for="">Currency Code</label>
										</div>
										<div class="col-4 col-lg-2">

											<input type="text" id="crncy_code"
												th:if="${formmode}=='view'"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" readonly
												style="background-color: #f9fff6;" /> <input type="text"
												id="crncy_code" th:if="${formmode}=='add'"
												class="form-control form-control-sm bg-white border border-dark"
												name="crncy_code" autocomplete="off" required /> <input
												type="text" id="crncy_code" th:if="${formmode}=='view1'"
												th:value="${GeneralLedger?.crncy_code}"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" readonly
												style="background-color: #f9fff6;" /> <input type="text"
												id="crncy_code" th:if="${formmode}=='edit'"
												th:value="${GeneralLedger?.crncy_code}" name="crncy_code"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" /> <input type="text" id="crncy_code"
												th:if="${formmode}=='delete'"
												th:value="${GeneralLedger?.crncy_code}" name="crncy_code"
												class="form-control form-control-sm bg-white border border-dark"
												readonly style="background-color: #f9fff6;" />

										</div>
										<div class="col-sm-1"></div>
										<div class="col-4 col-lg-2">
											<label for="remarks">Balance Sheet Group</label>
										</div>
										<div class="col-4 col-lg-2">

											<input type="text" id="bal_sheet_group"
												th:if="${formmode}=='view'"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" readonly
												style="background-color: #f9fff6;" /> <input type="text"
												id="bal_sheet_group" th:if="${formmode}=='add'"
												class="form-control form-control-sm bg-white border border-dark"
												name="bal_sheet_group" autocomplete="off" required /> <input
												type="text" id="bal_sheet_group"
												th:if="${formmode}=='view1'"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" readonly
												style="background-color: #f9fff6;" /> <input type="text"
												id="bal_sheet_group" th:if="${formmode}=='edit'"
												th:value="${GeneralLedger?.bal_sheet_group}"
												name="bal_sheet_group"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" /> <input type="text"
												id="bal_sheet_group" th:if="${formmode}=='delete'"
												th:value="${GeneralLedger?.bal_sheet_group}"
												name="bal_sheet_group"
												class="form-control form-control-sm bg-white border border-dark"
												readonly style="background-color: #f9fff6;" />

										</div>
									</div>

									<div class="row formline mt-1">
										<div class="col-sm-1"></div>
										<div class="col-4 col-lg-2">
											<label for="">Sequence Order</label>
										</div>
										<div class="col-4 col-lg-2">

											<input type="text" id="seq_order" th:if="${formmode}=='view'"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" readonly
												style="background-color: #f9fff6;" /> <input type="text"
												id="seq_order" th:if="${formmode}=='add'"
												class="form-control form-control-sm bg-white border border-dark"
												name="seq_order" autocomplete="off" required /> <input
												type="text" id="seq_order" th:if="${formmode}=='view1'"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" readonly
												style="background-color: #f9fff6;" /> <input type="text"
												id="seq_order" th:if="${formmode}=='edit'"
												th:value="${GeneralLedger?.seq_order}" name="seq_order"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" /> <input type="text" id="seq_order"
												th:if="${formmode}=='delete'"
												th:value="${GeneralLedger?.seq_order}" name="seq_order"
												class="form-control form-control-sm bg-white border border-dark"
												readonly style="background-color: #f9fff6;" />

										</div>
										<div class="col-sm-1"></div>
										<div class="col-4 col-lg-2">
											<label for="remarks">Total Balance</label>
										</div>
										<div class="col-4 col-lg-2">

											<input type="text" id="total_balance"
												th:if="${formmode}=='view'"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" readonly
												style="background-color: #f9fff6;" /> <input type="text"
												id="total_balance" th:if="${formmode}=='add'"
												class="form-control form-control-sm bg-white border border-dark"
												name="remarks" autocomplete="off" required /> <input
												type="text" id="total_balance" th:if="${formmode}=='view1'"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" readonly
												style="background-color: #f9fff6;" /> <input type="text"
												id="total_balance" th:if="${formmode}=='edit'"
												th:value="${GeneralLedger?.remarks}" name="remarks"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" /> <input type="text" id="total_balance"
												th:if="${formmode}=='delete'"
												th:value="${GeneralLedger?.remarks}" name="remarks"
												class="form-control form-control-sm bg-white border border-dark"
												readonly style="background-color: #f9fff6;" />

										</div>

									</div>

									<div class="row formline mt-1">
										<div class="col-sm-1"></div>
										<div class="col-4 col-lg-2">
											<label for="">No of Account Opened</label>
										</div>
										<div class="col-4 col-lg-2">

											<input type="text" id="no_acct_opened"
												th:if="${formmode}=='view'"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" readonly
												style="background-color: #f9fff6;" /> <input type="text"
												id="no_acct_opened" th:if="${formmode}=='add'"
												class="form-control form-control-sm bg-white border border-dark"
												name="no_acct_opened" autocomplete="off" required /> <input
												type="text" id="no_acct_opened" th:if="${formmode}=='view1'"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" readonly
												style="background-color: #f9fff6;" /> <input type="text"
												id="no_acct_opened" th:if="${formmode}=='edit'"
												th:value="${GeneralLedger?.seq_order}" name="no_acct_opened"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" /> <input type="text"
												id="no_acct_opened" th:if="${formmode}=='delete'"
												th:value="${GeneralLedger?.seq_order}" name="no_acct_opened"
												class="form-control form-control-sm bg-white border border-dark"
												readonly style="background-color: #f9fff6;" />

										</div>
										<div class="col-sm-1"></div>
										<div class="col-4 col-lg-2">
											<label for="remarks">No of Account Closed</label>
										</div>
										<div class="col-4 col-lg-2">

											<input type="text" id="no_acct_closed"
												th:if="${formmode}=='view'"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" readonly
												style="background-color: #f9fff6;" /> <input type="text"
												id="no_acct_closed" th:if="${formmode}=='add'"
												class="form-control form-control-sm bg-white border border-dark"
												name="no_acct_closed" autocomplete="off" required /> <input
												type="text" id="no_acct_closed" th:if="${formmode}=='view1'"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" readonly
												style="background-color: #f9fff6;" /> <input type="text"
												id="no_acct_closed" th:if="${formmode}=='edit'"
												th:value="${GeneralLedger?.remarks}" name="no_acct_closed"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" /> <input type="text"
												id="no_acct_closed" th:if="${formmode}=='delete'"
												th:value="${GeneralLedger?.remarks}" name="no_acct_closed"
												class="form-control form-control-sm bg-white border border-dark"
												readonly style="background-color: #f9fff6;" />

										</div>

									</div>
								</div>
							</form>
						</div>
						<div class="card-footer text-center"
							style="background-color: #e9ecef">
							<button class="btn-primary big-btn" onclick="Home();">Home</button>
							<button type="button" class="btn-primary big-btn" th:if="${formmode}=='add'"
								form="RefCodeMaster" id="btnSubmit" onclick="submitform(this);"
								th:attr="data-formmode=${formmode}">Submit</button>
								<button type="button" class="btn-primary big-btn" th:if="${formmode}=='edit'"
								form="RefCodeMaster" id="btnSubmit" onclick="modifyUserData(this);"
								th:attr="data-formmode=${formmode}">Submit</button>
								<button class="btn-primary big-btn" id="btnDelete"
								th:if="${formmode}=='delete'" onclick="deleteUserData();">Delete</button>

							<button class="btn-primary big-btn" onclick="Back();">Back</button>
						</div>
					</div>

				</div>
		
                <!--  start view function-->
				<div  
					th:if="${formmode}=='view'" class="col-sm-11 ml-5 mt-2">
					<div class="card w-100 border">
						<div class="card-header"
							style="background-color: #e9ecef; height: 50px">
							<div class="float-left">
								<h6 style="font-size: 1.2rem; color: black;">GENERAL LEDGER</h6>
							</div>
						</div>
						<div class="card-body">
						    <form action="#" id="" th:object="${values}">
						        <div class="row formline justify-content-center mb-1">
						            <div class="col-sm-2 text-end">Branch Id</div>
						            <div class="col-sm-2 px-2">
						                <input type="text" name="branch_id" id="branch_id"
						                       class="form-control form-control-sm bg-white border border-dark"
						                       th:value="${singlerecord?.branch_id}" readonly />
						            </div>
						            <div class="col-sm-2 text-end" title="Branch Description">Branch Des.</div>
						            <div class="col-sm-2 px-2">
						                <input type="text" name="branch_desc" id="branch_desc"
						                       class="form-control form-control-sm bg-white border border-dark"
						                       th:value="${singlerecord?.branch_desc}" readonly />
						            </div>
						        </div>

						        <div class="row formline justify-content-center mb-1">
						            <div class="col-sm-2 text-end">GL CODE</div>
						            <div class="col-sm-2 px-2">
						                <input type="text" name="glCode" id="glCode"
						                       class="form-control form-control-sm bg-white border border-dark"
						                       th:value="${singlerecord?.glCode}" readonly />
						            </div>
						            <div class="col-sm-2 text-end">GL Description</div>
						            <div class="col-sm-2 px-2">
						                <input type="text" name="gl_type_description" id="gl_type_description"
						                       class="form-control form-control-sm bg-white border border-dark"
						                       th:value="${singlerecord?.gl_type_description}" readonly />
						            </div>
						        </div>

						        <div class="row formline justify-content-center mb-1">
						            <div class="col-sm-2 text-end">GL Sub Head Code</div>
						            <div class="col-sm-2 px-2">
						                <input type="text" name="glsh_code" id="glsh_code"
						                       class="form-control form-control-sm bg-white border border-dark"
						                       th:value="${singlerecord?.glsh_code}" readonly />
						            </div>
						            <div class="col-sm-2 text-end">GLSH Description</div>
						            <div class="col-sm-2 px-2">
						                <input type="text" name="glsh_desc" id="glsh_desc"
						                       class="form-control form-control-sm bg-white border border-dark"
						                       th:value="${singlerecord?.glsh_desc}" readonly />
						            </div>
						        </div>

						        <div class="row formline justify-content-center mb-1">
						            <div class="col-sm-2 text-end">Currency Code</div>
						            <div class="col-sm-2 px-2">
						                <input type="text" name="crncy_code" id="crncy_code"
						                       class="form-control form-control-sm bg-white border border-dark"
						                       th:value="${singlerecord?.crncy_code}" readonly />
						            </div>
						            <div class="col-sm-2 text-end">Balance Sheet Group</div>
						            <div class="col-sm-2 px-2">
						                <input type="text" name="bal_sheet_group" id="bal_sheet_group"
						                       class="form-control form-control-sm bg-white border border-dark"
						                       th:value="${singlerecord?.bal_sheet_group}" readonly />
						            </div>
						        </div>

						        <div class="row formline justify-content-center mb-1">
						            <div class="col-sm-2 text-end">Sequence Order</div>
						            <div class="col-sm-2 px-2">
						                <input type="text" name="seq_order" id="seq_order"
						                       class="form-control form-control-sm bg-white border border-dark"
						                       th:value="${singlerecord?.seq_order}" readonly />
						            </div>
						            <div class="col-sm-2 text-end">Total Balance</div>
						            <div class="col-sm-2 px-2">
						                <input type="text" name="total_balance" id="total_balance"
						                       class="form-control form-control-sm bg-white border border-dark"
						                       th:value="${#numbers.formatDecimal(singlerecord?.total_balance, 0, 2)}" readonly />
						            </div>
						        </div>

						        <div class="row formline justify-content-center ">
						            <div class="col-sm-2 text-end">No of Account Opened</div>
						            <div class="col-sm-2 px-2">
						                <input type="text" name="no_acct_opened" id="no_acct_opened"
						                       class="form-control form-control-sm bg-white border border-dark"
						                       th:value="${singlerecord?.no_acct_opened}" readonly />
						            </div>
						            <div class="col-sm-2 text-end">No of Account Closed</div>
						            <div class="col-sm-2 px-2">
						                <input type="text" name="no_acct_closed" id="no_acct_closed"
						                       class="form-control form-control-sm bg-white border border-dark" readonly
						                       th:value="${singlerecord?.no_acct_closed != null ? #numbers.formatDecimal(singlerecord.no_acct_closed, 0, 2) : '0'}" />
						            </div>
						        </div>
						    </form>
						</div>
						<div class="card-footer text-center"
							style="background-color: #e9ecef">
							<button class="btn-primary big-btn" onclick="Home();">Home</button>
							<button class="btn-primary big-btn" onclick="Back();">Back</button>
						</div>
					</div>
				</div>

			</div>
		</div>
	</div>

	<div class="modal fade" data-backdrop="false" data-keyboard="false"
		id="alert2" tabindex="-7" role="dialog" aria-hidden="true">
		<div
			class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
			<div class="modal-content">

				<div class="modal-body" style="text-align: center;">
					<h6 id="alertmsg2"></h6>
					<button type="button" class="btn-primary big-btn"
						onclick="navigateToMainlist(this)">Close</button>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" data-backdrop="false" data-keyboard="false"
		id="alert" tabindex="-7" role="dialog" aria-hidden="true">
		<div
			class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
			<div class="modal-content">

				<div class="modal-body" style="text-align: center;">
					<h6 id="alertmsg"></h6>
					<button type="button" class="btn-primary big-btn"
						onclick="Close()">Close</button>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" data-backdrop="false" data-keyboard="false"
		id="alert1" tabindex="-7" role="dialog" aria-hidden="true">
		<div
			class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
			<div class="modal-content">

				<div class="modal-body" style="text-align: center;">
					<h6 id="alertmsg1"></h6>
					<button type="button" class="btn-primary big-btn"
						onclick="$('#alert1').modal('hide')">Close</button>
				</div>
			</div>
		</div>
	</div>
<!-- Delete Confirmation Modal -->
	<div class="modal fade" id="datacancel" style="background: #000000b0;margin-bottom:10px;" role="dialog"
		aria-labelledby="deleteModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable" role="document">
			<div class="modal-content">

				<!-- Modal Header -->


				<!-- Modal Body -->
				<div class="modal-body">
					<h5 id="alertmsgpopup" style="font-size: 17px; color: black; padding: 15px;"></h5>
				</div>
				<!-- Modal Footer -->
				<div style="padding: 10px; text-align: center;">
					<button type="button" class="btn btn-outline-dark me-3" style="font-size: 16px;"
						onclick="$('#datacancel').modal('hide')">Cancel</button>
					<button type="button" class="btn btn-outline-dark me-3" id="refDelete" style="font-size: 16px;"
						onclick="deleteRecUpload(this);" th:attr="data-formmode=delete">Confirm , OverWrite</button>
				</div>

			</div>
		</div>
	</div>

	<!-- success pop up -->
	<div class="modal fade" id="SuccesPopUp" style="background: #000000b0;margin-bottom:10px;" role="dialog"
		aria-labelledby="deleteModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable" role="document">
			<div class="modal-content" style="min-height:212px;">
				<!-- Modal Body -->
				<div class="modal-body">
					<h5 id="Successmsgpopup" style="font-size: 17px; color: black; padding: 15px;"></h5>
				</div>
				<!-- Modal Footer -->
				<div style="padding: 10px; text-align: center;">
					<button type="button" class="btn btn-outline-dark me-3" style="font-size: 16px;"
						onclick="$('#SuccesPopUp').modal('hide')">Cancel</button>
				</div>

			</div>
		</div>
	</div>


</body>
<script>
    // ✅ JS number formatter (million-style commas, 2 decimals)
    function formatNumber(num) {
        if (num == null || num === '' || isNaN(num)) return '0.00';
        return Number(num).toLocaleString('en-IN', {
            minimumFractionDigits: 2,
            maximumFractionDigits: 2
        });
    }

    // ✅ Example: dynamically update table from backend AJAX
    function updateTable(data) {
        let rows = '';
        data.forEach((chartacc, index) => {
            rows += `
                <tr>
                    <td class="text-center">${index + 1}</td>
                    <td>${chartacc.glCode || ''}</td>
                    <td>${chartacc.glDescription || ''}</td>
                    <td>${chartacc.branch_id || ''}</td>
                    <td>${chartacc.branch_desc || ''}</td>

                    <td class="hover-underline" style="color:#007bff; cursor:pointer;"
                        data-attr="${chartacc.glsh_code || ''}" 
                        onclick="getdata(this)">
                        ${chartacc.glsh_code || ''}
                    </td>

                    <td>${chartacc.glsh_desc || ''}</td>
                    <td>${chartacc.crncy_code || ''}</td>

                    <td style="text-align:right;">
                        ${formatNumber(chartacc.total_balance > 0 ? chartacc.total_balance : 0)}
                    </td>
                    <td style="text-align:right;">
                        ${formatNumber(chartacc.total_balance < 0 ? Math.abs(chartacc.total_balance) : 0)}
                    </td>

                    <td class="text-center">
                        <div class="dropdown action-dropdown">
                            <button class="btn btn-action dropdown-toggle" style="padding:0px"
                                    type="button" title="Action" data-toggle="dropdown"
                                    aria-haspopup="true" aria-expanded="false">Action</button>
                            <div class="dropdown-menu" style="padding:0px">
                                <a class="dropdown-item modify-item" 
                                   data-attr="${chartacc.glsh_code || ''}" 
                                   title="Modify" onclick="modifysubmit(this)">Modify</a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item delete-item" 
                                   data-attr="${chartacc.glsh_code || ''}" 
                                   title="Delete" onclick="deletesubmit(this)">Delete</a>
                            </div>
                        </div>
                    </td>
                </tr>
            `;
        });
        document.getElementById('placelist').innerHTML = rows;
    }
</script>
</html>